<!DOCTYPE html>
<html>

<head>
    <meta name="generator" content="HTML Tidy for HTML5 for Linux version 5.2.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>The dqtool tool manual page</title>
    <meta name="generator" content="DocBook XSL Stylesheets V1.78.1" />
</head>

<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
    <div class="reference">
        <div class="titlepage">
            <div>
                <div>
                    <h1 class="title">
                        <a name="idm45327948033776" id="idm45327948033776"></a>The dqtool tool manual page</h1>
                </div>
            </div>
            <hr/>
        </div>
        <div class="toc">
            <p><b>Table of Contents</b></p>
            <dl class="toc">
                <dt><span class="refentrytitle"><a href=
        "#dqtool.1">dqtool</a></span> <span class="refpurpose">—
        Display the contents of a disk-buffer file created with
        <span class="phrase">syslog-ng Open Source
        Edition</span>. You can also use it to move disk-buffer files to another directory.</span></dt>
            </dl>
        </div>
        <div class="refentry">
            <a name="dqtool.1" id="dqtool.1"></a>
            <div class="titlepage"></div>
            <div class="refnamediv">
                <h6>Name</h6>
                <p>dqtool — Display the contents of a disk-buffer file created with <span class="phrase">syslog-ng Open Source
        Edition</span></p>
            </div>
            <div class="refsynopsisdiv">
                <h6>Synopsis</h6>
                <div class="cmdsynopsis">
                    <p><code class="command">dqtool</code> [command] [options]
                    </p>
                </div>
            </div>
            <div class="refsection">
                <a name="dqtool-mandescription" id="dqtool-mandescription"></a>
                <h6>Description</h6>
                <p>NOTE: The dqtool application is distributed with the
                    <span class="phrase">syslog-ng Open Source Edition</span> system logging application, and is usually part of the syslog-ng package. The latest version of the syslog-ng application is available at the <span class="phrase"><a class="link" href="https://syslog-ng.com"
        target="_top">syslog-ng page</a></span>.</p>
                <p>This manual page is only an abstract, for the complete documentation of syslog-ng, see the <span class="phrase"><a class="link" href=
        "https://syslog-ng.com/documentation" target=
        "_top">syslog-ng Documentation page</a></span>.</p>
                <p>The <span class="command"><strong>dqtool</strong></span> application is a utility that can be used to display and format the messages stored in a disk-buffer file.</p>
            </div>
            <div class="refsection">
                <a name="dqtool-assign" id="dqtool-assign"></a>
                <h6>The assign command</h6>
                <div class="cmdsynopsis">
                    <p><code class="command">assign</code> [options] [file]</p>
                </div>
                <p>Use the <span class="command"><strong>assign</strong></span> command to assign a disk-queue file to a specific entry in the persist file. If the specified entry does not exist in the persist file, it will be automatically created. Note that this option modifies the persist file. Stop syslog-ng before using this command.</p>
                <p>The <span class="command"><strong>assign</strong></span> command has the following options. You must also add the path to the disk-queue file as parameter, for example, <span class="Code">/tmp/syslog-ng-00000.rqf</span>. If you use only the name of the file, dqtool assumes it is in the current working directory.</p>
                <div class="variablelist">
                    <dl class="variablelist">
                        <dt><span class="term"><span class="command"><strong>--new_path</strong></span> or <span class= "command"><strong>-n</strong></span></span></dt>
                        <dd>
                            <p>The entry in the persist file you want to assign the disk-queue file to. For example: <span class="Code">"afsocket_dd_qfile(stream,localhost:15554)"</span></p>
                        </dd>
                        <dt><span class="term"><span class="command"><strong>--persist</strong></span> or <span class= "command"><strong>-p</strong></span></span></dt>
                        <dd>
                            <p>The path to the syslog-ng persist file. The <span class="command"><strong>assign</strong></span> command automatically updates or creates the specified entry in the persist file.</p>
                        </dd>
                    </dl>
                </div>
                <p>Examples:</p>
                <p>Relocate a single queue file:</p>
                <pre class="synopsis">bin/dqtool assign --persist /var/syslog-ng.persist --new_path "afsocket_dd_qfile(stream,localhost:15554)" /tmp/syslog-ng-00000.rqf</pre>
            </div>
            <div class="refsection">
                <a name="dqtool-cat" id="dqtool-cat"></a>
                <h6>The cat command</h6>
                <div class="cmdsynopsis">
                    <p><code class="command">cat</code> [options] [file]</p>
                </div>
                <p>Use the <span class="command"><strong>cat</strong></span> command to display the log messages stored in the disk-buffer (also called disk-queue) file, and also information from the header of the disk queue file. The messages are printed
                    to the standard output (stdout), so it is possible to use grep and other tools to find particular log messages, e.g.,
                    <span class="command"><strong>dqtool cat
        /var/log/messages.lgs |grep
        192.168.1.1</strong></span>.</p>
                <p>The <span class="command"><strong>cat</strong></span> command has the following options:</p>
                <div class="variablelist">
                    <dl class="variablelist">
                        <dt><span class="term"><span class=
            "command"><strong>--debug</strong></span> or
            <span class=
            "command"><strong>-d</strong></span></span></dt>
                        <dd>
                            <p>Print diagnostic and debugging messages to stderr.
                            </p>
                        </dd>
                        <dt><span class="term"><span class=
            "command"><strong>--help</strong></span> or
            <span class="command"><strong>-h</strong></span></span></dt>
                        <dd>
                            <p>Display a brief help message.</p>
                        </dd>
                        <dt><span class="term"><span class=
            "command"><strong>--template=&lt;template&gt;</strong></span>
            or <span class=
            "command"><strong>-t</strong></span></span></dt>
                        <dd>
                            <p>Format the messages using the specified template.
                            </p>
                        </dd>
                        <dt><span class="term"><span class=
            "command"><strong>--verbose</strong></span> or
            <span class=
            "command"><strong>-v</strong></span></span></dt>
                        <dd>
                            <p>Print verbose messages to stderr.</p>
                        </dd>
                        <dt><span class="term"><span class=
            "command"><strong>--version</strong></span> or
            <span class=
            "command"><strong>-V</strong></span></span></dt>
                        <dd>
                            <p>Display version information.</p>
                        </dd>
                    </dl>
                </div>
                <p>Example:</p>
                <pre class="synopsis">
        ./dqtool cat ../var/syslog-ng-00000.qf</pre>
                <p>The output looks like:</p>
                <pre class="synopsis">
        Disk-buffer state loaded; filename='../var/syslog-ng-00000.qf', qout_length='65', qbacklog_length='0', qoverflow_length='9205', qdisk_length='0'
Mar  3 10:52:05 tristram localprg[1234]: seq: 0000011630, runid: 1267609923, stamp: 2010-03-03T10:52:05 PADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADD
Mar  3 10:52:05 tristram localprg[1234]: seq: 0000011631, runid: 1267609923, stamp: 2010-03-03T10:52:05 PADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADDPADD</pre>
            </div>
            <div class="refsection">
                <a name="dqtool-relocate" id="dqtool-relocate"></a>
                <h6>The relocate command</h6>
                <div class="cmdsynopsis">
                    <p><code class="command">relocate</code> [options] [files]</p>
                </div>
                <p>Use the <span class="command"><strong>relocate</strong></span> command to move or rename disk-buffer (also called disk-queue) files. Note that this option modifies the persist file. Stop syslog-ng before using this command.</p>
                <p>The <span class="command"><strong>cat</strong></span> command has the following options:</p>
                <div class="variablelist">
                    <dl class="variablelist">
                        <dt><span class="term"><span class="command"><strong>--all</strong></span> or <span class= "command"><strong>-a</strong></span></span></dt>
                        <dd>
                            <p>Relocate every disk-buffer file that is listed in the syslog-ng persist file.</p>
                        </dd>
                        <dt><span class="term"><span class="command"><strong>--new_path</strong></span> or <span class= "command"><strong>-n</strong></span></span></dt>
                        <dd>
                            <p>The directory where you want to move the disk-buffer files. For example: <span class="Code">/var/disk-buffers</span></p>
                        </dd>
                        <dt><span class="term"><span class="command"><strong>--persist</strong></span> or <span class= "command"><strong>-p</strong></span></span></dt>
                        <dd>
                            <p>The path to the syslog-ng persist file. The <span class="command"><strong>relocate</strong></span> command automatically updates the entries of the disk-buffer files in the persist file.</p>
                        </dd>
                    </dl>
                </div>
                <p>Examples:</p>
                <p>Relocate a single queue file:</p>
                <pre class="synopsis">bin/dqtool relocate --new_path /tmp/dq --persist var/syslog-ng.persist /tmp/syslog-ng-00000.rqf</pre>
                <p>Relocate multiple queue files:</p>
                <pre class="synopsis">bin/dqtool relocate --new_path /tmp/dq --persist var/syslog-ng.persist /tmp/syslog-ng-00000.rqf /tmp/syslog-ng-00001.rqf</pre>
                <p>Relocate every queue file:</p>
                <pre class="synopsis">bin/dqtool relocate --new_path /tmp/dq --persist var/syslog-ng.persist --all</pre>
            </div>
            <div class="refsection">
                <a name="idm45327922098864" id="idm45327922098864"></a>
                <h6>Files</h6>
                <p><code class="filename">/opt/syslog-ng/bin/dqtool</code></p>
            </div>
            <div class="refsection">
                <a name="idm45327922097328" id="idm45327922097328"></a>
                <h6>See also</h6>
                <p><a class="link" href="#"><span class=
        "command"><strong>syslog-ng.conf</strong></span>(5)</a></p>
                <p><a class="link" href="#"><span class=
        "command"><strong>syslog-ng</strong></span>(8)</a></p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
                    <b>Note</b>
                    <p>For the detailed documentation of <span class="phrase">syslog-ng OSE</span> see the <span class="phrase"><a class="link" href=
          "https://syslog-ng.com/documentation" target=
          "_top">syslog-ng Documentation page</a></span></p>
                    <p>If you experience any problems or need help with syslog-ng, visit the <a class="link" href="https://lists.balabit.hu/mailman/listinfo/syslog-ng" target="_top"><span class="command"><strong>syslog-ng
          mailing list</strong></span></a>.</p>
                    <p>For news and notifications about of syslog-ng, visit the <a class="link" href="https://syslog-ng.org/blogs/" target="_top"><span class="command"><strong>syslog-ng
          blogs</strong></span></a>.</p>
                </div>
            </div>
            <div class="refsection">
                <a name="idm45327922088272" id="idm45327922088272"></a>
                <h6>Author</h6>
                <p>This manual page was written by the One Identity Documentation Team.</p>
            </div>
            <div class="refsection">
                <a name="idm45327922086736" id="idm45327922086736"></a>
                <h6>Copyright</h6>
                <p>The authors grant permission to copy, distribute and/or modify this manual page under the terms of the GNU General Public License Version 2 or newer (GPL v2+).</p>
            </div>
        </div>
    </div>
</body>

</html>