<?xml version="1.0" encoding="UTF-8"?>

<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body oldrole="topic">

<h6 oldrole="example" version="5.0" xmlns="http://docbook.org/ns/docbook">Example: Calculating memory usage of logstore journals</h6>
<p oldrole="para">If you are using the default settings (4 journal blocks for every logstore journal, one block is 1MB, <span class="Code" oldrole="parameter">logstore-journal-shmem-threshold()</span> is 512MB), this means that <MadCap:variable name="General.abbrev"></MadCap:variable> will allocate 4MB memory for every open logstore file, up to 512MB if you have 128 open logstore files. Opening a new logstore file would require 4 more megabytes of memory for journaling, bringing the total required memory to 516MB, which is above the <span class="Code" oldrole="parameter">logstore-journal-shmem-threshold()</span>. In this case, <MadCap:variable name="General.abbrev"></MadCap:variable> switches to storing only a single journal block in the memory, lowering the memory requirements of journaling to 129MB. However, opening more and more logstore files will require more and more memory, and this is not limited, except when <MadCap:variable name="General.abbrev"></MadCap:variable> reaches the maximum number of files that can be open (as set in the <span class="Code" oldrole="parameter">--fd-limit</span> command-line option).</p>

</body></html>
