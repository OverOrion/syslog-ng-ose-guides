<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta name="description" content="" />
    </head>
    <body name="patterndb-actions-conditional" oldrole="section">
        <h1 name="patterndb-actions-conditional" xmlns="http://docbook.org/ns/docbook">Conditional actions</h1>
        <MadCap:keyword term="actions:['conditional actions']">
        </MadCap:keyword>
        <p oldrole="para">To limit when a message is triggered, use the <span class="Code" oldrole="parameter">condition</span> attribute and specify a filter expression: the action will be executed only if the condition is met. For example, the following action is executed only if the message was sent by the host called <span class="Code" oldrole="userinput">myhost</span>.</p><pre class="Code" oldrole="synopsis">&lt;action condition="'${HOST}' == 'myhost'"&gt;</pre>
        <p oldrole="para">You can use the same operators in the condition that can be used in filters. For details, see <MadCap:xref href="filters-comparing.htm#filters-comparing"></MadCap:xref>.</p>
        <p oldrole="para">The following action can be used to log the length of an SSH session (the time difference between a login and a logout message in the context):</p><pre class="Code" oldrole="synopsis">&lt;actions&gt;
    &lt;action&gt;
        &lt;message&gt;
            &lt;values&gt;
                &lt;value name="MESSAGE"&gt;An SSH session for ${SSH_USERNAME}@1 from ${SSH_CLIENT_ADDRESS}@2 closed. Session lasted from ${DATE}@2 ${DATE} &lt;/value&gt;
            &lt;/values&gt;
        &lt;/message&gt;
    &lt;/action&gt;
&lt;/actions&gt;</pre>
        <div class="Example">
            <h6 oldrole="example">Example: Actions based on the number of messages</h6>
            <MadCap:keyword term="actions:[]">
            </MadCap:keyword>
            <MadCap:keyword term="$(context-length)">
            </MadCap:keyword>
            <p oldrole="para">The following example triggers different actions based on the number of messages in the context. This way you can check if the context contains enough messages for the event to be complete, and execute a different action if it does not.</p><pre class="Code" oldrole="synopsis">&lt;actions&gt;
    &lt;action condition='"$(context-length)" &gt;= "4"'&gt;
        &lt;message&gt;
            &lt;values&gt;
                &lt;value name="PROGRAM"&gt;event&lt;/value&gt;
                &lt;value name="MESSAGE"&gt;Event complete&lt;/value&gt;
            &lt;/values&gt;
        &lt;/message&gt;
    &lt;/action&gt;
    &lt;action condition='"$(context-length)" &lt; "4"'&gt;
        &lt;message&gt;
            &lt;values&gt;
                &lt;value name="PROGRAM"&gt;error&lt;/value&gt;
            &lt;value name="MESSAGE"&gt;Error detected&lt;/value&gt;
            &lt;/values&gt;
        &lt;/message&gt;
    &lt;/action&gt;
&lt;/actions&gt;</pre>
        </div>
    </body>
</html>