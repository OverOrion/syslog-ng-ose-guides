<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body name="configuring-destinations-kafka" oldrole="section">
        <h1 name="configuring-destinations-kafka"><a name="configuring-destinations-kafka"></a><span class="Code" oldrole="parameter">kafka</span>: Publishing messages to Apache Kafka</h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;kafka&lt;/span&gt;]">
        </MadCap:keyword>
        <p oldrole="para">Starting with version <MadCap:conditionaltext MadCap:conditions="General.pe">5.4</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.ose">3.7</MadCap:conditionaltext>, <MadCap:variable name="General.abbrev"></MadCap:variable> can directly publish log messages to the <a href="http://kafka.apache.org">Apache Kafka</a> message bus, where subscribers can access them.</p>
        <MadCap:snippetBlock src="../../shared/wnt/note-server-mode-only.htm">
        </MadCap:snippetBlock>
        <ul oldrole="itemizedlist">
            <MadCap:snippetBlock src="../../shared/chunk/listitem-java-supported-platforms.htm">
            </MadCap:snippetBlock>
            <li oldrole="listitem">
                <p oldrole="para">Since <MadCap:variable name="General.abbrev"></MadCap:variable> uses the official Java Kafka producer, the <span class="Code" oldrole="parameter">kafka</span> destination has significant memory usage.</p>
            </li>
            <MadCap:snippetBlock src="../../shared/chunk/listitem-java-internal-messages.htm">
            </MadCap:snippetBlock>
        </ul>
        <div>
            <h6 oldrole="formalpara">Declaration:</h6><pre class="Code" oldrole="synopsis">@module mod-java
@include "scl.conf"

kafka(
    client-lib-dir("/opt/syslog-ng/lib/syslog-ng/java-modules/:&lt;path-to-preinstalled-kafka-libraries&gt;")
    kafka-bootstrap-servers("1.2.3.4:9092,192.168.0.2:9092")
    topic("${HOST}")

);</pre>
        </div>
        <div class="Example">
            <h6 name="example-destination-kafka" oldrole="example"><a name="example-destination-kafka"></a>Example: Sending log data to Apache Kafka</h6>
            <p oldrole="para">The following example defines a <span class="Code" oldrole="parameter">kafka</span> destination, using only the required parameters.</p><pre class="Code" oldrole="synopsis">@module mod-java
@include "scl.conf"

destination d_kafka {
  kafka(
    client-lib-dir("/opt/syslog-ng/lib/syslog-ng/java-modules/KafkaDestination.jar:/usr/share/kafka/lib/")
    kafka-bootstrap-servers("1.2.3.4:9092,192.168.0.2:9092")
    topic("${HOST}")
  );
};</pre>
        </div>
        <ul oldrole="itemizedlist">
            <li oldrole="listitem">
                <p oldrole="para">To install the software required for the <span class="Code" oldrole="parameter">kafka</span> destination, see <MadCap:xref href="destination-kafka-prerequisites.htm#destination-kafka-prerequisites"><span style="color: #04aada;" class="mcFormatColor">Prerequisites</span></MadCap:xref>.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">For details on how the <span class="Code" oldrole="parameter">kafka</span> destination works, see <MadCap:xref href="destination-kafka-interaction.htm#destination-kafka-interaction"><span style="color: #04aada;" class="mcFormatColor">How [%=General.abbrev%] interacts with Apache Kafka</span></MadCap:xref>.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">For the list of options, see <MadCap:xref href="reference-destination-kafka.htm#reference-destination-kafka"><span style="color: #04aada;" class="mcFormatColor">Kafka destination options</span></MadCap:xref>.</p>
            </li>
        </ul>
        <p MadCap:conditions="General.ose" oldrole="para">The <span class="Code" oldrole="parameter">kafka()</span> driver is actually a reusable configuration snippet configured to receive log messages using the Java language-binding of <MadCap:variable name="General.abbrev"></MadCap:variable>. For details on using or writing such configuration snippets, see <MadCap:xref href="config-blocks.htm#config-blocks"><span style="color: #04aada;" class="mcFormatColor">Reusing configuration blocks</span></MadCap:xref>. You can find the source of the kafka configuration snippet on <a href="https://github.com/balabit/syslog-ng/blob/master/scl/kafka/plugin.conf">GitHub</a>. For details on extending <MadCap:variable name="General.abbrev"></MadCap:variable> in Java, see the <a href="https://syslog-ng.gitbooks.io/getting-started/content/chapters/chapter_5/section_2.html">Getting started with syslog-ng development</a> guide.</p>
    </body>
</html>