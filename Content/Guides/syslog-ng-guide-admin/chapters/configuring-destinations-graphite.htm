<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta name="description" content="" />
    </head>
    <body name="configuring-destinations-graphite">
        <h1 name="configuring-destinations-graphite">graphite: Sending metrics to Graphite</h1>
        <MadCap:keyword term="destination drivers:['graphite()']">
        </MadCap:keyword>
        <p>The <span class="Code" oldrole="parameter">graphite()</span> destination can send metrics to a <a href="http://graphite.readthedocs.io/en/latest/index.html">Graphite</a> server to store numeric time-series data. There are many ways to feed the Graphite template function with name value pairs. The <MadCap:variable name="General.OSE" /> CSV and PatternDB parsers (for details, see <MadCap:xref href="../../shared/syslog-ng-patterndb-using-parsers.htm"><span style="color: #04aada;" class="mcFormatColor">Using pattern parsers</span></MadCap:xref>) can parse log messages and generate name value pairs based on message content. The CSV parser (for details, see <MadCap:xref href="csv-parser.htm"><span style="color: #04aada;" class="mcFormatColor">Parsing messages with comma-separated and similar values</span></MadCap:xref>) can be used for logs that have a constant field based structure, like the Apache web server access logs. The <span>patterndb</span> parser can parse information and can extract important fields from free form log messages, as long as patterns describing the log messages are available. Another way is to send JSON-based log messages (for details, see <MadCap:xref href="json-parser.htm"><span style="color: #04aada;" class="mcFormatColor">The JSON parser</span></MadCap:xref>) to <MadCap:variable name="General.OSE" />, like running a simple shell script collecting metrics and running it from cron regularly.</p>
        <p>To see an example of how the <span class="Code" oldrole="parameter">graphite()</span> destination is used to collect statistics coming from syslog-ng, see the blog post <a href="https://syslog-ng.com/blog/collecting-syslog-ng-statistics-to-graphite/">Collecting syslog-ng statistics to Graphite</a>.</p>
        <div>
            <h6>Declaration:</h6><pre>graphite(payload());</pre>
        </div>
        <div class="Example">
            <h6 name="example-destination-graphite"><a name="example-destination-graphite"></a>Example: Using the graphite() driver</h6>
            <p>To use the <span>graphite()</span> destination, the only mandatory parameter is payload, which specifies the value pairs to send to <span>graphite</span>. In the following example any value pairs starting with <span>"monitor."</span> are forwarded to <span>graphite</span>.</p><pre>destination d_graphite { graphite(payload("--key monitor.*")); };</pre>
        </div>
		<div class="Note">
			<p class="Hyphenation"><span class="AllNoteStyles">NOTE:</span> 
			The <span class="Code" oldrole="parameter">graphite()</span> destination is only a wrapper around the <span class="Code" oldrole="parameter">network()</span> destination and the <span class="Code" oldrole="parameter">graphite-output</span> template function. If you want to fine-tune the TCP parameters, use the <span class="Code" oldrole="parameter">network()</span> destination instead, as described in <MadCap:xref href="reference-template-functions.htm#template-function-graphite"><span style="color: #04aada;" class="mcFormatColor">graphite-output</span></MadCap:xref>.</p>
        </div>
    </body>
</html>