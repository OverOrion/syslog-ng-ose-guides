<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body name="syslog-ng-strace-truss-tusc" oldrole="section">
<h1 name="syslog-ng-strace-truss-tusc" xmlns="http://docbook.org/ns/docbook">Collecting debugging information with strace, truss, or tusc</h1>
<MadCap:keyword term="troubleshooting:['truss']"></MadCap:keyword>
<MadCap:keyword term="troubleshooting:['strace']"></MadCap:keyword>
<MadCap:keyword term="troubleshooting:['tusc']"></MadCap:keyword>
<MadCap:keyword term="truss"></MadCap:keyword>
<MadCap:keyword term="strace"></MadCap:keyword>
<MadCap:keyword term="tusc"></MadCap:keyword>
<p oldrole="para">To properly troubleshoot certain situations, it can be useful to trace which system calls &abbrev; performs. How this is performed depends on the platform running &abbrev;. In general, note the following points:</p>
<ul oldrole="itemizedlist">
<li oldrole="listitem">
<p oldrole="para">When &abbrev; is started, a supervisor process might stay in the foreground, while the actual syslog-ng daemon goes to the background. Always trace the background process.</p>
</li>
<li oldrole="listitem">
<p oldrole="para">Apart from the system calls, the time between two system calls can be important as well. Make sure that your tracing tool records the time information as well. For details on how to do that, refer to the manual page of your specific tool (for example, <b oldrole="command">strace</b> on Linux, or <b oldrole="command">truss</b> on Solaris and BSD).</p>
</li>
<li oldrole="listitem">
<p oldrole="para">Run your tracing tool in verbose mode, and if possible, set it to print long output strings, so the messages are not truncated.</p>
</li>
<li oldrole="listitem">
<p oldrole="para">When using <b oldrole="command">strace</b>, also record the output of <b oldrole="command">lsof</b> to see which files are accessed.</p>
</li>
</ul>
<p oldrole="para">The following are examples for tracing system calls of syslog-ng on some platforms. The output is saved into the <span class="Code" oldrole="filename">/tmp/syslog-ng-trace.txt</span> file, sufficed with the PID of the related syslog-ng process.The path of the syslog-ng binary assumes that you have installed &abbrev; from the official &abbrev; binaries available at the BalaBit website &mdash; native distribution-specific packages may use different paths.</p>
<ul oldrole="itemizedlist">
<li oldrole="listitem">
<p oldrole="para"><i oldrole="emphasis">Linux</i>: <b oldrole="command"> strace -o /tmp/trace.txt -s256 -ff -ttT /opt/syslog-ng/sbin/syslog-ng -f /opt/syslog-ng/etc/syslog-ng.conf -Fdv</b></p>
</li>
<li oldrole="listitem">
<p oldrole="para"><i oldrole="emphasis">HP-UX</i>: <b oldrole="command">tusc -f -o /tmp/syslog-ng-trace.txt -T /opt/syslog-ng/sbin/syslog-ng</b></p>
</li>
<li oldrole="listitem">
<p oldrole="para"><i oldrole="emphasis">IBM AIX and Solaris</i>: <b oldrole="command">truss -f -o /tmp/syslog-ng-trace.txt -r all -w all -u libc:: /opt/syslog-ng/sbin/syslog-ng -d -d -d</b></p>
</li>
</ul>
<table cellspacing="0" class="TableStyle-NoteTable_Blue_DoNotEdit" oldrole="tip" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css');"><col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column1" style="width: 0.3in;"></col><col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column2"></col><tbody><tr class="TableStyle-NoteTable_Blue_DoNotEdit-Body-Body1"><td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyB-Column1-Body1"><p><img src="../../../Resources/Images/Common/note.png"/></p></td><td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyA-Column2-Body1"><span class="AllNoteStyles">TIP: </span><p oldrole="para">To execute these commands on an already running &abbrev; process, use the <span class="Code" oldrole="userinput">-p &lt;pid_of_syslog-ng&gt;</span> parameter.</p></td></tr></tbody></table>
</body></html>
