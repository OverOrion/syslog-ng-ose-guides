<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" MadCap:conditions="General.OSE">
    <head>
        <meta name="description" content="" />
    </head>
    <body" name="destination-hdfs-maprfs">
        <h1" name="destination-hdfs-maprfs">Storing messages with MapR-FS</h1>
        <MadCap:keyword term="MapR">
        </MadCap:keyword>
        <MadCap:keyword term="MapR-FS">
        </MadCap:keyword>
        <MadCap:keyword term="MapR File System">
        </MadCap:keyword>
        <p>The <MadCap:variable name="General.abbrev"></MadCap:variable> application is also compatible with MapR File System (MapR-FS). MapR-FS provides better performance, reliability, efficiency, maintainability, and ease of use compared to the default Hadoop Distributed Files System (HDFS). To use MapR-FS with <MadCap:variable name="General.abbrev"></MadCap:variable>, complete the following steps:</p>
        <ol>
            <li>
                <p>Install MapR libraries. Instead of the official Apache HDFS libraries, MapR uses different libraries. The supported version is MapR 4.x.</p>
                <ol>
                    <li>
                        <p>Download the libraries from the <link xmlns:ns1="http://doc.mapr.com/display/MapR3/Maven+Repository+and+Artifacts+for+MapR">Maven Repository and Artifacts for MapR</link> or get it from <link xmlns:ns1="http://doc.mapr.com/display/MapR/Quick+Installation+Guide">an already existing MapR installation</link>.</p>
                    </li>
                    <li>
                        <p>Install MapR. If you do not know how to install MapR, follow the instructions on the <link xmlns:ns1="https://www.mapr.com/">MapR website</link>.</p>
                    </li>
                </ol>
            </li>
            <li>
                <p>In a default MapR installation, the required libraries are installed in the following path: <span class="Code">/opt/mapr/lib</span>.</p>
                <p>Enter the path where MapR was installed in the <span class="Code" oldrole="parameter">class-path</span> option of the <span class="Code" oldrole="parameter">hdfs</span> destination, for example:</p><pre>class-path("/opt/mapr/lib/")</pre>
                <p>If the libraries were downloaded from the Maven Repository, the following additional libraries will be requiered. Note that the version numbers in the filenames can be different in the various Hadoop releases:<span class="Code">commons-collections-3.2.1.jar</span>, <span class="Code">commons-logging-1.1.3.jar</span>, <span class="Code">hadoop-auth-2.5.1.jar</span>, <span class="Code">log4j-1.2.15.jar</span>, <span class="Code">slf4j-api-1.7.5.jar</span>, <span class="Code">commons-configuration-1.6.jar</span>, <span class="Code">guava-13.0.1.jar</span>, <span class="Code">hadoop-common-2.5.1.jar</span>, <span class="Code">maprfs-4.0.2-mapr.jar</span>, <span class="Code">slf4j-log4j12-1.7.5.jar</span>, <span class="Code">commons-lang-2.5.jar</span>, <span class="Code">hadoop-0.20.2-dev-core.jar</span>, <span class="Code">json-20080701.jar</span>, <span class="Code">protobuf-java-2.5.0.jar</span>, <span class="Code">zookeeper-3.4.5-mapr-1406.jar</span>.</p>
            </li>
            <li>
                <p>Configure the <span class="Code" oldrole="parameter">hdfs</span> destination in <MadCap:variable name="General.abbrev"></MadCap:variable>.</p>
                <div class="Example">
                    <h6 name="example-destination-hdfs-mapr"><a name="example-destination-hdfs-mapr"></a>Example: Storing logfiles with MapR-FS</h6>
                    <p>The following example defines an <span class="Code" oldrole="parameter">hdfs</span> destination for MapR-FS using only the required parameters.</p><pre>
@include "scl.conf"

destination d_mapr {
    hdfs(
        client-lib-dir("/opt/syslog-ng/lib/syslog-ng/java-modules/:/opt/mapr/lib/")
        hdfs-uri("maprfs://10.140.32.80")
        hdfs-file("/user/log/logfile.txt")
    );
};
</pre>
                </div>
            </li>
        </ol>
    </body>
</html>