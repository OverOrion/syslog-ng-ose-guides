<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body name="chapter-troubleshooting-syslog-ng" oldrole="chapter">
        <h1 name="chapter-troubleshooting-syslog-ng"><a name="chapter-troubleshooting-syslog-ng"></a>Troubleshooting syslog-ng</h1>
        <MadCap:keyword term="troubleshooting">
        </MadCap:keyword>
        <MadCap:keyword term="error solving">
        </MadCap:keyword>
        <MadCap:keyword term="syslog-ng:['troubleshooting']">
        </MadCap:keyword>
        <p oldrole="para">This chapter provides tips and guidelines about troubleshooting problems related to syslog-ng.<MadCap:conditionaltext MadCap:conditions="General.pe6"> Troubleshooting the <MadCap:variable name="General.agent"></MadCap:variable> application is discussed in <a targetdoc="syslog-ng-windows-agent-guide-admin" targetptr="chapter-windows-troubleshooting" oldrole="olink"></a>.</MadCap:conditionaltext></p>
        <ul oldrole="itemizedlist">
            <li oldrole="listitem">
                <p oldrole="para">As a general rule, first try to get logging the messages to a local file. Once this is working, you know that syslog-ng is running correctly and receiving messages, and you can proceed to forwarding the messages to the server.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">Always check the configuration files for any syntax errors on both the client and the server using the <span class="Code" oldrole="command">syslog-ng --syntax-only</span> command.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">If the <MadCap:variable name="General.abbrev"></MadCap:variable> server does not receive the messages, verify that the IP addresses and ports are correct in your sources and destinations. Also, check that the client and the server uses the same protocol (a common error is to send logs on UDP, but configure the server to receive logs on TCP.</p>
                <p oldrole="para">If the problem persist, use <span class="Code" oldrole="command">tcpdump</span> or a similar packet sniffer tool on the client to verify that the messages are sent correctly, and on the server to verify that it receives the messages.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">To find message-routing problems, run <MadCap:variable name="General.abbrev"></MadCap:variable> with the following command <span class="Code" oldrole="command">syslog-ng -Fevd</span>. That way <MadCap:variable name="General.abbrev"></MadCap:variable> will run in the foreground, and display debug messages about the messages that are processed.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">If syslog-ng is closing the connections for no apparent reason, be sure to check the log messages of syslog-ng. You might also want to run syslog-ng with the <span class="Code" oldrole="parameter">--verbose</span> or <span class="Code" oldrole="parameter">--debug</span> command-line options for more-detailed log messages. You can enable these messages without restarting syslog-ng using the <span class="Code" oldrole="command">syslog-ng-ctl verbose --set=on</span> command. For details, see the syslog-ng-ctl man page at <MadCap:xref href="../../../manpages/syslog-ng-ctl.1.html"><span style="color: #04aada;" class="mcFormatColor">The syslog-ng control tool manual page</span></MadCap:xref>.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">Build up encrypted connections step-by-step: first create a working unencrypted (for example TCP) connection, then add TLS encryption, and finally client authentication if needed.</p>
            </li>
            <li oldrole="listitem">
                <p oldrole="para">If you use the same driver and options in the destination of your <MadCap:variable name="General.abbrev"></MadCap:variable> client and the source of your <MadCap:variable name="General.abbrev"></MadCap:variable> server, everything should work as expected. Unfortunately there are some other combinations, that seem to be working, but result in losing parts of the messages. For details on the working combinations, see <MadCap:xref href="concepts-things-to-consider.htm#concepts-things-to-consider"><span style="color: #04aada;" class="mcFormatColor">Things to consider when forwarding messages between [%=General.abbrev%] hosts</span></MadCap:xref>.</p>
            </li>
        </ul>
    </body>
</html>