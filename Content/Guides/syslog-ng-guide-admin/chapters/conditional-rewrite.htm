<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!-- FIXME options should be restructured to simplesects -->
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body name="conditional-rewrite" oldrole="section">
<h1 name="conditional-rewrite" xmlns="http://docbook.org/ns/docbook">Conditional rewrites</h1>
<MadCap:keyword term="condition()"></MadCap:keyword>
<MadCap:keyword term="conditional rewrites"></MadCap:keyword>
<MadCap:keyword term="rewrite if"></MadCap:keyword>
<MadCap:keyword term="rewriting messages:['conditional rewrites']"></MadCap:keyword>
<MadCap:keyword term="filtering rewrites"></MadCap:keyword>
<p oldrole="para">Starting with <MadCap:conditionaltext MadCap:conditions="pe">4 F1</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="ose">3.2</MadCap:conditionaltext>, it is possible to apply a rewrite rule to a message only if certain conditions are met. The <span class="Code" oldrole="parameter">condition()</span> option effectively embeds a filter expression into the rewrite rule: the message is modified only if the message passes the filter. If the condition is not met, the message is passed to the next element of the log path (that is, the element following the rewrite rule in the log statement, for example, the destination). Any filter expression normally used in filters can be used as a rewrite condition. Existing filter statements can be referenced using the <span class="Code" oldrole="parameter">filter()</span> function within the condition. For details on filters, see <MadCap:xref href="filters.htm#filters"></MadCap:xref>.</p>
<table cellspacing="0" class="TableStyle-NoteTable_Blue_DoNotEdit" oldrole="tip" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Blue_DoNotEdit.css');"><col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column1" style="width: 0.3in;"></col><col class="TableStyle-NoteTable_Blue_DoNotEdit-Column-Column2"></col><tbody><tr class="TableStyle-NoteTable_Blue_DoNotEdit-Body-Body1"><td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyB-Column1-Body1"><p><img src="../../../Resources/Images/Common/note.png"/></p></td><td class="TableStyle-NoteTable_Blue_DoNotEdit-BodyA-Column2-Body1"><span class="AllNoteStyles">TIP: </span><p oldrole="para">Using conditions in rewrite rules can simplify your &abbrev; configuration file, as you do not need to create separate log paths to modify certain messages.</p></td></tr></tbody></table>
<MadCap:snippetBlock src="procedure-conditional-rewrite.htm"></MadCap:snippetBlock>
<div class="Example">
<h6 name="example-conditional-rewrite" oldrole="example">Example: Using conditional rewriting</h6>
<p oldrole="para">The following example sets the HOST field of the message to <span class="Code" oldrole="userinput">myhost</span> only if the message was sent by the <span class="Code" oldrole="userinput">myapplication</span> program.</p>
<pre class="Code" oldrole="synopsis">rewrite r_rewrite_set{set("myhost", value("HOST") condition(program("myapplication")));};</pre>
<p oldrole="para">The following example is identical to the previous one, except that the condition references an existing filter template.</p>
<pre class="Code" oldrole="synopsis">filter f_rewritefilter {program("myapplication");};
rewrite r_rewrite_set{set("myhost", value("HOST") condition(filter(f_rewritefilter)));};</pre>
</div>
</body></html>
