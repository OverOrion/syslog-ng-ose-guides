<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body name="procedure-conditional-rewrite" oldrole="procedure">
        <h1 name="procedure-conditional-rewrite">How conditional rewriting works</h1>
        <MadCap:keyword term="condition()">
        </MadCap:keyword>
        <MadCap:keyword term="conditional rewrites">
        </MadCap:keyword>
        <MadCap:keyword term="rewrite if">
        </MadCap:keyword>
        <MadCap:keyword term="rewriting messages:['conditional rewrites']">
        </MadCap:keyword>
        <MadCap:keyword term="filtering rewrites">
        </MadCap:keyword>
        <h6 oldrole="formalpara" MadCap:conditions="CommonConditions_DoNotEdit.DoNotPublish">Purpose:</h6>
        <p oldrole="para">The following procedure summarizes how conditional rewrite rules (rewrite rules that have the <span class="Code" oldrole="parameter">condition()</span> parameter set) work. The following configuration snippet is used to illustrate the procedure:</p><pre class="Code" oldrole="synopsis">rewrite r_rewrite_set{set("myhost", value("HOST") condition(program("myapplication")));};
log {
    source(s1);
    rewrite(r_rewrite_set);
    destination(d1);};</pre>
        <h6 oldrole="formalpara" MadCap:conditions="CommonConditions_DoNotEdit.DoNotPublish">Steps:</h6>

        <ol oldrole="procedure">
            <li oldrole="step">
                <p oldrole="para">The log path receives a message from the source (<span class="Code" oldrole="userinput">s1</span>).</p>
            </li>
            <li oldrole="step">
                <p oldrole="para">The rewrite rule (<span class="Code" oldrole="userinput">r_rewrite_set</span>) evaluates the condition. If the message matches the condition (the PROGRAM field of the message is "myapplication"), <MadCap:variable name="General.abbrev"></MadCap:variable> rewrites the log message (sets the value of the HOST field to "myhost"), otherwise it is not modified.</p>
            </li>
            <li oldrole="step">
                <p oldrole="para">The next element of the log path processes the message (<span class="Code" oldrole="userinput">d1</span>).</p>
            </li>
        </ol>
        <div class="Example">
            <h6 name="example-conditional-rewrite" oldrole="example"><a name="example-conditional-rewrite"></a>Example: Using conditional rewriting</h6>
            <p oldrole="para">The following example sets the HOST field of the message to <span class="Code" oldrole="userinput">myhost</span> only if the message was sent by the <span class="Code" oldrole="userinput">myapplication</span> program.</p><pre class="Code" oldrole="synopsis">rewrite r_rewrite_set{set("myhost", value("HOST") condition(program("myapplication")));};</pre>
            <p oldrole="para">The following example is identical to the previous one, except that the condition references an existing filter template.</p><pre class="Code" oldrole="synopsis">filter f_rewritefilter {program("myapplication");};
rewrite r_rewrite_set{set("myhost", value("HOST") condition(filter(f_rewritefilter)));};</pre>
        </div>
    </body>
</html>