<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body name="destination-kafka-interaction" oldrole="section">
<h1 name="destination-kafka-interaction">How <MadCap:variable name="General.abbrev"></MadCap:variable> interacts with Apache Kafka</h1>
<p oldrole="para">When stopping the <MadCap:variable name="General.abbrev"></MadCap:variable> application, <MadCap:variable name="General.abbrev"></MadCap:variable> will not stop until all Java threads are finished, including the threads started by the Kafka Producer. There is no way (except for the <b oldrole="command">kill -9</b> command) to stop <MadCap:variable name="General.abbrev"></MadCap:variable> before the Kafka Producer stops. To change this behavior set the properties of the Kafka Producer in its properties file, and reference the file in the <span class="Code" oldrole="parameter">properties-file</span> option.</p>
<p oldrole="para">The <MadCap:variable name="General.abbrev"></MadCap:variable> <span class="Code" oldrole="parameter">kafka</span> destination tries to reconnect to the brokers in a tight loop. This can look as spinning, because of a lot of similar debug messages. To decrease the amount of such messages, set a bigger timeout using the following properties:</p>
<pre class="Code" oldrole="synopsis">retry.backoff.ms=1000
reconnect.backoff.ms=1000</pre>
<p oldrole="para">For details on using property files, see <MadCap:xref href="destination-kafka.htm#kafka-option-properties-file"></MadCap:xref>. For details on the properties that you can set in the property file, see the <a href="http://kafka.apache.org/documentation.html#newproducerconfigs">Apache Kafka documentation</a>.</p>
</body></html>
