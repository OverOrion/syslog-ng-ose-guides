<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <link href="../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
    </head>
    <body name="reference-destination-stackdriver" oldrole="section">
        <h1 name="reference-destination-stackdriver">stackdriver destination options</h1>
        <MadCap:keyword term="destination drivers:['stackdriver']">
        </MadCap:keyword>
        <p oldrole="para">The <span class="Code" oldrole="parameter">stackdriver</span> destination of <MadCap:variable name="General.abbrev"></MadCap:variable> can send log messages to the <a href="https://cloud.google.com/stackdriver/">Google Stackdriver cloud</a>. The <span class="Code" oldrole="parameter">stackdriver</span> destination has the following options. Available in <MadCap:variable name="General.abbrev"></MadCap:variable> version <MadCap:conditionaltext MadCap:conditions="General.pe">7.0.14</MadCap:conditionaltext> and later.</p>
        <table cellspacing="0" class="TableStyle-NoteTable_Yellow_DoNotEdit" oldrole="warning" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css');">
            <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column1" style="width: 0.3in;">
            </col>
            <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column2">
            </col>
            <tbody>
                <tr class="TableStyle-NoteTable_Yellow_DoNotEdit-Body-Body1">
                    <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyB-Column1-Body1">
                        <p>
                            <img src="../../../Resources/Images/Common/caution.png" />
                        </p>
                    </td>
                    <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyA-Column2-Body1"><span class="Yellow">Caution: </span>
                        <MadCap:snippetBlock src="../../shared/chunk/destination-stackdriver-underscore.htm">
                        </MadCap:snippetBlock>
                    </td>
                </tr>
            </tbody>
        </table>
        <div>
            <MadCap:keyword term="batch mode">
            </MadCap:keyword>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-batch-bytes.htm">
            </MadCap:snippetBlock>
            <p>For details on how this option influences batch mode, see <MadCap:xref href="destination-stackdriver.htm#stackdriver-batch-mode" class="HeadingOnPage"></MadCap:xref>.</p>
        </div>
        <div>
            <MadCap:keyword term="batch mode">
            </MadCap:keyword>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-batch-lines.htm">
            </MadCap:snippetBlock>
            <p>For details on how this option influences batch mode, see <MadCap:xref href="destination-stackdriver.htm#stackdriver-batch-mode" class="HeadingOnPage"></MadCap:xref>.</p>
        </div>
        <div>
            <MadCap:keyword term="batch mode">
            </MadCap:keyword>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-batch-timeout.htm">
            </MadCap:snippetBlock>
            <p>For details on how this option influences batch mode, see <MadCap:xref href="destination-stackdriver.htm#stackdriver-batch-mode" class="HeadingOnPage"></MadCap:xref>.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-diskbuffer.htm">
        </MadCap:snippetBlock>
        <div>
            <h6>gcp_auth_header()</h6>
            <MadCap:keyword term="gcp_auth_header()">
            </MadCap:keyword>
            <MadCap:keyword term="gcp-auth-header()">
            </MadCap:keyword>
            <MadCap:keyword term="credentials()">
            </MadCap:keyword>
            <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> This option stores the service key and other parameters needed for the <span class="Code" oldrole="parameter">stackdriver</span> destination to successfully connect to Google Stackdriver. It has the following options. The <span class="Code" oldrole="parameter">credentials()</span> option is a required options.</p>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i oldrole="emphasis" role="bold">credentials()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:
                        </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">path</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:
                        </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">N/A</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2">
                            <p><i oldrole="emphasis" role="bold">Description:</i> The path to the JSON file that contains the key for the service account. The service account must have at least the <span class="Code" oldrole="userinput">logging.write</span> role. For details, see <MadCap:xref href="procedure-configuring-stackdriver.htm"></MadCap:xref></p>
                            <MadCap:snippetBlock src="../../shared/chunk/destination-stackdriver-service-key.htm">
                            </MadCap:snippetBlock>
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <!-- It's not sure that it makes sense to change this option from the default value, so we don't publish it for now
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1" colspan="2"><i oldrole="emphasis" role="bold">scope()</i>
                        </td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:

                        </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Default:

                        </td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">https://www.googleapis.com/auth/cloud-platform</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1" colspan="2"><i oldrole="emphasis" role="bold">Description:</i> The <a href="https://cloud.google.com/logging/docs/access-control">access scope</a> that <MadCap:variable name="General.abbrev"></MadCap:variable> uses to access Google Stackdriver.</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table> -->
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-hook.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="stackdriver-options-json-payload" oldrole="simplesect"><a name="stackdriver-options-json-payload"></a>json-payload()</h6>
            <MadCap:keyword term="json-payload()">
            </MadCap:keyword>
            <MadCap:keyword term="json_payload()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Accepted values:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">template function</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">$(format-json --scope rfc5424 --exclude DATE --key ISODATE)</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> The payload of the log message that <MadCap:variable name="General.abbrev"></MadCap:variable> sends to Google Stackdriver. The payload must be a JSON-formatted list of name-value pairs. For details on selecting name-value pairs, see <MadCap:xref href="specifying-data-types.htm#options-value-pairs"><span style="color: #04aada;" class="mcFormatColor">value-pairs()</span></MadCap:xref>. By default, <MadCap:variable name="General.abbrev"></MadCap:variable> uses the <span class="Code">rfc5424</span> scope, which is the same as the one that the <span class="Code">syslog()</span> destination uses.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-log-fifo-size.htm">
        </MadCap:snippetBlock>
                <div>
            <h6 name="stackdriver-options-log-id" oldrole="simplesect"><a name="stackdriver-options-json-payload"></a>log_id()</h6>
            <MadCap:keyword term="log-id()">
            </MadCap:keyword>
            <MadCap:keyword term="log_id()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Accepted values:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">none</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> The name of the folder that stores the logs in Google Stackdriver. The value of the <span class="Code" oldrole="parameter">log_id()</span> option must be less than 512 characters long and can only include the following characters: upper and lower case alphanumeric characters, forward-slash, underscore, hyphen, and period.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-persist-name.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="stackdriver-options-resource" oldrole="simplesect"><a name="stackdriver-options-resource"></a>resource()</h6>
            <MadCap:keyword term="resource()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">string</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">None</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> Specifies the type of the monitored resource and its fields, as described in the <a href="https://cloud.google.com/monitoring/api/resources">Google Stackdriver documentation</a>. You can use strings, macros, and templates in the values of the fields.</p>
            <MadCap:snippetBlock src="../../shared/chunk/destination-stackdriver-supported-resource-types.htm">
            </MadCap:snippetBlock>
            <p><MadCap:variable name="General.vendor"></MadCap:variable> recommends using the <a href="https://cloud.google.com/monitoring/api/resources#tag_generic_node">generic_node</a> resource type. Each <MadCap:variable name="General.abbrev"></MadCap:variable> <span class="Code" oldrole="parameter">stackdriver</span> destination can use only one resource type. If you want to send logs using multiple resource types, you must configure multiple <span class="Code" oldrole="parameter">stackdriver</span> destinations.</p>
            <table cellspacing="0" class="TableStyle-NoteTable_Yellow_DoNotEdit" oldrole="warning" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css');">
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column2">
                </col>
                <tbody>
                    <tr class="TableStyle-NoteTable_Yellow_DoNotEdit-Body-Body1">
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyB-Column1-Body1">
                            <p>
                                <img src="../../../Resources/Images/Common/caution.png" />
                            </p>
                        </td>
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyA-Column2-Body1"><span class="Yellow">Caution: </span>
                            <p oldrole="para">Make sure that you set the resource type and its fields correctly. The value of the <span class="Code" oldrole="parameter">project_id()</span> field must be the Project ID of your Google Stackdriver project. The <MadCap:variable name="General.abbrev"></MadCap:variable> application cannot check the validity of this option.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <p>For example:</p>
            <pre>resource(
  generic_node(
    project_id("my-test-project")
    location("EU/Budapest")
    namespace("my cluster")
    node_id("$HOST")))</pre>
        </div>
        <div>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-retries.htm">
            </MadCap:snippetBlock>
            <p oldrole="para">The <MadCap:variable name="General.abbrev"></MadCap:variable> application handles HTTP error responses the following way.</p>
            <ul>
                <li>
                    <p>If the server returns the 401 response code because the token expired, <MadCap:variable name="General.abbrev"></MadCap:variable> automatically requests a new token and resends the message.</p>
                </li>
                <li>
                    <p>If the HTTP server returns 4xx codes, <MadCap:variable name="General.abbrev"></MadCap:variable> will drop the messages.</p>
                </li>
                <li>
                    <p>If the HTTP server returns 5xx codes <MadCap:variable name="General.abbrev"></MadCap:variable> will attempt to resend messages until the number of attempts reaches <span class="Code" oldrole="parameter">retries</span>.</p>
                </li>
            </ul>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-throttle.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 name="stackdriver-options-timeout" oldrole="simplesect"><a name="stackdriver-options-timeout"></a>timeout()</h6>
            <MadCap:keyword term="timeout()">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">number [seconds]</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                            <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">0</td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <p oldrole="para"><i oldrole="emphasis" role="bold">Description:</i> The value (in seconds) to wait for an operation to complete, and attempt to reconnect the server if exceeded. By default, the timeout value is <span class="Code" oldrole="userinput">0</span>, meaning that there is no timeout. Available in version <MadCap:conditionaltext MadCap:conditions="General.ose">3.11</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.pe">7.0.4</MadCap:conditionaltext> and later.</p>
        </div>
        <MadCap:snippetBlock src="../../shared/chunk/option-destination-http-use-system-cert-store.htm">
        </MadCap:snippetBlock>
        <div>
            <h6 oldrole="simplesect">workers()</h6>
            <MadCap:keyword term="workers()">
            </MadCap:keyword>
            <MadCap:keyword term="batch mode">
            </MadCap:keyword>
            <table cellspacing="0" class="TableStyle-RuledTableWithHeading_DoNotEdit" colsep="0" frame="topbot" rowsep="0" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/RuledTableWithHeading_DoNotEdit.css');">
                <tbody>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyE-Column1-Body1">Type:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyD-Column1-Body1">integer</td>
                    </tr>
                    <tr class="TableStyle-RuledTableWithHeading_DoNotEdit-Body-Body1">
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyB-Column1-Body1">Default:</td>
                        <td class="TableStyle-RuledTableWithHeading_DoNotEdit-BodyA-Column1-Body1">1
                        </td>
                    </tr>
                </tbody>
                <col class="TableStyle-RuledTableWithHeading_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
            </table>
            <MadCap:snippetBlock src="../../shared/chunk/option-destination-description-workers.htm">
            </MadCap:snippetBlock>
        </div>
    </body>
</html>
