<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <meta name="description" content="" />
    </head>
    <body name="configuring-destinations-mongodb">
        <h1 name="destination-mqtt-intro">mqtt() destination: sending messages from a local network to an MQTT broker </h1>
        <MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;mongodb()&lt;/span&gt;, ' driver']">
        </MadCap:keyword>
        <p>From version 3.33, you can use the <span class="Code" oldrole="parameter">mqtt()</span> destination to publish messages to MQTT brokers.</p>
        <p>The <span>mqtt()</span> destination builds on the <a href="https://www.hivemq.com/mqtt-protocol/">MQTT protocol</a>, and uses its "<a href="https://www.hivemq.com/blog/seven-best-mqtt-client-tools/">client</a>" and "<a href="https://www.hivemq.com/hivemq/mqtt-broker/">broker</a>" entities. </p>
        <div class="Note">
            <p class="Hyphenation"><span class="AllNoteStyles">NOTE:</span> The rest of this chapter and its sections build on your familiarity with the MQTT protocol, the concept of client and broker entities, and how these entities function within an MQTT system.</p>
        </div>
        <div>
            <h6>Declaration:</h6><pre>destination d_mqtt { 
  mqtt(
    topic("&lt;topic-name&gt;"), 
    address("tcp://localhost:&lt;port-number&gt;"),   
    fallback_topic("&lt;fallback-topic-name&gt;")
  ); 
}</pre>
        </div>
        <div class="Example">
            <h6 name="example-destination-mqtt"><a name="example-destination-mqtt"></a>Example: Using the mqtt() destination in your configuration</h6>
            <p>The following example illustrates a <span class="Code" oldrole="parameter">mqtt()</span> destination configured to fetch messages from the <span class="Code">localhost:4444</span> address, and send them to the broker running on <span class="Code">localhost:4445</span>, using the <span class="Code">mqtt test/test</span> topic.</p><pre>@version: 3.32
@include "scl.conf"

  source s_net { 
    network(port(4444)
  ); 
};

  destination d_mqtt { 
    mqtt(topic("test/test"), address("tcp://localhost:4445"), fallback_topic("test/test")
  ); 
};
				
log { 
  source(s_net); 
  destination( d_mqtt); 
};</pre>
        </div>
    </body>
</html>