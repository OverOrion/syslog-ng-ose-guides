<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
        <link href="../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css" rel="stylesheet" MadCap:stylesheetType="table" />
        <meta name="description" content="" />
    </head>
    <body name="syslog-ng_whatsnew" MadCap:conditions="General.archive">
        <p>Version 3.22 of <MadCap:variable name="General.product" /> includes the following main features.</p>
        <div>
            <h6>Dynamic flow-control</h6>
            <p>Starting with version <MadCap:conditionaltext MadCap:conditions="General.OSE">3.22</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.PE">7.0.16</MadCap:conditionaltext>, <MadCap:variable name="General.OSE"></MadCap:variable> uses the <span class="Code">log-iw-size()</span> option to allocate a static message window to every flow-controlled log path using the <span class="Code">network()</span> and <span class="Code">syslog()</span> drivers. In addition, you can configure a dynamic memory buffer that <MadCap:variable name="General.OSE"></MadCap:variable> can use to dynamically increase the message window of flow-controlled log paths that have higher traffic. This can be useful in low-memory environments, where only a small subset of the active clients sends messages at high rate.</p>
            <p>As a result of these changes the <span class="Code">log-fifo-size()</span> option only affects log paths that are not flow-controlled. It is expected that after configuring the dynamic message window, you can decrease the value of <span class="Code">log-fifo-size()</span>. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="concepts-flow-control"></a>.</p>
            <table cellspacing="0" class="TableStyle-NoteTable_Yellow_DoNotEdit" style="width: 100%;mc-table-style: url('../../../Resources/TableStyles/NoteTable_Yellow_DoNotEdit.css');">
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column1" style="width: 0.3in;">
                </col>
                <col class="TableStyle-NoteTable_Yellow_DoNotEdit-Column-Column2">
                </col>
                <tbody>
                    <tr class="TableStyle-NoteTable_Yellow_DoNotEdit-Body-Body1">
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyB-Column1-Body1">
                            <p>
                                <img src="../../../Resources/Images/Common/caution.png" />
                            </p>
                        </td>
                        <td class="TableStyle-NoteTable_Yellow_DoNotEdit-BodyA-Column2-Body1"><span class="Yellow">Caution: </span>
                            <p>Flow control and the <span class="Code">log-fifo-size()</span> option works differently starting with <MadCap:variable name="General.OSE"></MadCap:variable> <MadCap:conditionaltext MadCap:conditions="General.OSE">3.22</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="General.PE">7.0.16</MadCap:conditionaltext> to avoid dropping flow-controlled messages when <span class="Code">log-fifo-size()</span> is misconfigured. From now on, <span class="Code">log-fifo-size()</span> only affects log paths that are not flow-controlled. (Flow-controlled log paths have a file destination, or have the <span class="Code">flags(flow-control)</span> option set.)</p>
                            <p>The new behavior is automatically enabled when you update your the @version string in your configuration file. Consider lowering the value of <span class="Code">log-fifo-size()</span> option after updating the @version string. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="concepts-flow-control"></a>.</p>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div>
            <h6>SNMP destination</h6>
            <p>You can now send SNMP traps directly from <MadCap:variable name="General.OSE"></MadCap:variable> using the <span class="Code">snmp()</span> destination driver. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="destination-snmp"></a>.</p>
        </div>
        <div>
            <h6>Dynamic template function</h6>
            <p>A new template function called <span class="Code">template</span> can resolve static and dynamic templates in template functions. For example, the name of the template to be invoked can be extracted from the message, or from a name-value pair set using the <a targetdoc="syslog-ng-ose-guide-admin" targetptr="data-enrichment-add-contextual-data"><span class="Code">add-contextual-data()</span></a> feature. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="reference-template-functions"></a>.</p>
        </div>
        <div>
            <h6>Floating point calculations and numerical template functions</h6>
            <p>Numerical template functions can now handle floating-point numbers. For details, see the <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="reference-template-functions">ceil, floor, numerical operations, and round template functions</a>.</p>
        </div>
        <div>
            <h6>Enhancements</h6>
            <ul>
                <li>
                    <p>HTTP-based destinations can now accept multiple URLs in various formats.</p>
                </li>
                <li>
                    <p>The message rate of the loggen command can be changed while loggen is running. Send SIGUSR1 to double the message rate, or SIGUSR2 to halve it, for example: <span class="Code">kill -USR1 &lt;loggen-pid&gt;</span></p>
                </li>
                <li>
                    <p>The Check Point Log Exporter parser can now parse Check Point log messages in the Splunk format. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="parser-checkpoint"></a>.</p>
                </li>
                <li>
                    <p>New constants are available in the <span class="Code">fetch</span> method of the Python source. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="python-fetcher-source"></a>.</p>
                </li>
                <li>
                    <p>Global option can be defined in reusable blocks. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="config-blocks"></a>.</p>
                </li>
                <li>
                    <p>The <span class="Code">date-parser()</span> now supports microseconds (%f). For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="date-parser-options"></a>.</p>
                </li>
                <li>
                    <p>The value of <span class="Code">add-contextual-data()</span> selectors can be a template or a template function, not only a string. For details, see <a role="olink" targetdoc="syslog-ng-ose-guide-admin" targetptr="data-enrichment-add-contextual-data"></a>.</p>
                </li>
            </ul>
        </div>
    </body>
</html>