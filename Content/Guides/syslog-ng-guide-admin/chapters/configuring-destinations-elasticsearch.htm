<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd"><body name="configuring-destinations-elasticsearch" oldrole="section">
<h1 name="configuring-destinations-elasticsearch"><span class="Code" oldrole="parameter">elasticsearch</span>: Sending messages directly to Elasticsearch version 1.x</h1>
<MadCap:keyword term="destination drivers:[&lt;span class=&quot;Code&quot; oldrole=&quot;parameter&quot;&gt;java()&lt;/span&gt;, ' driver']"></MadCap:keyword>
<MadCap:keyword term='destination drivers:[&lt;span class="Code" oldrole="parameter"&gt;elasticsearch&lt;/span&gt;]'></MadCap:keyword>
<p oldrole="para">Starting with version <MadCap:conditionaltext MadCap:conditions="pe">5.6</MadCap:conditionaltext><MadCap:conditionaltext MadCap:conditions="ose">3.7</MadCap:conditionaltext> of &abbrev; can directly send log messages to <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a>, allowing you to search and analyze your data in real time, and visualize it with <a href="https://www.elastic.co/products/kibana">Kibana</a>.</p>
<MadCap:snippetBlock src="../../shared/wnt/note-server-mode-only.htm"></MadCap:snippetBlock>
<p oldrole="para">Note the following limitations when using the &abbrev; <span class="Code" oldrole="parameter">elasticsearch</span> destination:</p>
<ul oldrole="itemizedlist">
<MadCap:snippetBlock src="../../shared/chunk/listitem-java-supported-platforms.htm"></MadCap:snippetBlock>
<li oldrole="listitem">
<p oldrole="para">Since &abbrev; uses the official Java Elasticsearch libraries, the <span class="Code" oldrole="parameter">elasticsearch</span> destination has significant memory usage.</p>
</li>
<li condition="ose" oldrole="listitem">
<p oldrole="para">Sending messages over the HTTP REST API is supported only using the <span class="Code" oldrole="parameter">elastic2()</span> destination. Note that in HTTP mode, the <span class="Code" oldrole="parameter">elasticsearch2</span> destination can send log messages to Elasticsearch version 1.x and newer. For details, see <MadCap:xref href="configuring-destinations-elasticsearch2.htm#configuring-destinations-elasticsearch2"></MadCap:xref>.</p>
</li>
<MadCap:snippetBlock src="../../shared/chunk/listitem-java-internal-messages.htm"></MadCap:snippetBlock>
</ul>
<h6 oldrole="formalpara">Declaration:</h6>

<pre class="Code" oldrole="synopsis">@module mod-java
@include "scl.conf"

elasticsearch(
    index("syslog-ng_${YEAR}.${MONTH}.${DAY}")
    type("test")
    cluster("syslog-ng")
);</pre>
<div class="Example">
<h6 name="example-destination-elasticsearch" oldrole="example">Example: Sending log data to Elasticsearch version 1.x</h6>
<p oldrole="para">The following example defines an <span class="Code" oldrole="parameter">elasticsearch</span> destination that sends messages in transport mode to an Elasticsearch server version 1.x running on the localhost, using only the required parameters.</p>
<pre class="Code" oldrole="synopsis">@module mod-java
@include "scl.conf"

destination d_elastic {
  elasticsearch(
    index("syslog-ng_${YEAR}.${MONTH}.${DAY}")
    type("test")
  );
};
</pre>
<p oldrole="para">The following example sends 10000 messages in a batch, in transport mode, and includes a custom unique ID for each message.</p>
<pre class="Code" oldrole="synopsis">@module mod-java
@include "scl.conf"

options {
  threaded(yes);
  use-uniqid(yes);
};

source s_syslog {
  syslog();
};

destination d_elastic {
  elasticsearch(
    index("syslog-ng_${YEAR}.${MONTH}.${DAY}")
    type("test")
    cluster("syslog-ng")
    client-mode("transport")
    custom-id("${UNIQID}")
    flush-limit("10000")
  );
};

log {
  source(s_syslog);
  destination(d_elastic);
  flags(flow-control);
};</pre>
</div>
<ul oldrole="itemizedlist">
<li oldrole="listitem">
<p oldrole="para">To install the software required for the <span class="Code" oldrole="parameter">elasticsearch</span> destination, see <MadCap:xref href="destination-elasticsearch-prerequisites.htm#destination-elasticsearch-prerequisites"></MadCap:xref>.</p>
</li>
<li oldrole="listitem">
<p oldrole="para">For details on how the <span class="Code" oldrole="parameter">elasticsearch</span> destination works, see <MadCap:xref href="destination-elasticsearch.htm#destination-elasticsearch-interaction"></MadCap:xref>.</p>
</li>
<li oldrole="listitem">
<p oldrole="para">For the list of options, see <MadCap:xref href="destination-elasticsearch.htm#reference-destination-elasticsearch"></MadCap:xref>.</p>
</li>
</ul>
<p condition="ose" oldrole="para">The <span class="Code" oldrole="parameter">elasticsearch()</span> driver is actually a reusable configuration snippet configured to receive log messages using the Java language-binding of &abbrev;. For details on using or writing such configuration snippets, see <MadCap:xref href="config-blocks.htm#config-blocks"></MadCap:xref>. You can find the source of the elasticsearch configuration snippet on <a href="https://github.com/balabit/syslog-ng/blob/master/scl/elasticsearch/plugin.conf">GitHub</a>. For details on extending &abbrev; in Java, see the <a href="https://syslog-ng.gitbooks.io/getting-started/content/chapters/chapter_5/section_2.html">Getting started with syslog-ng development</a> guide.</p>
<MadCap:snippetBlock src="destination-elasticsearch-prerequisites.htm"></MadCap:snippetBlock>
</body></html>
