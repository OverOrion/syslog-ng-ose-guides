<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <body name="wec-configure-syslog-ng" oldrole="procedure">
        <h1 name="wec-configure-syslog-ng"><a name="wec-configure-syslog-ng"></a>Configure <MadCap:variable name="General.abbrev"></MadCap:variable></h1>
        <h6 oldrole="formalpara">Prerequisites:</h6>
        <p><MadCap:variable name="General.product"></MadCap:variable> version 7.0.6 or newer.</p>
        <div><h6 oldrole="formalpara" MadCap:conditions="CommonConditions_DoNotEdit.DoNotPublish">Purpose:</h6>
        <p>To enable <MadCap:variable name="General.abbrev"></MadCap:variable> to read and accept Windows events, you need to configure a source called <span class="Code" oldrole="parameter">windowsevent()</span>.</p></div>
        <div><h6 oldrole="formalpara" MadCap:conditions="CommonConditions_DoNotEdit.DoNotPublish">Steps:</h6>
        <p class="Procedure">To configure <MadCap:variable name="General.abbrev"></MadCap:variable></p>

        <ol oldrole="procedure">
            <li oldrole="step">
                <p>Ensure that the default <span class="Code" oldrole="userinput">5986</span> TCP port is accessible from <MadCap:variable name="General.wecabbrev"></MadCap:variable>, as it is the <MadCap:variable name="General.wec"></MadCap:variable> that will initiate the event forwarding subscription toward the <MadCap:variable name="General.abbrev"></MadCap:variable> server.</p>
            </li>
            <li oldrole="step">
                <p>Configure the <span class="Code" oldrole="parameter">windowsevent()</span> source.</p><pre class="Code" oldrole="synopsis">source s_wec {
    windowsevent();
};</pre>
                <p>The <span class="Code" oldrole="parameter">windowsevent()</span> source takes the following options:</p>
                <ul oldrole="itemizedlist">
                    <li oldrole="listitem">
                        <p><span class="Code" oldrole="parameter">unix-domain-socket()</span>: The path to the Unix domain socket to read messages from.</p>
                        <p>The default value is <span class="Code" oldrole="userinput">/opt/syslog-ng/var/run/wec.sock</span>.</p>
                    </li>
                    <li oldrole="listitem">
                        <p><span class="Code" oldrole="parameter">prefix()</span>: The prefix that you wish to append to the key-value pairs.</p>
                        <p>The default value is <span class="Code" oldrole="userinput">".windowsevent."</span>.</p>
                        <p>If you want to send Windows event logs to SDATA, then set <span class="Code" oldrole="parameter">prefix(".SDATA.")</span>. This can be useful, for example, when you forward Windows event logs to a <MadCap:variable name="General.ssb"></MadCap:variable>.</p>
                    </li>
                </ul>
                <p>For more information on the <span class="Code" oldrole="parameter">windowsevent()</span> source, see <a targetdoc="syslog-ng-pe-guide-admin" targetptr="source-windowsevent" oldrole="olink"></a>.</p>
            </li>
            <li oldrole="step">
                <p>Define a complete log path in <span class="Code" oldrole="filename">syslog-ng.conf</span> to enable the <span class="Code" oldrole="parameter">windowsevent()</span> source, <span class="Code" oldrole="userinput">s_wec</span>. Otherwise, the <MadCap:variable name="General.wecabbrev"></MadCap:variable> process will not run (connection refused).</p>
                <p>For example:</p><pre class="Code" oldrole="synopsis">source s_wec {
    windowsevent();
};

log {
    source(s_wec);
    destination {
        file("/var/log/example.log"
            template("$(format-json --scope dot-nv-pairs)\n")
        );
    };
};</pre>
            </li>
        </ol></div>
    </body>
</html>