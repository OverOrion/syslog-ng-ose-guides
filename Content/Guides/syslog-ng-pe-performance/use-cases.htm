<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <body oldrole="section">
        <h1 name="syslog-ng-performance-usecases">Use cases for performance improvement</h1>
        <h6 oldrole="formalpara">Improving performance with lots of connections:</h6>
        <p>If there are several thousand active connections simultaneously, it is advised to place relay syslog-ng-s on another computer in front of the syslog-ng server. Switching between active connections is time-consuming, while the amount of incoming messages is usually not significant. This problem is solved by using relays, since they are collecting the logs. The syslog-ng solution can handle lots of log messages sent from a few connections easily.</p>
        <p>In the case of non-encrypted connections, it is best to handle no more than 5,000 connections per <MadCap:variable name="General.abbrev"></MadCap:variable> application. While in the case of secure (TLS-encrypted) connections, a single <MadCap:variable name="General.abbrev"></MadCap:variable> application should handle no more than 1,000 connections.</p>
        <p>When your environment has more connections than the numbers advised above, then our recommendation is that those should be handled by more than one <MadCap:variable name="General.abbrev"></MadCap:variable> application. For example, in the case of secure connections, when there are 2,000 connections, employ two relays, each of them running one <MadCap:variable name="General.abbrev"></MadCap:variable> application and handling 1,000 connections.</p>
        <p>Note, however, that the exact capacity of <MadCap:variable name="General.abbrev"></MadCap:variable> depends on your particular circumstances (such as hardware performance, number and complexity of log messages, and so on), and needs to be measured on an individual basis. The recommendations indicated here are valid in an environment that handles a maximum of 200,000 EPS.</p>
        <h6 oldrole="formalpara">Filtering messages:</h6>
        <p>It is advised to use the simplest filters when filtering incoming messages. If a message can be filtered with several types of filters, check the measured data. For example, if a message is filtered with a <span class="Code" oldrole="parameter">regexp</span>, the performance of syslog-ng can drop down to 85% of the original performance level. Whereas if the <span class="Code" oldrole="parameter">tag</span> or <span class="Code" oldrole="parameter">facility</span> filters are used, the decrease in performance is between 1-5%.</p>
        <p>When using multiple filters one after the other, or connecting filters with the logical AND/OR operators, the order of filters has a significant impact on performance. We recommend to put those filters in front that are the most likely to match the incoming log messages (if known).</p>
        <h6 oldrole="formalpara">Identifying bottlenecks:</h6>
        <p>It is advised to first identify the bottlenecks if the performance of syslog-ng seems to be too low. For example, if syslog-ng is writing on slow disks at the destination side, upgrading the source-side device will not help increasing the performance.</p>
    </body>
</html>