<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
[  <!ENTITY % entities SYSTEM "../../common/syslog-ng-entities.ent">
  %entities;]> 
<chapter xml:id="chapter-ibm-configuration" xmlns="http://docbook.org/ns/docbook" version="5.0">
	<title>Configuring &agenti;</title>
	<para>Configuring the &agentabbrev; applications involves configuring the global options for collecting and sending syslog messages, and configuring the communications client application to talk to the syslog server. Use the following options to configure global options and the communications client.</para>
	
	<section>
		<title>Displaying the main menu SYMAIN</title>
		<para>After installing the Alliance LogAgent for System i product and entering a license code, you can configure the agent applications. You can display the main menu by adding the <command>ALLSYL100</command> library to your library list and displaying the main menu <guimenu>SYMAIN</guimenu>:</para>
		<synopsis>Addlible allsyl100
		Go symain</synopsis>
		<para>The following menu is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_1.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_1.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Select an option to begin work.</para>
	</section>
	
	<section>
		<title>Configuring &agenti;</title>
		<para>Select the option for <guimenuitem>Configuration</guimenuitem>, then select the option to <guimenuitem>Configure &agentabbrev;</guimenuitem>. The following panel is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_2.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_2.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Enable diagnostic logging</guimenuitem>
				</para>
				<para>Enter 1 for Yes to enable diagnostic logging. When diagnostic logging is enabled the job descriptions are set for maximum job logs. Enter 2 for No to disable application logging.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Enable QAUDJRN messages</guimenuitem>
				</para>
				<para>Enter 1 for Yes to enable sending QAUDJRN messages to a syslog server. When enabled the system security audit journal reader job will be started in the Alliance subsystem ALLSYL100. Enter 2 for No to not send audit journal entries to the syslog server.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Interface version</guimenuitem>
				</para>
				<para>Enter 1 for the older first version of Alliance LogAgent interface. Enter 2 to use the Common Event Format (CEF) for the interface. Enter 3 for the advanced version of the interface which provides messages in RFC3164 format. Option 3 is recommended.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Transmit</guimenuitem>
				</para>
				<para>Enter 1 for Yes to transmit the log events to a log collection server or SIM product. Enter 2 for No to not transmit logs.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Data queue control</guimenuitem>
				</para>
				<para>Enter 1 for Yes to use data queue control. Enter 2 for No to not use data queue control. Option 1 for data queue control is recommended if you are transmitting log entries to a log collection server.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Enable QSYSOPR messages</guimenuitem>
				</para>
				<para>Enter 1 for Yes to enable sending QSYSOPR messages to a syslog server. Enter 2 for No to not send QSYSOPR messages to the syslog server.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Message queue name</guimenuitem>
				</para>
				<para>If you select the option to send QSYSOPR messages to a syslog server enter the name of the message queue. The default is QSYSOPR.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Enable QHST messages</guimenuitem>
				</para>
				<para>Enter 1 to enable collection of QHST messages to the system security audit journal QAUDJRN, Enter 2 to not collect QHST messages to the security audit journal. You must restart the ALLSYL100 subsystem to start collecting messages. When enabled the job QHST will start as a subsystem job.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>QAUDJRN entry type</guimenuitem>
				</para>
				<para>QHST messages are written to the QAUDJRN security journal. Enter the user defined entry type in this field. This is a numeric value from 00 to 99.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Format</guimenuitem>
				</para>
				<para>Enter option 1 to create log messages in the Syslog format (RFC 3164). Enter option 2 to create log messages in Common Event Format (CEF). Enter option 3 for Advanced RFC 3164 format. Option 3 is the recommended option.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Auto-start syslog-ng</guimenuitem>
				</para>
				<para>Enter 1 for Yes to automatically start the syslog-ng Premium Edition application in the Alliance subsystem environment. Enter 2 for No to not start the syslog-ng application.</para>
				<note>
					<para>You just first install the syslog-ng application from the Alliance Configuration menu, and you must configure it to collect logs.</para>
				</note>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Capture to log file</guimenuitem>
				</para>
				<para>Enter 1 for Yes to capture log events to a physical file. Enter 2 for No to not capture to a physical file. Option 2 is the default value.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Log file, library, member</guimenuitem>
				</para>
				<para>If you selected the option to log to a physical file, enter the file name, library name, and member name in this field.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>Configuring TCP client communications</title>
		<para>In order to send syslog entries to a syslog server you must configure the Alliance TCP client communications. From the <guimenuitem>Configuration</guimenuitem> menu take the option to <guimenuitem>Work With TCP Clients</guimenuitem>. The following panel is displayed.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_3.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_3.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Three sample configurations are displayed. The first sample <guimenuitem>SYSLOG</guimenuitem> uses standard TCP sockets to send syslog records to a Syslog-ng server. The second sample <guimenuitem>SYSLOGD</guimenuitem> sends log records to a Syslogd server using standard UDP communications. The third sample uses SSL/TLS TCP sockets to send syslog records to a Syslog-ng server using secure SSL communications.</para>
		<para>Use option 2 to change a configuration. Use option 3 to copy the configuration to a new definition. Use option 4 to delete a configuration. Use option 6 to print the configuration details.</para>
		<para>When you select option 2 to change the TCP client configuration the following panel is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_4.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_4.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Client name</guimenuitem>
				</para>
				<para>The name of this configuration.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Description</guimenuitem>
				</para>
				<para>Enter a description for this configuration.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Status</guimenuitem>
				</para>
				<para>Enter 1 for Active or 2 for Inactive. When the status is inactive the TCP client application will not be enabled.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Auto start client</guimenuitem>
				</para>
				<para>Enter 1 for Yes to automatically start the TCP client communications when the ALLSYL100 subsystem starts. Enter 2 for No to not automatically start the TCP client. Normally you will want to automatically start the TCP client application when the subsystem starts.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Remote host name</guimenuitem>
				</para>
				<para>Enter the DNS name for the syslog server. You can use the next field for the IP address if you do not have a DNS name for the server</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Or, IP address</guimenuitem>
				</para>
				<para>Enter the IP address of the syslog server if you do not have a DNS name.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Remote port number</guimenuitem>
				</para>
				<para>Enter the port number for the syslog server. Consult with your network administrator for the port number. This will be the port number for the source syslog TCP service.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Application logging</guimenuitem>
				</para>
				<para>Enter 1 for Yes to enable application logging. Enter 2 for No to not enable application logging. When this option is enabled detailed log records are written to the file ALLOGA. These log entries are not sent to the syslog server.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>SSL Application ID</guimenuitem>
				</para>
				<para>If this client application will use secure SSL/TLS communications enter an Application ID. You can use the IBM Digital Certificate Manage to create certificates and associated Application Ids.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>SSL certification passthrough</guimenuitem>
				</para>
				<para>Enter 1 for Yes to enable certificate passthrough. Enter 2 for No to not allow certificate passthrough. Enabling certificate passthrough will disable certificate validity checking, but will not allow un-secure connections.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>Work with security types</title>
		<para>Use this option to define user-created <command>QAUDJRN</command> journal entries. When a user application sends an entry to the security journal <command>QAUDJRN</command> a user-defined journal entry type is used. This is a two-character value and is different than the journal entry types that are created by i5/OS. In order to report these events you need to define them with this option and provide text and severity values. You must be <command>QSECOFR</command> to access this option.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_5.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_5.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Description</guimenuitem>
				</para>
				<para>Enter a description for this journal entry type</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Type</guimenuitem>
				</para>
				<para>The type indicates whether the event is a system provided event or a user defined event. This is an output field only.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Security text</guimenuitem>
				</para>
				<para>Enter the text to be used with the log message. This text should be a brief description of the event type.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Syslog severity</guimenuitem>
				</para>
				<para>Enter a value for the severity of this event type. The lower the value higher the severity level of the message.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Syslog facility</guimenuitem>
				</para>
				<para>Enter a facility ID for this event type. See the documentation in RFC 3164 for information on facility Ids. Since the priority of an event is the result of adding the severity by the facility, the lower the facility number the higher the severity of the message.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>CEF severity</guimenuitem>
				</para>
				<para>If you are reporting log events in the Common Event Format enter the CEF severity level. The higher the severity number the more severe the event.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>CEF signature</guimenuitem>
				</para>
				<para>Enter a signature number for this event type. Alliance uses signature values from 1000 to 1999 so you should avoid signature values in this range.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Send to log server</guimenuitem>
				</para>
				<para>Enter 1 for Yes to send this type of event to a log server. Enter 2 for No to suppress sending this event type to the log server. The default is Yes.</para>
			</listitem>
		</itemizedlist>	
	</section>
	
	<section>
		<title>Edit syslog-ng configuration</title>
		<para>Use this option to start the Edit File (<command>EDTF</command>) command to edit the syslog-ng.conf configuration file in the IFS directory. You can add new sources, destinations, filters and other configuration definitions to the file. Please consult the syslog-ng Administration guide for information on how to configure syslog-ng options.</para>
	</section>
	
	<section>
		<title>Work with user audit</title>
		<para>Use this option to view user profile security and audit settings, and to make changes to use audit options. This option will build a list of user profiles, resolve the group profile and supplemental group profile authorities, and recommend changes to user auditing settings. All users with a high level of security and object privileges should have user auditing enabled. &agentabbrev; will recommend that users with security administration and all object authorities have the maximum level of user auditing enabled. Users with programmer or system operator privileges will be recommended for a medium amount of user auditing.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_6.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_6.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Option</guimenuitem>
				</para>
				<para>Use this field to view, print, or change the audit level for a user profile.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>User</guimenuitem>
				</para>
				<para>The user profile name.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Description</guimenuitem>
				</para>
				<para>The description of the user from the user profile. Only the first 40 bytes of the description are displayed.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Authority level</guimenuitem>
				</para>
				<para>The authority level assigned by &agentabbrev; for this user. Any user with security officer, security administrator, system configuration, service, or all object authority will be classified as having a high level of authority. Programmers, system operators, and any user with job control authority will be classified as having a medium level of authority. All other uses will be classified as having a low level of authority.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Group authority</guimenuitem>
				</para>
				<para>The value <parameter>Group</parameter> indicates that some of this user's authority is received from a Group Profile on their user profile. The value <parameter>Supp</parameter> indicates that some of this user's authority was inherited from a profile in the supplemental group for this user. The value of <parameter>Both</parameter> indicates that some of this user's authority was inherited from both the group profile and profiles in the supplemental group.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Suggested change</guimenuitem>
				</para>
				<para>&agentabbrev; will suggest changes to user auditing if auditing is not already enabled. The value <parameter>*ALL</parameter> will be assigned to users with a high level of authority. The value of <parameter>*CHANGE</parameter> will be assigned to users with a medium level of authority. You can use options 13, 14, and 15 to change a user's authority to the value you think appropriate.</para>
			</listitem>
		</itemizedlist>
		<para>When you use option 5 to view a user the following panel is displayed.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_7.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_7.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Description</guimenuitem>
				</para>
				<para>This is the description from the user profile.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Security officer, security administrator, system operator, programmer, user</guimenuitem>
				</para>
				<para>These values indicate the class of the user profile. </para>
				<note>
					<para>The values may be inherited from a group profile or a profile in the supplemental group for this user.</para>
				</note>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>*ALLOBJ, *AUDIT, *IOSYSCFG, *JOBCTL, *SECADM, *SERVICE, *SPLCTL</guimenuitem>
				</para>
				<para>These values indicate the special authorities of the user. </para>
				<note>
					<para>The values may be inherited from a group profile or a profile in the supplemental group for this user.</para>
				</note>
			</listitem>
		</itemizedlist>
		<para>This is the second panel when displaying user information.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_8.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_8.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Adopted group authority</guimenuitem>
				</para>
				<para>This value is 1 if some of this user‟s authority is adopted from the group profile.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Adopted supplemental authority</guimenuitem>
				</para>
				<para>This value is 1 if some of this user‟s authority is adopted from a supplemental group profile.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>User class</guimenuitem>
				</para>
				<para>This value indicates the class of this user. This value is not affected by the group profile or profiles in a supplemental group.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Group profile</guimenuitem>
				</para>
				<para>The group profile for this user.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Supplemental group</guimenuitem>
				</para>
				<para>The user profiles in the supplemental group for this user.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Special authorities</guimenuitem>
				</para>
				<para>A list of special authorities for this user.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Object audit</guimenuitem>
				</para>
				<para>The current setting for user auditing for this user.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>Work with QSYSOPR severities</title>
		<para>Use this option to associate the message severities in the QSYSOPR message queue with syslog severity values. Alliance provides a default set of mappings between the severity of a message in QSYSOPR to the severity of the event reported to the syslog server. You can use this option to change these default mappings.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_9.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_9.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Option</guimenuitem>
				</para>
				<para>Enter 2 to change, 4 to delete, or 6 to print the severity mapping. It is recommended that you do not delete entries in this table.</para>
			</listitem>
		</itemizedlist>
		<para>Use this panel to add or change a mapping between QSYSOPR message severity to syslog facility and severity.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_10.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_10.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Description</guimenuitem>
				</para>
				<para>Enter a description for this mapping.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Syslog facility</guimenuitem>
				</para>
				<para>Enter a syslog facility value for this mapping. Refer to the open standard document RFC3164 for a definition of facility values.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Syslog severity</guimenuitem>
				</para>
				<para>Enter a value for the severity of this message. Refer to the open standard document RFC3164 for a definition of value severities.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>Change QAUDJRN Starting Point</title>
		<para>Use this option to define the starting point for the QAUDJRN extraction and reporting process. After installation &agentabbrev; will start with the first entry in the first QAUDJRN journal receiver. You may wish to skip some of the older events. You can do this by specifying a starting journal sequence number and journal receiver.</para>
		<para>To determine the name of the QAUDJRN journal receiver, use the Work With Journal Attributes (WRKJRNA) command for the journal QAUDJRN. This command will show you the name of the currently attached journal receiver.</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_11.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_11.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Journal sequence number</guimenuitem>
				</para>
				<para>Enter the starting sequence number. This is a 20 digit sequence number. You set this value to 1 to start at the beginning of a journal receiver. &agentabbrev; will detect that the starting sequence number of a specific journal is larger and will start at the actual first entry in the journal receiver. You can use the Display Journal Receiver Attribute (DSPJRNRCVA) command to view the first sequence number in the journal.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Journal receiver and library</guimenuitem>
				</para>
				<para>Enter the starting journal receiver and library. If you leave this field blank &agentabbrev; will use the first available journal receiver. If you specify a journal receiver name,	&agentabbrev; will start with this journal receiver.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>From date</guimenuitem>
				</para>
				<para>You can enter a starting date for the journal entries. This field is optional. Enter the date in mm/dd/yyyy format. For example: 2/5/2010.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>From time</guimenuitem>
				</para>
				<para>You can enter a starting time for the journal entries. This field is optional, but you must enter a date if you wish to specify a starting time. Enter the time in hh:mm:ss format. For example: 12:00:00.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>Starting the Alliance subsystem</title>
		<para>After configuring the global options and a TCP communications client, you must start the Alliance subsystem <command>ALLSYL100</command> to start collecting logs. On the configuration menu take the option to Start Syslog Subsystem. The following panel is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_12.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_12.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Press <keycap>Enter</keycap> to start the subsystem. Depending on the configuration options you have selected, the following jobs will appear in the subsystem:</para>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>OPER_MESG</guimenuitem>
				</para>
				<para>Extracts messages from QSYSOPR and sends to the internal Syslog.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>QAUDJRN</guimenuitem>
				</para>
				<para>Extracts audit journal entries and sends to the internal Syslog queue.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>SYSLOG (2 instances)</guimenuitem>
				</para>
				<para>Receives Syslog messages from the Syslog queue and uses TCP or SSL/TLS TCP to send to a local or remote instance of Syslog-ng server.</para>
			</listitem>
		</itemizedlist>
		<para>You can use options on the <guimenu>Configuration</guimenu> menu to view active jobs in the Alliance ALLSYL100 subsystem, and to end the subsystem. You can also end the subsystem ALLSYL100 manually using the End Subsystem (<command>ENDSBS</command>) command with the <command>*IMMED</command> option.</para>
		<note>
			<para>The first time you start the Alliance subsystem the audit journal and operator message queue processes will begin collecting information starting from the earliest message. If there is a substantial amount of history in the journal or message queue it may take time for these messages to be sent to the Syslog-ng server.</para>
		</note>
		<section>
			<title>Automating the start of the Alliance subsystem ALLSYL100</title>
			<para>Once you have the configuration the way you want you can automate the start of the ALLSYL100 subsystem by modifying the IPL start up program. The name of the IPL start up program is stored in system value <parameter>QSTRUPPGM</parameter>. The program is usually <command>QSTRUP</command> in library <command>QGPL</command>. You can modify this program to add the following statements to start the ALLSYL100 subsystem:</para>
			<synopsis>QSYS/STRSBS SBSD(ALLSYL100/ALLSYL100)
MONMSG MSGID(CPF0000)</synopsis>
			<para>You should place these statements after any commands that start the TCP/IP network services.</para>
			<para>If you do not have the source for the <command>QSTRUP</command> program you can retrieve the source using the Retrieve CL Source (<command>RTVCLSRC</command>) command.</para>
		</section>
		
	</section>
	
	<section>
		<title>Application maintenance</title>
		<para>The application maintenance option can be used to purge information from the internal diagnostic logs, historical information, and to re-organize any physical files used by the Alliance application. From the main menu take the option for Application Maintenance, then option 1 to run maintenance. The following panel is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_13.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_13.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<itemizedlist>
			<listitem>
				<para>
					<guimenuitem>Retain history after date</guimenuitem>
				</para>
				<para>Enter the date in YYYYMMDD format to indicate the retention date. Log and historical information more recent than this date will be retained. All physical files will be re-organized. Note that you should run this option when the Alliance subsystem ALLSYL100 is not active.</para>
			</listitem>
			<listitem>
				<para>
					<guimenuitem>Manually clearing Alliance log information</guimenuitem>
				</para>
				<para>You can manually clear Alliance diagnostic log information with the following command:</para>
				<synopsis>clrpfm file(allsyl100/alloga)</synopsis>
				<para>This command only clears the internal Alliance logs and does not delete any Syslog information.</para>
			</listitem>
		</itemizedlist>
	</section>
	
	<section>
		<title>View application logs</title>
		<para>The View Application Logs option can be used to view internal Alliance application logs such as the TCP or SSL/TSL TCP application log. From the main menu take the option for Inquiry, then option 1 to view the log. The following panel is displayed:</para>
		<figure>
			<title/>
			<mediaobject>
				<imageobject role="html">
					<imagedata format="PNG" align="center"
						fileref="ibm_14.png"/>
				</imageobject>
				<imageobject role="fo">
					<imagedata format="PNG" contentwidth="&screenshotsize;"
						fileref="&imgroot;/ibm_14.png"/>
				</imageobject>
			</mediaobject>
		</figure>
		<para>Use option 5 to view the log or option 6 to print the log. For large logs it is recommended that you use option 6 to print the log and then use the Work With Spooled Files (WRKSPLF) command to view the report.</para>
		<note>
			<para>The application logs only contain internal Alliance diagnostic information and do not contain Syslog information that has been collected.</para>
		</note>
	</section>
</chapter>
