<!DOCTYPE chapter
[
<!ENTITY % entities SYSTEM "../../shared/syslog-ng-entities.ent">
  %entities;]>
<section xml:id="windows-configure-domain" xmlns="http://docbook.org/ns/docbook">
    <title>Configuring the &agentabbrev;s of a domain</title>
    <para>This section describes how to configure the &agent; application in domain mode.</para>
    <itemizedlist>
        <listitem>
            <para>For details on how to configure the &agentabbrev;s of the domain hosts, see <xref linkend="windows-configure-domain-hosts"/>.</para>
        </listitem>
        <listitem>
            <para>For details on how to configure the &agentabbrev;s of the domain controllers, see <xref linkend="windows-configure-domain-controllers"/>.</para>
        </listitem>
        <listitem>
            <para>For details on the relationship of different group-policy levels, see <xref linkend="windows-inheritance"/>.</para>
        </listitem>
    </itemizedlist>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="windows-configure-domain-hosts.xml"/>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="windows-configure-domain-controllers.xml"/>
    <section xml:id="windows-inheritance">
        <title>Domain versus local settings</title>
        <indexterm>
            <primary>inheriting settings on Windows</primary>
        </indexterm>
        <indexterm>
            <primary>&agentabbrev;</primary>
            <secondary>inheriting settings</secondary>
        </indexterm>
        <para>The &agentabbrev; follows the standard policy-inheritance methods of Windows:</para>
        <para>GPOs (Group Policy Objects) from parent containers are inherited by default. When multiple GPOs apply to these computers, the settings in the GPOs are aggregated. The final value of a given policy setting is set only by the highest precedent GPO that contains the setting. (However, the final value for a few settings will actually be the combination of values across GPOs.) In this processing order, sites are applied first, but have the least precedence. OUs (Organization Units) are processed last, but have the highest precedence.</para>
        <para>When multiple group policy objects are assigned, the group policies are applied in the following order:</para>
        <orderedlist>
            <listitem>
                <para>The local group policy object is applied.</para>
            </listitem>
            <listitem>
                <para>The group policy objects linked to sites are applied. If multiple GPOs exist for a site, they are applied in the order specified by the administrator.</para>
            </listitem>
            <listitem>
                <para>GPOs linked to the domains are applied in the specified order.</para>
            </listitem>
            <listitem>
                <para>GPOs linked to OUs are applied. The OU group policy objects are set from the largest to the smallest organizational unit; that is, first the parent OU and then the child OU. By default, a policy applied later overwrites a policy that was applied earlier. Hence, the settings in a child OU can override the settings in the parent OU.</para>
            </listitem>
            <listitem>
                <para>If any group policy is not configured, the &agentabbrev; checks its local policy settings, and uses the local setting if available.</para>
            </listitem>
        </orderedlist>
        <para>The following are the rules regarding group policy settings inheritance:</para>
        <itemizedlist>
            <listitem>
                <para>A policy setting is configured (<guimenu>Enabled</guimenu> or <guimenu>Disabled</guimenu>) for a parent OU, and the same policy setting is not configured for its child OUs. The child OUs inherit the parent’s policy.</para>
            </listitem>
            <listitem>
                <para>A policy setting is configured (<guimenu>Enabled</guimenu> or <guimenu>Disabled</guimenu>) for a parent OU, and the same policy setting is configured for its child OUs. The child OUs settings override the settings inherited from the parent’s OU. There is a specific case, when the type of this setting is list:</para>
                <itemizedlist>
                    <listitem>
                        <para>The &agentabbrev; will aggregate the contents of these lists and will use the same elements only once.</para>
                    </listitem>
                    <listitem>
                        <para>If any policy is not configured (<guimenu>Not Configured</guimenu>), no inheritance takes place.</para>
                    </listitem>
                </itemizedlist>
            </listitem>
        </itemizedlist>
        <note>
            <para>Do not use setting <guimenu>Not Configured</guimenu> in local settings, because in that case, it can still use previously configured values. Use settings <guimenu>Enabled</guimenu> or <guimenu>Disabled</guimenu> instead.</para>
        </note>
    </section>
</section>
