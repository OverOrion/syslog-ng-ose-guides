<!DOCTYPE chapter
[
<!ENTITY % entities SYSTEM "../../shared/syslog-ng-entities.ent">
  %entities;]>
<procedure xml:id="windows-global-hostname" xmlns="http://docbook.org/ns/docbook">
    <title>Configuring the hostname format</title>
    <indexterm>
        <primary>hostname</primary>
    </indexterm>
    <indexterm>
        <primary>short hostname</primary>
    </indexterm>
    <indexterm>
        <primary>FQDN</primary>
    </indexterm>
    <indexterm>
        <primary>fully-qualified domain name</primary>
    </indexterm>
    <formalpara>
        <title>Purpose:</title>
        <para/>
    </formalpara>
    <para>The &agent; application can send the hostname macro in different format types (FQDN or short hostname), depending on the domain membership of the host, and the source of the message (eventlog or file). The hostname settings will affect all logs originating from file sources, eventlog sources, as well as MARK messages and internal messages of &agentabbrev;, for example, start/stop messages.</para>
    <para>To prevent using two host licenses from a trusted source, use the same hostname type in every outgoing message.</para>
    <para>To determine the hostname, &agentabbrev; queries the short hostname of the machine at startup, and then attempts to resolve it from the DNS server to receive the FQDN. If DNS resolution is not possible, the hostname will be the short hostname.</para>
    <note>
        <para>The &agentabbrev; will never rewrite hostnames.</para>
    </note>
    <para>To configure the hostname format globally, complete the following steps:</para>
    <formalpara>
        <title>Steps:</title>
        <para/>
    </formalpara>
    <step>
        <para>Select <guimenu>syslog-ng Agent Settings</guimenu> and double-click on <guimenu>Global Settings</guimenu>.</para>
    </step>
    <step>
        <para>Enable <guimenu>Global Settings</guimenu>.</para>
    </step>
    <step>
        <para>Navigate to <guimenu>Hostname</guimenu>.</para>
    </step>
    <step>
        <para>Select the hostname type to use globally.</para>
        <itemizedlist>
            <listitem>
                <para>To use only the short hostname in the <parameter>$HOST</parameter> macro of the outgoing message, select <guimenu>Use only hostname</guimenu>. This is the default setting.</para>
                <itemizedlist>
                    <listitem>
                        <para>In case of file sources, MARK messages and internal messages of &agentabbrev; the outgoing hostname will be the short hostname of the machine.</para>
                    </listitem>
                    <listitem>
                        <para>In case of eventlog sources, the hostname will be the short hostname of the event message (for example <parameter>mypc</parameter>), or &agentabbrev; will cut the domain name from the FQDN and use the short hostname part (for example <parameter>mypc.mycompany.local</parameter> becomes <parameter>mypc</parameter>).</para>
                    </listitem>
                </itemizedlist>
            </listitem>
            <listitem>
                <para>To use FQDN (<parameter>hostname.domain_name</parameter>) in the <parameter>$HOST</parameter> macro of the outgoing message, select <guimenu>Use FQDN</guimenu>.</para>
                <itemizedlist>
                    <listitem>
                        <para>In case of file sources, MARK messages and internal messages of &agentabbrev;, the hostname will be the FQDN of the machine.</para>
                        <note>
                            <para>If there is no DNS server, or the DNS server cannot resolve the hostname, only the simple hostname of the machine will be used.</para>
                        </note>
                    </listitem>
                    <listitem>
                        <para>In case of eventlog sources, if the hostname of event message is already an FQDN, &agentabbrev; will use it as the hostname (for example <parameter>mypc.mycompany.local</parameter> will be used as such). If this is not an FQDN, &agentabbrev; will try to resolve this hostname and use the received FQDN as hostname (for example <parameter>mypc</parameter> becomes <parameter>mypc.mycompany.local</parameter>).</para>
                        <note>
                            <para>If there is no DNS server, or the DNS server cannot resolve the hostname, only the short hostname of the event message will be used.</para>
                        </note>
                    </listitem>
                </itemizedlist>
            </listitem>
            <listitem>
                <para>To use a custom domain name that will be appended after the short hostname to receive the FQDN, select <guimenu>Use hostname with custom domain name</guimenu> and enter the domain name to append to the short hostname in the field below. This option affects every outgoing message: eventlog sources, file sources, MARK messages and internal messages of &agentabbrev;.</para>
                <itemizedlist>
                    <listitem>
                        <para>If the hostname is a short hostname, the custom domain name will be appended after the hostname (for example <parameter>mypc</parameter> becomes <parameter>mypc.customcompany.local</parameter>).</para>
                    </listitem>
                    <listitem>
                        <para>If the hostname is an FQDN, the domain name part will be replaced with the custom domain name (for example if the FQDN in the forwarded message is <parameter>mypc.mycompany.local</parameter> and the custom domain name is <parameter>customcompany.local</parameter>, the hostname in the outgoing message becomes <parameter>mypc.customcompany.local</parameter>).</para>
                    </listitem>
                </itemizedlist>
            </listitem>
        </itemizedlist>
        <note>
            <para>The hostname still can be different in the outgoing messages if in the eventlog message, the hostname in the event is different from the machine hostname:</para>
            <itemizedlist>
                <listitem>
                    <para>In case of a forwarded eventlog: the original machine hostname will be the hostname.</para>
                </listitem>
                <listitem>
                    <para>The machine hostname is different from what the DNS server provides (if there is a DNS server and it can resolve the hostname).</para>
                </listitem>
            </itemizedlist>
        </note>
    </step>
    <step>
        <para>To use lower-case characters in every hostname, enable <guimenu>Convert to lower-case</guimenu>. This is enabled by default. When disabled, mixed lower-case and upper-case characters (if there is any) will be used in hostnames. This option affects every outgoing message: eventlog sources, file sources, MARK messages and internal messages of &agentabbrev;.</para>
    </step>
    <step>
        <para>Click <guimenu>Apply</guimenu>.</para>
    </step>
</procedure>
