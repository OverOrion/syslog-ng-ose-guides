<!DOCTYPE chapter
[
<!ENTITY % entities SYSTEM "../../shared/syslog-ng-entities.ent">
  %entities;]>
<procedure xml:id="filters-file" xmlns="http://docbook.org/ns/docbook">
    <title>Filtering file messages</title>
    <indexterm>
        <primary>message filtering</primary>
        <secondary>file filters</secondary>
    </indexterm>
    <formalpara>
        <title>Purpose:</title>
        <para/>
    </formalpara>
    <para>The following types of filters are available for file sources:</para>
    <itemizedlist>
        <listitem>
            <para><emphasis>Message Contents</emphasis>: Filter the text of the message, that is, the contents of the <link linkend="FILE-MESSAGE"><parameter>FILE_MESSAGE</parameter></link> macro. In this filter you can use regular expressions.</para>
        </listitem>
        <listitem>
            <para><emphasis>File Name</emphasis>: Filter on the file name. Corresponds with the <link linkend="FILE-NAME"><parameter>FILE_NAME</parameter></link> macro. In this filter you can use wildcards (<parameter>*</parameter>, <parameter>?</parameter>). Only available for destination file filters.</para>
        </listitem>
    </itemizedlist>
    <para>To modify the filters used for file messages, complete the following procedure:</para>
    <formalpara>
        <title>Steps:</title>
        <para/>
    </formalpara>
    <step>
        <para>Start the configuration interface of the &agent; application.</para>
    </step>
    <step>
        <itemizedlist>
            <listitem>
                <para>To apply filters globally to every file message, select <guimenu>syslog-ng Agent Settings > Destinations > Global File Filters</guimenu>, and right-click <guimenu>Global File Filters</guimenu>.</para>
            </listitem>
            <listitem>
                <para>To apply filters only to a specific destination, select <guimenu>syslog-ng Agent Settings > Destinations</guimenu>, select the destination server, then select <guimenu>File Filters</guimenu>. Right-click <guimenu>File Filters</guimenu>.</para>
            </listitem>
        </itemizedlist>
        <note>
            <para>If you want to use both global and local (server side) filtering, first global filters will be applied to the file messages and then the local filters.</para>
        </note>
    </step>
    <step>
        <para>Select <guimenu>Properties > Enable > OK</guimenu>.</para>
        <figure>
            <title>Global file filters</title>
            <mediaobject>
                <imageobject role="html">
                    <imagedata format="PNG" fileref="win-global-file-filters-properties.png"/>
                </imageobject>
                <imageobject role="fo">
                    <imagedata format="PNG" fileref="&imgroot;/win-global-file-filters-properties.png" contentwidth="10cm"/>
                </imageobject>
            </mediaobject>
        </figure>
    </step>
    <step>
        <para>To use whitelist-filtering, select <guimenu>White List Filtering</guimenu>. By default, &agentabbrev; uses blacklist filtering.</para>
    </step>
    <step>
        <para>On the right-hand pane, double-click on the type of filter you want to create.</para>
    </step>
    <step>
        <itemizedlist>
            <listitem>
                <para>To ignore messages that contain a specific string or text, double-click on <guimenu>Message Contents</guimenu>, enter the search term or a regular expression into the <guimenu>Regular Expression</guimenu> field, then select <guimenu>Add</guimenu>.</para>
            </listitem>
        </itemizedlist>
    </step>
    <step>
        <para>Select <guimenu>Apply</guimenu>, then <guimenu>OK</guimenu>. To activate the changes, restart the &agentabbrev; service.</para>
    </step>
</procedure>
