<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE preface
 [  <!ENTITY % entities SYSTEM "../../common/syslog-ng-entities.ent">
 %entities;]>
<preface xml:id="preface" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title>Preface</title>
    <para>Welcome to the &product; &version; Administrator Guide!</para>
    <para>This document describes how to configure and manage syslog-ng. Background information for the technology and concepts used by the product is also discussed.</para>
    <section>
        <title>Summary of contents</title>
        <para><xref linkend="chapter_intro"/> describes the main functionality and purpose of &abbrev;.</para>
        <para><xref linkend="chapter_concepts"/> discusses the technical concepts and philosophies behind &abbrev;.</para>
        <para><xref linkend="chapter_install"/> describes how to install &abbrev; on various UNIX-based platforms using the precompiled binaries.</para>
        <para><xref linkend="chapter-quickstart"/> provides a briefly explains how to perform the most common log collecting tasks with &abbrev;.</para>
        <para><xref linkend="chapter-configuration-file"/> discusses the configuration file format and syntax in detail, and explains how to manage large-scale configurations using included files and reusable configuration snippets.</para>
        <para><xref linkend="chapter-sources"/> explains how to collect and receive log messages from various sources.</para>
        <para><xref linkend="chapter-destinations"/> describes the different methods to store and forward log messages.</para>
        <para><xref linkend="chapter-routing-filters"/> explains how to route and sort log messages, and how to use filters to select specific messages.</para>
        <para><xref linkend="chapter-global-options"/> lists the global options of &abbrev; and explains how to use them.</para>
        <para><xref linkend="chapter-encrypted-transport-tls"/> shows how to secure and authenticate log transport using TLS encryption.</para>
        <para><xref linkend="chapter-manipulating-messages"/> describes how to customize message format using templates and macros, how to rewrite and modify messages, and how to use regular expressions.</para>
        <para><xref linkend="chapter-parsers"/> describes how to segment and process structured messages like comma-separated values.</para>
        <para><xref linkend="chapter-patterndb"/> explains how to identify and process log messages using a pattern database.</para>
        <para><xref linkend="chapter-log-statistics"/> details the available statistics that &abbrev; collects about the processed log messages.</para>
        <para><xref linkend="chapter-multithreading"/> describes how to configure &abbrev; to use multiple processors, and how to optimize its performance.</para>
        <para><xref linkend="chapter-troubleshooting-syslog-ng"/> offers tips to solving problems.</para>
        <para><xref linkend="chapter_examples"/> gives recommendations to configure special features of syslog-ng.</para>
        <para><xref linkend="man_syslog-ng"/> contains the manual pages of the &abbrev; application.</para>
        <para><xref linkend="lgpl"/> includes the text of the LGPLv2.1 license applicable to the core of &product;.</para>
        <para><xref linkend="gpl"/> includes the text of the GPLv2 license applicable to &product;.</para>
        <para><xref linkend="appendix-cc"/> includes the text of the Creative Commons Attribution Non-commercial No Derivatives (by-nc-nd) License applicable to The &product; &version; Administrator Guide.</para>
        <para><xref linkend="go01"/> provides definitions of important terms used in this guide.</para>
        <para><xref linkend="syslog-ng-parameter-index"/> provides cross-references to the definitions of options, parameters, and macros available in &abbrev;.</para>
        <para><xref linkend="ix01"/> provides cross-references to important terms used in this guide.</para>
    </section>
    <section>
        <title>Target audience and prerequisites</title>
        <para>This guide is intended for system administrators and consultants responsible for designing and maintaining logging solutions and log centers. It is also useful for IT decision makers looking for a tool to implement centralized logging in heterogeneous environments.</para>
        <para>The following skills and knowledge are necessary for a successful syslog-ng administrator:</para>
        <itemizedlist>
            <listitem>
                <para>At least basic system administration knowledge.</para>
            </listitem>
            <listitem>
                <para>An understanding of networks, TCP/IP protocols, and general network terminology.</para>
            </listitem>
            <listitem>
                <para>Working knowledge of the UNIX or Linux operating system.</para>
            </listitem>
            <listitem>
                <para>In-depth knowledge of the logging process of various platforms and applications.</para>
            </listitem>
            <listitem>
                <para>An understanding of the <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://www.ietf.org/rfc/rfc3164.txt"
            >legacy syslog (BSD-syslog) protocol</link>) and the <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://tools.ietf.org/html/rfc5424"
              >new syslog (IETF-syslog) protocol</link>) standard.</para>
            </listitem>
        </itemizedlist>
    </section>
    <section>
        <title>Products covered in this guide</title>
        <para>This guide describes the use of the following products:</para>
        <itemizedlist>
            <listitem>
                <para>&product; (&abbrev;) &techversion;.1 and later</para>
            </listitem>
        </itemizedlist>
    </section>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../xml-stylesheet/common/common.xml" xpointer="element(common_typographical_conventions)"/>
    <section xml:id="support-contact">
        <info>
            <title>Contact and support information</title>
        </info>
        <para>This product is developed and maintained by BalaBit IT Security Ltd. We are located in Budapest, Hungary. Our address is:</para>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../xml-stylesheet/common/common.xml" xpointer="element(vendor-address)"/>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../../xml-stylesheet/common/common.xml" xpointer="element(common_preface_contact_sales)"/>
        <section>
            <title>Support contact</title>
            <para>In case you experience a problem that is not covered in this guide, <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://syslog-ng.com/wiki/syslog-ng-faq">visit the syslog-ng wiki</link> or <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://lists.balabit.hu/mailman/listinfo/syslog-ng/"
        >post it on syslog-ng mailing list</link>.</para>
            <para condition="ose">To report bugs found in &abbrev;, <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://github.com/balabit/syslog-ng/issues"
        >visit this page</link>.</para>
            <para condition="pe">Product support, including 7x24 online support is available in various packages. For support options, <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://syslog-ng.com/support"
        >visit the following page</link>.</para>
            <para condition="ose">Precompiled binary packages are available for free from various third-parties. Most of these are listed on the <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://syslog-ng.com/3rd-party-binaries"
          >syslog-ng website</link>.</para>
            <note condition="ose">
                <para>&vendor; offers a Premium Edition of syslog-ng and a log management appliance syslog-ng Store Box for which professional support is available. For more information on which syslog-ng product version meets your needs contact our sales department at<email>sales@balabit.com</email>.</para>
                <para>For other products of &vendor; visit <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="">http://www.balabit.com/</link>.</para>
            </note>
            <para condition="pe">Support e-mail address:<email>support@balabit.com</email>.</para>
            <para condition="pe">Support hotline: +36 1 371 0540 (available from 9 AM to 5 PM CET on weekdays)</para>
            <para condition="pe">The <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://support.balabit.com">BalaBit Online Support System</link> offers 24 hours technical support. This system is available only for users with a valid support contract and a MyBalaBit account. To sign up for MyBalaBit, <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://www.balabit.com/mybalabit">visit this page</link>.</para>
        </section>
        <xi:include href="../../xml-stylesheet/common/common.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="element(common_preface_training)"/>
    </section>
    <section>
        <title>About this document</title>
        <para>This guide is a work-in-progress document with new versions appearing periodically.</para>
        <para>The latest version of this document can be downloaded from the BalaBit website <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://syslog-ng.com/documentation/">here</link>.</para>
        <section>
            <title>Summary of changes</title>
            <para>This section lists the changes of The &product; Administrator Guide.</para>
            <section xml:id="ose-changes" condition="ose">
                <title>Version 3.3 - 3.4</title>
                <formalpara>
                    <title>Changes in product:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para>New configuration objects called junctions and channels are available to improve the flexibility of configuring &abbrev;. For details, see <xref linkend="junctions"/> and <xref linkend="embedded-objects"/>.</para>
                    </listitem>
                    <listitem>
                        <para>&abbrev; can publish messages using the AMQP (Advanced Message Queuing Protocol). For details, see <xref linkend="configuring-destinations-amqp"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>tcp, tcp6, udp, and udp6</parameter> drivers have been merged into a single <parameter>network()</parameter> driver. For details, see <xref linkend="configuring_sources_network"/> and <xref linkend="configuring_destinations_network"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>tcp, tcp6, syslog, and network</parameter> source and destination drivers support the new <parameter>tcp-keepalive-time()</parameter>, <parameter>tcp-keepalive-probes()</parameter>, and <parameter>tcp-keepalive-intvl()</parameter> options. For details, see respective source and driver descriptions, for example, <xref linkend="reference_source_syslog"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Objects can be defined inline as well. This is useful if you use the object only once (for example, a filter). For details, see <xref linkend="inline-objects"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>mongodb()</parameter> destination supports using replicasets, sockets, and safe-mode. For details, see <xref linkend="mongodb_option_servers"/>, <xref linkend="mongodb_option_path"/>, and <xref linkend="mongodb_option_safe_mode"/>, respectively.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>value-pairs()</parameter> option can modify the names of the value-pairs using the <parameter>rekey</parameter> option. For details, see <xref linkend="options-value-pairs"/>.</para>
                    </listitem>
                    <listitem>
                        <para>A new parser is available to explicitly parse messages as syslog messages. For details, see <xref linkend="parser-syslog"/>.</para>
                    </listitem>
                    <listitem>
                        <para>A new parser is available to parse JSON-formatted messages. For details, see <xref linkend="json-parser"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The following new macros are available in <xref linkend="reference_macros"/>: <parameter>AMPM, HOUR12, LOGHOST, MSEC, SYSUPTIME, USEC</parameter>.</para>
                    </listitem>
                    <listitem>
                        <para>The following new template functions are available in <xref linkend="reference-template-functions"/>: <parameter>GEOIP, LENGTH, STRIP, SUBSTR, TFHASH, UUID</parameter>, and functions for various numerical operations.</para>
                    </listitem>
                    <listitem>
                        <para>The following new parsers are available in <xref linkend="patterndb-using-parsers"/>: <parameter>@EMAIL@, @HOSTNAME@, @MACADDR@, @LLADDR@, @PCRE@, @SET@</parameter>.</para>
                    </listitem>
                    <listitem>
                        <para>Actions triggered from the pattern database can use the number of messages as a condition. For details, see <xref linkend="patterndb-actions-conditional"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Messages triggered from the pattern database can inherit the properties of the original message. For details, see <xref linkend="example-patterndb-trigger"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Tags can be added and deleted using rewrite rules. For details, see <xref linkend="rewrite-tags"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>file-template()</parameter> and <parameter>proto-template()</parameter> global options have been documented. For details, see <xref linkend="global-option-file-template"/> and <xref linkend="global-option-proto-template"/>, respectively.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>dbd-option()</parameter> and <parameter>session-statements()</parameter> options are available for the <parameter>sql()</parameter> driver. For details, see <xref linkend="sql_option_dbd-option"/> and <xref linkend="sql_option_session-statements"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The tags and name-value pairs set in a pattern database file can be listed using the <parameter>pdbtool dictionary</parameter> command. For details, see <xref linkend="pdbtool_dictionary"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>expect-hostname</parameter> source flag has been documented.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>--caps</parameter> command-line option has been documented. For details, see <xref linkend="syslog-ng.8"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>reload</parameter> option is available for the <parameter>syslog-ng-ctl</parameter> utility. For details, see <xref linkend="syslog-ng-ctl.1"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Wildcards can be used to include multiple configuration files. For details, see <xref linkend="including-config-files"/>.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="configuring-destinations-smtp"/> has been added to the document.</para>
                    </listitem>
                </itemizedlist>
                <formalpara>
                    <title>Changes in documentation:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para>Updated the documentation of the <parameter>system()</parameter> source in <xref linkend="configuring-source-system"/>.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="patterndb-triggers-actions"/> has been split into several subsections.</para>
                    </listitem>
                    <listitem>
                        <para>Documented several missing <command>pdbtool</command> options in <xref linkend="man_syslog-ng"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>--without-compile-date</parameter> compiling option has been documented in <xref linkend="compiling-syslog-ng"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>tags()</parameter> option has been added to <xref linkend="reference_source_internal"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Links and compiling option descriptions have been updated in <xref linkend="compiling-syslog-ng"/>.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="sql_option_retry_sql_inserts"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para>A few notes regarding kernel messages and file sources have been reorganized to <xref linkend="kernel-messages"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Clarified the use of double-quotes and special characters in <xref linkend="regular-expressions"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Added a note about unsupported column types to <xref linkend="configuring_sql_mssql"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The maximal number of worker-threads has been clarified in <xref linkend="chapter-multithreading"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Corrected a note about persistent message contexts in <xref linkend="patterndb-correlation"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Clarifications in <xref linkend="configuring_sql_oracle"/>.</para>
                    </listitem>
                    <listitem>
                        <para>A description of the <parameter>BOM</parameter> character has been added to <xref linkend="glossary-bom"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>delimiter</parameter> option of csv-parser() has been clarified. For details, see <xref linkend="csv-parser-delimiter"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Missing facility names have been added to <xref linkend="filter-facility"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>chain_hostnames</parameter> global option has been extended. For details, see <xref linkend="option_chain_hostnames"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The descriptions of statistics types have been clarified in <xref linkend="chapter-log-statistics"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of pipe() has been clarified.</para>
                    </listitem>
                    <listitem>
                        <para>The manual pages of &product; have been relicensed under the GPLv2+ license. See <xref linkend="man_syslog-ng"/> for details.</para>
                    </listitem>
                    <listitem>
                        <para>Information about chrooting syslog-ng has been corrected in the <parameter>syslog-ng.8</parameter> manual page. See <xref linkend="syslog-ng.8"/> for details.</para>
                    </listitem>
                    <listitem>
                        <para>The example of <xref linkend="template-function-format-json"/> has been expanded and corrected.</para>
                    </listitem>
                    <listitem>
                        <para>Lots of other corrections and clarifications.</para>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Version 3.2 - 3.3</title>
                <formalpara>
                    <title>Changes in product:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para>Added the missing MSGID to the list of macros in <xref linkend="reference_macros"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Added two new compiling options: --with-module-dir and --with-module-path in <xref linkend="compiling-syslog-ng"/>.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="compiling-syslog-ng"/> has been updated to cover the new compiling options.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="modules-loading"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="configuring_destinations_mongodb"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="template-function-format-json"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="chapter-multithreading"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>cipher_suite()</parameter> option has been added to <xref linkend="tlsoptions"/>.</para>
                    </listitem>
                </itemizedlist>
                <formalpara>
                    <title>Changes in documentation:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para><xref linkend="concepts-value-pairs"/> has been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para>Several minor editorial changes, clarifications, typo corrections.</para>
                    </listitem>
                    <listitem>
                        <para>Clarifications in <xref linkend="timezone_handling"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Sections <xref linkend="concepts_message_representation"/> and <xref linkend="macros-hard-vs-soft"/> have been added to the document.</para>
                    </listitem>
                    <listitem>
                        <para>Procedures have been restructured to facilitate easier understanding.</para>
                    </listitem>
                    <listitem>
                        <para>Latin abbreviations have been replaced in document with their English equivalents.</para>
                    </listitem>
                    <listitem>
                        <para>Links to sections in the document have been harmonized.</para>
                    </listitem>
                    <listitem>
                        <para>Links to external web pages have been clarified.</para>
                    </listitem>
                    <listitem>
                        <para>Added a note about the statistics of messages with high facility numbers to <xref linkend="chapter-log-statistics"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>dir_perm()</parameter> option of file destinations has been clarified.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>time_reap()</parameter> option has been added to <xref linkend="reference_destination_file"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The descriptions of facility and priority values used by the internal() source has been added to <xref linkend="configuring_sources_internal"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>pad_size()</parameter> option has been clarified in <xref linkend="reference_source_file"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>port()</parameter> option has been added to <xref linkend="configuring_destinations_sql"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The working of the SQL destination driver has been clarified.</para>
                    </listitem>
                    <listitem>
                        <para>The description of the <parameter>pad_size()</parameter> option has been added to <xref linkend="reference_destination_file"/> and <xref linkend="reference_destination_pipe"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The handling of IETF-syslog messages has been clarified in <xref linkend="concepts_message_ietfsyslog"/>.</para>
                    </listitem>
                    <listitem>
                        <para>Documented that multiple configuration files can be included from a directory in <xref linkend="including-config-files"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The syntax of the configuration file has been clarified in <xref linkend="including-config-files"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>follow_freq()</parameter> option has been removed from <xref linkend="reference_source_unixstream"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>optional()</parameter> option has been removed from <xref linkend="reference_source_syslog"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>ip_tos(), ip_ttl(), so_broadcast(), so_sndbuf(), follow_freq()</parameter> options have been removed from <xref linkend="reference_source_tcpudp"/>.</para>
                    </listitem>
                    <listitem>
                        <para>The <parameter>so_broadcast(), so_sndbuf()</parameter> options have been removed from <xref linkend="reference_source_unixstream"/>.</para>
                    </listitem>
                </itemizedlist>
            </section>
            <section>
                <title>Version 3.1 - 3.2</title>
                <formalpara>
                    <title>Changes in product:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para><xref linkend="config-global-variables"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="config-blocks"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="configuring-source-pacct"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="configuring-source-system"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="filters-comparing"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="template-functions"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="conditional-rewrite"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="patterndb-correlation"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="patterndb-triggers-actions"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="patterndb-v4-whatsnew"/></para>
                    </listitem>
                    <listitem>
                        <para><xref linkend="pdbtool.1"/></para>
                    </listitem>
                </itemizedlist>
                <formalpara>
                    <title>Changes in documentation:</title>
                    <para/>
                </formalpara>
                <itemizedlist>
                    <listitem>
                        <para>The contents of the guide have been updated for &product; &version;.</para>
                    </listitem>
                    <listitem>
                        <para>The structure of the document has changed significantly; several important topics and feature descriptions were moved to their own chapters. These chapters contain most (if not all) the information related to the feature, including concepts, configuration, and reference.</para>
                    </listitem>
                    <listitem>
                        <para>Many other clarifications, corrections, reordering of sections, and other changes too numerous to list.</para>
                    </listitem>
                </itemizedlist>
            </section>
        </section>
        <section xml:id="feedback">
            <title>Feedback</title>
            <para>Any feedback is greatly appreciated. General comments, errors found in the text, and any suggestions about how to improve the documentation is welcome at<email>documentation@balabit.com</email>.</para>
        </section>
        <section>
            <title>Acknowledgments</title>
            <para>BalaBit would like to express its gratitude to the syslog-ng users and the syslog-ng community for their invaluable help and support.</para>
        </section>
    </section>
</preface>
