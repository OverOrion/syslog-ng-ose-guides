<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section
 [  <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]>
<section xml:id="concepts-licensing" condition="pe" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title>Licensing</title>
    <indexterm>
        <primary>license</primary>
    </indexterm>
    <indexterm>
        <primary>server license</primary>
    </indexterm>
    <para>Buying a syslog-ng server license permits you to perform the following:</para>
    <itemizedlist>
        <listitem>
            <para>Install the syslog-ng application in server mode to a single host. This host acts as the central log server of the network.</para>
        </listitem>
        <listitem>
            <para>Install the syslog-ng application in relay or client mode on host computers. The total number of hosts permitted to run syslog-ng in relay or client mode is limited by the syslog-ng server license. The client and relay hosts may use any operating system supported by syslog-ng. For details, see <xref linkend="supported_platforms"/>.</para>
        </listitem>
    </itemizedlist>
    <para>A Log Source Host (LSH) is defined as any host or server computer including virtual machines, active or passive networking devices from which a &vendor; &product; in server, relay, or client mode receives log messages. Log Source Host are identified by their IP addresses, so virtual machines and vhosts are separately counted.</para>
    <para>The &product; application has three distinct modes of operation: Client, Relay, and Server.</para>
    <itemizedlist>
        <listitem>
            <para>Client mode is defined as the mode of operation in which &product; collects local logs generated by the host and forwards them through a network connection to the central &abbrev; server, a relay, or other network destination.</para>
        </listitem>
        <listitem>
            <para>Relay mode is defined as the mode of operation in which &product; receives and forwards logs through the network from Log Source Hosts which are defined as host or server computers including virtual machines, active or passive networking devices.</para>
        </listitem>
        <listitem>
            <para>Server mode is defined as the mode of operation in which &product; acts as a central log-collecting server receiving messages through a network connection.</para>
        </listitem>
    </itemizedlist>
    <example>
        <title>Licensing &abbrev; 1</title>
        <!-- FIXME: Add figures to these examples: makes them much more understandable-->
        <para>The &abbrev; is installed in server mode on a logserver.</para>
        <itemizedlist>
            <listitem><para>45 servers with &abbrev; installed in client mode send logs to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>45 networks devices without &abbrev; installed send log messages to the logserver with &abbrev; installed</para></listitem>
        </itemizedlist>
        <para>The &product; license for 100 LSH is required as there are 91 LSH in this configuration.</para>
    </example>
    <example>
        <title>Licensing &abbrev; 2</title>
        <para>The &abbrev; is installed in server mode on a logserver.</para>
        <itemizedlist>
            <listitem><para>45 servers with &abbrev; installed in client mode send logs to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>45 networks devices without &abbrev; installed send log messages to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>100 servers with &abbrev; installed send log messages to a logserver without &abbrev; installed</para></listitem>
        </itemizedlist>
        <para>The &product; license for 200 LSH is required as there are 191 LSH in this configuration.</para>
    </example>
    <example>
        <title>Licensing &abbrev; 3</title>
        <para>The &abbrev; is installed in server mode on a logserver</para>
        <itemizedlist>
            <listitem><para>45 servers with &abbrev; installed in client mode send logs to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>5 servers with &abbrev; installed in relay mode send logs to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>45 networks devices without &abbrev; installed send log messages to the logserver with &abbrev; installed</para></listitem>
            <listitem><para>100 servers with &abbrev; installed send log messages to a logserver without &abbrev; installed</para></listitem>
        </itemizedlist>
        <para>The &product; license for 200 LSH is required as there are 196 LSH in this configuration.</para>
    </example>
    <example xml:id="licensing_example">
        <title>Counting log source hosts</title>
        <para>There are two facilities (for example data centers or server farms). Facility 1 has 75 AIX servers and 20 Microsoft Windows hosts, Facility 2 has 5 HP-UX servers and 40 Debian servers. That is 140 hosts altogether.</para>
        <itemizedlist>
            <listitem>
                <para>The log messages are collected to a single central logserver.</para>
                <para>The &product; license for 150 LSH is required as there are 141 LSH in this configuration (since the logserver is also counted as an LSH).</para>
            </listitem>
            <listitem>
                <para>Each facility has its own logserver, and there is no central logserver. You need two separate licenses: a license for 96 hosts at Facility 1, and a license for at least 46 hosts at Facility 2.</para>
                <para>The &product; license for 100 LSH is required at Facility 1 and a license for 50 LSH is required at Facility 2.</para>
            </listitem>
            <listitem>
                <para>Each facility to has its own local logserver, and there is also a central logserver that collects every log message independently from the two local logservers.</para>
                <para>Three licenses are required. The &product; license for 100 LSH is required at Facility 1, a license for 50 LSH is required at Facility 2, and also a license for 150 LSH for the central logserver.</para>
                <note>
                    <para>If, for example, the 40 Debian servers at Facility 2 are each running 3 virtual hosts, then the total number of hosts at Facility 2 is 125, and the license sizes should be calculated accordingly.</para>
                </note>
            </listitem>
        </itemizedlist>
    </example>
    <warning>
        <itemizedlist>
            <listitem>
                <para>If the actual IP address of the host differs from the IP address received by looking up its IP address from its hostname in the DNS, the syslog-ng server counts them as two different hosts.</para>
            </listitem>
            <listitem>
                <xi:include href="chunks/pe-para-chain-hostnames.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </listitem>
        </itemizedlist>
    </warning>
</section>
