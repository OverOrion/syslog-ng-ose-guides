<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE section
 [  <!ENTITY % entities SYSTEM "../../common/syslog-ng-entities.ent">
 %entities;]>
    <section xml:id="configuring-sources-network" xmlns="http://docbook.org/ns/docbook" version="5.0">
        <title>Collecting messages using the RFC3164 protocol (network() driver)</title>
        <para>The network() destination driver can receive syslog messages conforming to RFC3164 from the network using the TCP, TLS, and UDP networking protocols.</para>
        <para condition="pe">You can use the <trademark>RLTP</trademark> protocol as well. For details about the <trademark>RLTP</trademark> protocol, see <xref linkend="chapter-rltp"/>.</para>
        <itemizedlist>
            <listitem>
                <para>UDP is a simple datagram oriented protocol, which provides "best effort service" to transfer messages between hosts. It may lose messages, and no attempt is made to retransmit lost messages. The <emphasis><link linkend="concepts-message-bsdsyslog">BSD-syslog</link></emphasis> protocol traditionally uses UDP.</para>
                <para>Use UDP only if you have no other choice.</para>
            </listitem>
            <listitem>
                <para>TCP provides connection-oriented service: the client and the server establish a connection, each message is acknowledged, and lost packets are resent. TCP can detect lost connections, and messages are lost, only if the TCP connection breaks. When a TCP connection is broken, messages that the client has sent but were not yet received on the server are lost.</para>
            </listitem>
            <listitem>
                <para>The syslog-ng application supports TLS (Transport Layer Security, also known as SSL) for the tcp() and tcp6() drivers. For details, see the TLS-specific options in <xref linkend="reference-source-network"/>, and also <xref linkend="tls-serverauth"/>.</para>
            </listitem>
        </itemizedlist>
        <formalpara>
            <title>Declaration:</title>
            <para/>
        </formalpara>
        <synopsis>network([options]);</synopsis>
        <para>By default, the <parameter>network()</parameter> driver binds to <userinput>0.0.0.0</userinput>, meaning that it listens on every available IPV4 interface on the TCP/601 port. To limit accepted connections to only one interface, use the <parameter>localip()</parameter> parameter. To listen on IPv6 addresses, use the <userinput>ip-protocol(6)</userinput> option.</para>
        <example xml:id="example-source-network">
            <title>Using the network() driver</title>
            <para>Using only the default settings: listen on every available IPV4 interface on the TCP/601 port.</para>
            <synopsis>source s_network {
    network();
};</synopsis>
            <para>UDP source listening on <userinput>192.168.1.1</userinput> (the default port for UDP is 514):</para>
            <synopsis>source s_network6 {
    network(
        ip("192.168.1.1")
        transport("udp")
    );
};</synopsis>
            <para>TCP source listening on the IPv6 localhost, port 2222:</para>
            <synopsis>source s_network6 {
    network(
        ip("::1")
        transport("tcp")
        port(2222)
        ip-protocol(6)
    );
};</synopsis>
            <para>A TCP source listening on a TLS-encrypted channel.</para>
            <synopsis>source s_network {
    network(
        transport("tcp")
        port(2222)
        tls(peer-verify("required-trusted")
            key-file("/opt/syslog-ng/etc/syslog-ng/syslog-ng.key")
            cert-file("/opt/syslog-ng/etc/syslog-ng/syslog-ng.crt")
            );
    );
};</synopsis>
        </example>
        <para>For details on the options of the <parameter>network()</parameter> source, see <xref linkend="reference-source-network"/>.</para>

        <section xml:id="reference-source-network">
            <title>network() source options</title>
            <indexterm>
                <primary>source drivers</primary>
                <secondary><parameter>network()</parameter> driver</secondary>
            </indexterm>
            <indexterm>
                <primary>TLS</primary>
            </indexterm>
            <para>The <parameter>network()</parameter> driver has the following options.</para>
            <xi:include href="../../common/chunk/source-syslog-options.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
        </section>
    </section>
