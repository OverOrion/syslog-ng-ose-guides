<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../common/syslog-ng-entities.ent">
  %entities;
  ]
 >
<article xml:id="syslog-ng-pe-guide-whatsnew" xml:lang="en-EN" xmlns="http://docbook.org/ns/docbook" version="5.0" condition="pe">
    <info>
        <title>What is new in &product; &version;</title>
        <orgname>&vendor;</orgname>
        <keywordset>
            <keyword>syslog-ng, &product;, &abbrev;, logging, log collection, syslog-ng documentation, syslog-ng configuration, syslog-ng manual, system logging, eventlog collection, central log server, log management, &docgithash;</keyword>
        </keywordset>
        <subjectset>
            <subject>
                <subjectterm>&product; &version; features</subjectterm>
            </subject>
        </subjectset>
        <xi:include href="../xml-stylesheet/common/common.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="common_copyright_bb"/>
        <pubdate>
            <?dbtimestamp?> </pubdate>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xml-stylesheet/common/common.xml" xpointer="common_logo_bb"/>
    </info>
    <section xml:id="preface">
        <title>Preface</title>
        <para><xi:include href="../xml-stylesheet/common/copyright.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>Welcome to &product; (&abbrev;) version &version; and thank you for choosing our product. This document describes the new features and most important changes since the latest release of &abbrev;. The main aim of this paper is to aid system administrators in planning the migration to the new version of &abbrev;. The following sections describe the news and highlights of &abbrev; &version;.</para>
        <para>Starting with version 7, &product; is released as a rolling release. For details, see the &version-policy;.</para>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.8">
        <title>Highlights of 7.0.8</title>
        <simplesect>
            <title>Support for Elasticsearch's Shield security discontinued</title>
            <para>Elasticsearch deleted the Shield <filename>.jar</filename> files required for &abbrev; to work with Shield so support for Shield has been removed.</para>
            <!--FIXME: Használja a httpst biztonságos csatlakozáshoz.-->
        </simplesect>
        <simplesect>
            <title>Support for POSIX regular expressions discontinued</title>
            <para>Support for POSIX regular expressions has been removed.</para>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.7">
        <title>Highlights of 7.0.7</title>
        <simplesect>
            <title>Logstore destination</title>
            <para>The <parameter>logstore()</parameter> destination that was available only in &abbrev; version 6 is now available in version 7.0.7, allowing you to store messages in encrypted files.</para>
            <para>For more information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-logstore"/>.</para>
        </simplesect>
        <simplesect>
            <title>Password-protected private keys</title>
            <para>Starting with &abbrev; version <phrase condition="ose">3.14</phrase><phrase condition="pe">7.0.7</phrase>, you can use password-protected private keys in the <parameter>network()</parameter> and <parameter>syslog()</parameter> source and destination drivers.</para>
            <para>For more information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tls-password-protected-keys"/>.</para>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.6">
        <title>Highlights of 7.0.6</title>
        <simplesect>
            <title>&wec; for &abbrev;</title>
            <para>The &wec; (&wecabbrev;) acts as a log collector and forwarder tool for the Microsoft Windows platform. It collects the log messages of Windows-based hosts over HTTPS (using TLS encryption and mutual authentication), and forwards them to a &abbrev; server. In Windows terminology, this tool allows you to define source-initiated subscriptions, and have them forwarded to a &abbrev; server.</para>
            <para>Unlike the <link xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="https://syslog-ng.com/documents/html/syslog-ng-pe-6.0-guides/en/syslog-ng-windows-agent-guide-admin/html/index.html">&agent;</link>, the &wec; is a standalone tool that does not require installing on the Windows-based host itself. This can be an advantage when your organization's policies restrict or do not allow the installation of third-party tools. The &wec; sits between your Windows hosts and your &product; server, accepting log messages from the remote Windows side with WinRM and feeding them to &product; 7.0.</para>
            <para>For more information, see:</para>
            <itemizedlist>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-wec-guide"/></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="source-windowsevent"/></para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Support for unsetting a group of fields</title>
            <para>In addition to unsetting a macro or a field of a message, you can now explicitly unset a group of fields too, using the <parameter>groupunset()</parameter> rewrite rule.</para>
            <para>For more information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="rewrite-unset"/>.</para>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.5">
        <title>Highlights of 7.0.5</title>
        <simplesect>
            <title>XML parser</title>
            <para>A new parser, the XML parser has been added, which processes input in XML format, and then adds the parsed data to the message object. Use this parser to interoperate with applications that produce XML-encoded log messages.</para>
            <para>The XML parser allows you to extract information from XML logs, and use this information in your logging pipeline, for example, in filters, and also to further process the extracted data using syslog-ng or other tools. In addition, parsing XML logs helps you normalize your log messages, and convert them to a common format.</para>
            <para>For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="xml-parser"/>.</para>
        </simplesect>
        <simplesect>
            <title>Cisco parser</title>
            <para>A new parser, the Cisco parser has been added, which is capable of parsing the log messages of various Cisco devices. The messages of these devices often do not completely comply with the syslog RFCs, making them difficult to parse. The <parameter>cisco-parser()</parameter> of &abbrev; solves this problem, and can separate these log messages to name-value pairs, extracting also the Cisco-specific values.</para>
            <para>For more information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="cisco-parser"/>.</para>
        </simplesect>
        <simplesect>
            <title>New <parameter>systemd-journal()</parameter> source option</title>
            <para>A new <parameter>systemd-journal()</parameter> source option, <parameter>read-old-records()</parameter>, has been added. Previously, &abbrev; started reading records from the journald system service right from the very beginning of the journal. This was often a lengthy process. The new option lets you specify whether you want to read only new records from the journal or all records, starting from the beginning of the journal.</para>
            <para>For more information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="systemd-journal-options-read-old-records"/>.</para>
        </simplesect>
        <simplesect>
            <title>Configurable JVM options for Java destinations</title>
            <para>You can now fine-tune your Java Virtual Machine (JVM) options when configuring Elasticsearch, Hadoop Distributed File System (HDFS), and Apache Kafka destinations. Previously, settings of the Java Virtual Machine could not be overriden from the &abbrev; configuration file, resulting sometimes in suboptimal memory utilization. The new <parameter>jvm-options()</parameter> allows you to configure these Java settings from &abbrev; as a global option.</para>
            <para>For details, see:</para>
            <itemizedlist>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-destination-elasticsearch"/></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-destination-elasticsearch2"/></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-destination-hdfs"/></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-destination-kafka"/></para>
                </listitem>
                <listitem>
                    <para><olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-options"/></para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Changes in HDFS destination options</title>
            <para>The following changes have been introduced with regards to HDFS files:</para>
            <itemizedlist>
                <listitem>
                    <para><emphasis role="bold">New option <parameter>hdfs-append-enabled()</parameter>:</emphasis> A new option has been added, which enables &abbrev; to append new data to the end of an already existing HDFS file. This means that, when setting this parameter to <userinput>true</userinput>, there is no need anymore to open a new file once a file has been closed.</para>
                    <para>For further details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="option-hdfs-append-enabled"/>.</para>
                </listitem>
                <listitem>
                    <para><emphasis role="bold">Support for macros in file names and file paths:</emphasis> <parameter>hdfs-file()</parameter> now supports the usage of macros, meaning that &abbrev; can create files on HDFS dynamically, using macros in the file (or directory) name.</para>
                    <para>For further details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="hdfs-option-hdfs-file"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>New TLS options</title>
            <para>The following new TLS options have been added:</para>
            <itemizedlist>
                <listitem>
                    <para><parameter>dhparam-file()</parameter>: Allows you to specify a file that contains the Diffie-Hellman parameters for key exchanges, generated by the <parameter>openssl dhparam</parameter> utility. </para>
                    <para>For further information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tls-options-dhparam-file"/>.</para>
                </listitem>
                <listitem>
                    <para><parameter>ecdh-curve-list()</parameter>: Allows you to specify the curves permitted when using Elliptic Curve Cryptography (ECC).</para>
                    <para>For further information, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tls-options-ecdh-curve-list"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Oracle Linux 6 platform now supported in &abbrev;</title>
            <para>The Oracle Linux 6 platform is now supported in &abbrev;.</para>
            <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.4">
        <title>Highlights of 7.0.4</title>
        <simplesect>
            <title>RHEL6 support</title>
            <para>Red Hat Enterprise Linux 6 platform is now supported. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
        </simplesect>
        <simplesect>
            <title>New osquery source</title>
            <para>The <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://osquery.io">osquery</link> application allows you to ask questions about your machine using an SQL-like language. For example, you can query running processes, logged in users, installed packages and syslog messages as well. You can make queries on demand, and also schedule them to run regularly.</para>
            <para>The <parameter>osquery()</parameter> source of &abbrev; allows you read the results of periodical osquery queries and automatically parse the messages. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="syslog-ng-source-osquery"/>.</para>
        </simplesect>
        <simplesect>
            <title>New HTTP destination</title>
            <para>The &abbrev; application can directly post log messages to web services using the HTTP protocol, without having to use Java.</para>
            <para>HTTPS connection, as well as password- and certificate-based authentication is supported. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-http-nonjava"/>.</para>
        </simplesect>
        <simplesect>
            <title>Look up GeoIP2 data from IP addresses</title>
            <para>The &abbrev; application can lookup IP addresses from an offline GeoIP2 database, and make the retrieved data available in name-value pairs. Depending on the database used, you can access country code, longitude, and latitude information, and many more in addition to what you could access with <parameter>geoip()</parameter>. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="geoip2-parser"/>.</para>
            <para>You can use the <parameter>geoip2</parameter> template function to format messages to contain GeoIP data. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-geoip2"/>.</para>
        </simplesect>
        <simplesect>
            <title>The geoip() parser is deprecated.</title>
            <para>The <parameter>geoip()</parameter> parser is now deprecated. Use the <parameter>geoip2</parameter> parser instead.</para>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.3">
        <title>Highlights of 7.0.3</title>
        <simplesect>
            <title>Reading Net-SNMP traps</title>
            <para>Using the <parameter>snmptrap()</parameter> source, you can read and parse the SNMP traps of the <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://www.net-snmp.org">Net-SNMP</link>'s <filename>snmptrapd</filename> application. &abbrev; can read these traps from a log file, and extract their content into name-value pairs, making it easy to forward them as a structured log message (for example, in JSON format). For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="syslog-ng-source-snmptrap"/>.</para>
        </simplesect>
        <simplesect>
            <title>Monitor &abbrev; more effectively</title>
            <para>&abbrev; version 7.0.3 also includes new metrics. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="log-statistics-description"/>.</para>
            <para>Also note the following changes compared earlier &abbrev; versions:</para>
            <itemizedlist>
                <listitem>
                    <para>The <userinput>stored</userinput> counter was renamed to <userinput>queued</userinput>.</para>
                </listitem>
                <listitem>
                    <para>The output of the <command>syslog-ng-ctl query</command> command was changed from <userinput>&lt;counter-name>: &lt;counter-value></userinput> to <userinput>&lt;counter-name>=&lt;counter-value></userinput></para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Ported from the &abbrev; 6 LTS product line</title>
            <itemizedlist>
                <listitem>
                    <para>The functionality of wildcard file sources are available in &abbrev; 7.0.3 as a separate source driver. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-sources-wildcard-file"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Other changes</title>
            <itemizedlist>
                <listitem>
                    <para>The default value of the <parameter>log-msg-size()</parameter> option has been increased to 64k. That way &abbrev; will not truncate long log messages, which are getting increasingly common.</para>
                </listitem>
                <listitem>
                    <para>The <command>syslog-debun</command> utility now supports IBM AIX.</para>
                </listitem>
                <listitem>
                    <para>The <parameter>hdfs()</parameter> destination now supports Kerberos authentication. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="destination-hdfs-kerberos-authentication"/>.</para>
                </listitem>
                <listitem>
                    <para>The new <parameter>basename()</parameter> and <parameter>dirname()</parameter> template functions allow you to easily separate the path and filenames. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-template-functions"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0.2">
        <title>Highlights of 7.0.2</title>
        <simplesect>
            <title>Python support: message parsers and template functions</title>
            <para>The Python Log Parser allows you to write your own parser in Python. Practically, that way you can process the log message (or parts of the log message) any way you need. For example, you can import external Python modules to process the messages, query databases to enrich the messages with additional data, and many other things. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="python-parser"/>.</para>
            <para>You can write your own template function in Python. You can define a Python block in your &abbrev; configuration file, and define one or more Python functions in it. You can use these functions as template functions. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-python"/>.</para>
        </simplesect>
        <simplesect>
            <title>Monitor &abbrev; more effectively</title>
            <para>The new <parameter>monitoring()</parameter> source allows you to granularly select which statistics of &abbrev; you want to monitor. In addition, the statistics are available as structured name-value pairs, so you can format the output similarly to other log messages. That way, you can easily convert the statistics and metrics, for example, into JSON or WELF format, and send the results into your monitoring database. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="monitor-syslog-ng-statistics-metrics"/>.</para>
            <para>&abbrev; version 7.0.2 also includes the <parameter>monitoring-welf()</parameter> source, which is a preconfigured <parameter>monitoring()</parameter> source that generates statistics messages in WELF format. Starting with version 7.0., &abbrev; uses this driver for new installations to generate statistics (earlier versions use the <parameter>internal()</parameter> source for this purpose).</para>
        </simplesect>
        <simplesect>
            <title>Ported from the &abbrev; 6 LTS product line</title>
            <itemizedlist>
                <listitem>
                    <para>The functionality of <command>syslog-ng-query</command> application is available in &abbrev; 7.0.2, as part of the <command>syslog-ng-ctl</command> utility. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="syslog-ng-ctl-query"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
    </section>
    <section xml:id="new-in-syslog-ng-pe-7.0">
        <title>Highlights of 7.0</title>
        <simplesect>
            <title>Enriching data</title>
            <para>You can use an external database file to append custom name-value pairs to incoming logs, thus extending, enriching, and complementing the data found in the log message. For example, you can create a database (or export it from an existing tool) that contains a list of hostnames or IP addresses, and the department of your organization that the host belongs to, the role of the host (mailserver, webserver, and so on), or similar contextual information. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="chapter-enrich-data"/>.</para>
            <para>You can correlate and aggregate information from log messages using a few simple filters that are similar to SQL GROUPBY statements. You do not even have to configure a pattern database. Also, when correlating messages containing numerical information, you can use numerical template functions that work on numerical values of a correlation context. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="chapter-correlating-log-messages"/> and <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-numerical"/>.</para>
        </simplesect>
        <simplesect>
            <title>Improved configuration flexibility</title>
            <para>You can define configuration objects inline, where they are actually used, without having to define them in a separate object. This is useful if you need an object only once, for example, a filter or a rewrite rule, because it makes the configuration much easier to read. Every object can be defined inline: sources, destinations, filters, parsers, rewrite rules, and so on. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="inline-objects"/>.</para>
            <para>From now on, every configuration object is a log expression. Every configuration object is essentially a configuration block, and can include multiple objects. To reference the block, only the top-level object must be referenced. That way you can use embedded log statements, junctions and in-line object definitions within source, destination, filter, rewrite and parser definitions. For example, a source can include a rewrite rule to modify the messages received by the source, and that combination can be used as a simple source in a log statement. This feature allows you to preprocess the log messages very close to the source itself. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="embedded-objects"/>.</para>
            <para>To make the configuration more readable, and to help avoid misconfiguration, you can use human-readable units when setting configuration options, for example, <userinput>log-fifo-size(2Mb)</userinput>. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuration-syntax-notes"/>.</para>
        </simplesect>
        <simplesect>
            <title>Other changes</title>
            <itemizedlist>
                <listitem>
                    <para>The default value of <parameter>log-msg-size()</parameter> is 8192 instead of 65536. Increase it if needed.</para>
                </listitem>
                <listitem>
                    <para>The <parameter>skip-cluster-health-check()</parameter> option is available for the <parameter>elasticsearch2()</parameter> destination. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="elasticsearch2-option-elasticsearch2-skip-cluster-health-check"/>.</para>
                </listitem>
                <listitem>
                    <para>The <parameter>qdisk-dir</parameter> option of &abbrev; is not available as a command-line option, use the <parameter>dir()</parameter> option of <parameter>disk-buffer()</parameter> in the configuration of the destination instead.</para>
                </listitem>
                <listitem>
                    <para>Several features and platforms that are available in &product; 6 LTS are not yet available in &abbrev; &version;. For details, see <xref linkend="features-not-available"/>.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
    </section>
    <section xml:id="features-not-available">
        <title>Features available only in &abbrev; 6 LTS</title>
        <para>Several features that are available in &product; 6 LTS are not yet available in &abbrev; &version;. In case you need to use these features, use &abbrev; 6 LTS, or &contact-support; for advice. The features missing from &abbrev; 7 will become gradually available again in future releases of &abbrev;.</para>
        <itemizedlist>
            <listitem>
                <para><trademark>Reliable Log Transfer Protocol</trademark> (<trademark>RLTP</trademark>).</para>
            </listitem>
            <listitem>
                <para>The SNMP destination (<parameter>snmp()</parameter>).</para>
            </listitem>
            <listitem>
                <para>The SQL source (<parameter>sql()</parameter>).</para>
            </listitem>
            <listitem>
                <para>The <command>persist-tool</command> application.</para>
            </listitem>
            <listitem>
                <para>The <parameter>allow-compress()</parameter>, <parameter>ca-dir-layout()</parameter>, and <parameter>cert-subject()</parameter> options related to TLS transport.</para>
            </listitem>
            <listitem>
                <para>The &abbrev; &version; application is currently supported only on Linux platforms. For a detailed list, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
            </listitem>
            <listitem>
                <para>The <parameter>failover-servers()</parameter> and <parameter>spoof-interface()</parameter> options of the <parameter>network()</parameter> and <parameter>syslog()</parameter> destinations.</para>
            </listitem>
            <listitem>
                <para>The <parameter>read-old-records()</parameter> and <parameter>use-syslogng-pid()</parameter> options of the <parameter>file()</parameter> source.</para>
            </listitem>
            <listitem>
                <para>The <parameter>replace()</parameter>, <parameter>cut()</parameter>, and <parameter>format-snare()</parameter> template-functions.</para>
            </listitem>
            <listitem>
                <para>FIPS-compliant packages are not available.</para>
            </listitem>
        </itemizedlist>
        <simplesect>
            <title>Platforms not supported in &abbrev; &version;</title>
            <itemizedlist>
                <listitem>
                    <para>AIX</para>
                </listitem>
                <listitem>
                    <para>FreeBSD</para>
                </listitem>
                <listitem>
                    <para>HP-UX</para>
                </listitem>
                <listitem>
                    <para>Oracle Linux 5, 6</para>
                </listitem>
                <listitem>
                    <para>openSUSE</para>
                </listitem>
                <listitem>
                    <para>Solaris</para>
                </listitem>
                <listitem>
                    <para>Windows</para>
                </listitem>
            </itemizedlist>
            <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
        </simplesect>
    </section>
</article>
