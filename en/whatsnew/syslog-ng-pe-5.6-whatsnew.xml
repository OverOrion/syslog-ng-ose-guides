<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../common/syslog-ng-entities.ent">
  %entities;
  ]
 >
<article xml:id="syslog-ng-pe-guide-whatsnew" xml:lang="en-EN" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <info>
        <title>What is new in &product; &version;</title>
        <orgname>&vendor;</orgname>
        <keywordset>
            <keyword>syslog-ng, &product;, &abbrev;, logging, log collection, syslog-ng documentation, syslog-ng configuration, syslog-ng manual, system logging, eventlog collection, central log server, log management, &docgithash;</keyword>
        </keywordset>
        <subjectset>
            <subject>
                <subjectterm>&product; &version; features</subjectterm>
            </subject>
        </subjectset>
        <xi:include href="../xml-stylesheet/common/common.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="common_copyright_bb"/>
        <pubdate>
<?dbtimestamp?>
        </pubdate>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xml-stylesheet/common/common.xml" xpointer="common_logo_bb"/>
    </info>
    <section xml:id="preface">
        <title>Preface</title>
        <para>Welcome to &product; (&abbrev;) version &version; and thank you for choosing our product. This document describes the new features and most important changes since the latest release of &abbrev;. The main aim of this paper is to aid system administrators in planning the migration to the new version of &abbrev;. The following sections describe the news and highlights of &abbrev; &version;.</para>
        <para>This document covers the &version; feature release of the &product; product.</para>
        <para>The following release policy applies to &product;:</para>
        <itemizedlist>
            <listitem>
                <para><emphasis>Long Term Supported or LTS releases</emphasis> (for example, &abbrev; 4 LTS) are supported for 3 years after their original publication date and for 1 year after the next LTS release is published (whichever date is later). The second digit of the revisions of such releases is 0 (for example, &abbrev; 4.0.1). Maintenance releases to LTS releases contain only bugfixes and security updates.</para>
            </listitem>
            <listitem>
                <para><emphasis>Feature releases</emphasis> (for example, &abbrev; 4 F1) are supported for 6 months after their original publication date and for 2 months after succeeding Feature or LTS Release is published (whichever date is later). Feature releases contain enhancements and new features, presumably 1-3 new feature per release. Only the last of the feature releases is supported (for example when a new feature release comes out, the last one becomes unsupported).</para>
            </listitem>
        </itemizedlist>
        <warning>
            <para>Downgrading from a feature release to an earlier (and thus unsupported) feature release, or to the previous LTS release is officially not supported, but usually works as long as your &abbrev; configuration file is appropriate for the old &abbrev; version. However, persistent data like the position of the last processed message in a file source will be probably lost.</para>
            <para>Logstore files created with a newer version of &abbrev; might not be readable with an older version of &abbrev;.</para>
        </warning>
    </section>
    <section>
        <title>Managing &abbrev; from Puppet</title>
        <para>To simplify the management of large-scale &abbrev; deployments, you can now centrally manage your &abbrev; hosts from <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://puppetlabs.com">Puppet</link>. The &product; Puppet module allows you to perform the following tasks.</para>
        <itemizedlist>
            <listitem>
                <para>Install &abbrev; from a package repository.</para>
            </listitem>
            <listitem>
                <para>Upgrade &abbrev; to a newer version.</para>
            </listitem>
            <listitem>
                <para>Delete &abbrev; from a host.</para>
            </listitem>
            <listitem>
                <para>Update the &abbrev; configuration file of your hosts from a central repository.</para>
            </listitem>
            <listitem>
                <para>Create backup of your &abbrev; configuration files. You can redistribute these backups to your hosts if a rollback is needed.</para>
            </listitem>
        </itemizedlist>
        <para>The Puppet module supports the following platforms: Red Hat Enterprise Linux (RHEL), Oracle Linux, CentOS, Ubuntu, and Debian. Other Linux platforms based on <userinput>.deb</userinput> and <userinput>.rpm</userinput> packages might also work, but are not tested. For details, see <olink targetdoc="installing-syslog-ng-puppet"/>.</para>
    </section>
    <section>
        <title>Performance improvements for the Elasticsearch destination</title>
        <para>The default values of the &abbrev; Elasticsearch destination have been optimized to increase performance. As a result, performance using the default values has increased, up to 100%.</para>
        <itemizedlist>
            <listitem>
                <para>By default, &abbrev; now sends log messages to the Elasticsearch server in batches: the default value of the <parameter>flush-limit()</parameter> option has been increased from 1 to 5000.</para>
            </listitem>
            <listitem>
                <para>You can now send messages to the Elasticsearch server in multiple concurrent batches, significantly improve the performance. By default, &abbrev; uses two batches. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="elasticsearch-option-elasticsearch-concurrent-requests"/>.</para>
            </listitem>
        </itemizedlist>
        <para>Also, the <userinput>message-template()</userinput> option has been renamed to <parameter>template()</parameter> to be consistent with the syntax of other destinations. For details on sending log messages to Elasticsearch, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-elasticsearch"/>.</para>
    </section>
    <section>
        <title>Simplified configuration syntax for Java-based destinations</title>
        <para>The configuration syntax of the Elasticsearch, HDFS, and Apache Kafka destinations has been simplified, and now these destinations use the <userinput>option-name(option-value)</userinput> format, like other destinations of &abbrev;. If you are using these destinations, we recommend that you manually update your &abbrev; configuration file to use the new format. You can keep using the old format without any problems, but the documentation of &abbrev; will only include the new format from now on. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-elasticsearch"/>,<olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-hdfs"/>, and <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-kafka"/>.</para>
        <para>To illustrate the change, here is an old configuration of the Elasticsearch destination:</para>
        <synopsis>java(
    class-path("/opt/syslog-ng/lib/syslog-ng/java-modules/*.jar:&lt;path-to-preinstalled-elasticsearch-libraries&gt;")
    class-name("org.syslog_ng.elasticsearch.ElasticSearchDestination")

    option("index", "syslog-ng_${YEAR}.${MONTH}.${DAY}")
    option("type", "test")
    option("cluster", "syslog-ng")
</synopsis>
        <para>And here is a new one:</para>
        <synopsis>elasticsearch(
    index("syslog-ng_${YEAR}.${MONTH}.${DAY}")
    type("test")
    cluster("syslog-ng")
);</synopsis>
    </section>
    <section>
        <title>New statistics framework</title>
        <para>So far, you could access statistics only in unstructured format, using the <command>syslog-ng-ctl stats</command> command. Now you can query information from a running &abbrev; instance using the new <command>syslog-ng-query</command> utility. This tool allows you to access selected statistics in a controlled way, making it easy to process or monitor the results. This is a first step in a new statistics framework that aims to improve the how &abbrev; instances can be monitored.</para>
        <para>Note that this new framework might decrease the performance of &abbrev; under very high load. If you experience any issues, contact the &vendor; Support Team and let us know the details of your use case, so we can correct the problem.</para>
    </section>
    <section>
        <title>Improved &selinux; support</title>
        <para>In addition to Red Hat Enterprise Linux 6.5, &abbrev; now supports &selinux; on Red Hat Enterprise Linux 5, as well as on 6.0-6.4. The CentOS platforms corresponding to the supported RHEL versions are supported as well. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="selinux-support"/>.</para>
    </section>
    <section>
        <title>Support for new platforms</title>
        <para>Version &version; of &pe; supports the following new platforms:</para>
        <itemizedlist>
            <listitem>
                <para>Debian 8 "jessie" (x86_64)</para>
            </listitem>
            <listitem>
                <para>SUSE Linux Enterprise Server (SLES) 12 (x86_64)</para>
            </listitem>
        </itemizedlist>
        <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
    </section>
    <section>
        <title>Unsupported platforms</title>
        <para>Starting with &pe; version &version;, the following platforms are not officially supported:</para>
        <itemizedlist>
            <listitem>
                <para>Windows 2003 Server</para>
            </listitem>
        </itemizedlist>
        <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
    </section>
    <section>
        <title>Upgrade notes</title>
        <para>If you are using custom configuration blocks that have arguments, you have to manually update your configuration file before upgrading &abbrev;. When you reference the received argument in the block, make sure that the referenced argument is enclosed only between backticks, and not between quotes or double-quotes. For example, this is correct: <userinput>host(`host`)</userinput>, but this is incorrect: <userinput>host("`host`") port('`port`')</userinput>. Remove the quotes before upgrading, otherwise &abbrev; will not start (syntax error in the cofiguration file).</para>
        <para>For details on configuration blocks, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="config-blocks-arguments"/>.</para>
    </section>
    <section>
        <title>Other changes</title>
        <itemizedlist>
            <listitem>
                <para>When using the <parameter>program()</parameter> destination, the external application keeps on running when &abbrev; exits if the <parameter>keep-alive()</parameter> option is set.</para>
            </listitem>
            <listitem>
                <para>So far, you could create custom configuration blocks that had a fixed number of arguments. You can now create custom configuration blocks that can receive variable number of arguments, making the configuration of &abbrev; even more flexible. For example, this can be useful when passing arguments to a template, or optional arguments to an underlying driver. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="config-blocks-arguments"/>.</para>
            </listitem>
            <listitem>
                <para>To simplify debugging and troubleshooting, the <command>syslog-debun</command> utility now supports the FreeBSD and HP-UX platforms. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="syslog-debun.1"/>.</para>
            </listitem>
        </itemizedlist>
    </section>
</article>
