<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../common/syslog-ng-entities.ent">
  %entities;
  ]
 >
<article xml:id="syslog-ng-pe-guide-whatsnew" xml:lang="en-EN" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <info>
        <title>What is new in &product; &version;</title>
        <orgname>&vendor;</orgname>
        <keywordset>
            <keyword>syslog-ng, &product;, &abbrev;, logging, log collection, syslog-ng documentation, syslog-ng configuration, syslog-ng manual, system logging, eventlog collection, central log server, log management, &docgithash;</keyword>
        </keywordset>
        <subjectset>
            <subject>
                <subjectterm>&product; &version; features</subjectterm>
            </subject>
        </subjectset>
        <xi:include href="../xml-stylesheet/common/common.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="common_copyright_bb"/>
        <pubdate>
<?dbtimestamp?>
        </pubdate>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xml-stylesheet/common/common.xml" xpointer="common_logo_bb"/>
    </info>
    <section xml:id="preface">
        <title>Preface</title>
        <para>Welcome to &product; (&abbrev;) version &version; and thank you for choosing our product. This document describes the new features and most important changes since the latest release of &abbrev;. The main aim of this paper is to aid system administrators in planning the migration to the new version of &abbrev;. The following sections describe the news and highlights of &abbrev; &version;.</para>
        <para>This document covers the &version; feature release of the &product; product.</para>
        <para>As of June 2011, the following release policy applies to &product;:</para>
        <itemizedlist>
            <listitem>
                <para><emphasis>Long Term Supported or LTS releases</emphasis> (for example, &abbrev; 4 LTS) are supported for 3 years after their original publication date and for 1 year after the next LTS release is published (whichever date is later). The second digit of the revisions of such releases is 0 (for example, &abbrev; 4.0.1). Maintenance releases to LTS releases contain only bugfixes and security updates.</para>
            </listitem>
            <listitem>
                <para><emphasis>Feature releases</emphasis> (for example, &abbrev; 4 F1) are supported for 6 months after their original publication date and for 2 months after succeeding Feature or LTS Release is published (whichever date is later). Feature releases contain enhancements and new features, presumably 1-3 new feature per release. Only the last of the feature releases is supported (for example when a new feature release comes out, the last one becomes unsupported).</para>
            </listitem>
        </itemizedlist>
        <warning>
            <para>Downgrading from a feature release to an earlier (and thus unsupported) feature release, or to the previous LTS release is officially not supported, but usually works as long as your &abbrev; configuration file is appropriate for the old &abbrev; version. However, persistent data like the position of the last processed message in a file source will be probably lost.</para>
            <para>Logstore files created with a newer version of &abbrev; might not be readable with an older version of &abbrev;.</para>
        </warning>
    </section>
    <section xml:id="syslog-ng-on-windows">
        <title>Running &product; on Windows platforms</title>
        <para>Starting with version 5 LTS, &product; is supported on Microsoft Windows platforms, allowing you to run a syslog-ng server on Windows. This is useful when collecting logs from Windows clients, as it does not require a separate Linux or UNIX host to run the syslog-ng server. It also allows you to collect the logs centrally from various networking devices (for example, routers, switches) and appliances that do not integrate their logging into Windows environments.</para>
        <para>On Windows, you can configure &abbrev; similarly to other Linux and UNIX platforms using a configuration file.</para>
        <para>Using the new eventlog() source, you can collect the native log messages of local Windows applications as well. As a result of making it possible to run &abbrev; on Microsoft Windows, several macros that were available only in &agent; are now available in &abbrev; as well. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-macros"/>.</para>
        <itemizedlist>
            <listitem>
                <para>For details on the limitations of running your &abbrev; logserver on Windows, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="windows-limitations"/>.</para>
            </listitem>
            <listitem>
                <para>For details on installing &abbrev; on Windows, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="installing-syslog-ng-windows"/>.</para>
            </listitem>
            <listitem>
                <para>For details on collecting logs from Eventlog containers, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-sources-eventlog"/>.</para>
            </listitem>
        </itemizedlist>
    </section>
    <section xml:id="rltp-compression">
        <title>On-the-wire compression</title>
        <para>When using the <trademark>Reliable Log Transfer Protocol</trademark> to transfer messages, &abbrev; can compress the log messages to save bandwidth. Using compression is especially useful to collect logs from low-bandwidth environments. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="rltp-options"/>.</para>
    </section>
    <section xml:id="released-in-4f2">
        <title>Released in &product; 4 F2</title>
        <section>
            <title>Reliable disk-based buffering</title>
            <para>Reliable disk-based buffering is now available in &abbrev;. Use reliable disk-based buffering if you do not want to lose logs in case of reload/restart, unreachable destination or &abbrev; crash. This solution provides a slower, but reliable disk-buffer option. The disk-buffer file is created and initialized at startup and gradually grows as new messages arrive.</para>
            <para>For details on reliable disk-based buffering, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-diskbuffer-reliable"/>.</para>
        </section>
        <section>
            <title>Collecting messages from SQL tables or relational databases</title>
            <para>Starting with version <phrase condition="pe">4 F2</phrase>, the &abbrev; application is able to collect messages from SQL tables or relational databases, using the <parameter>sql()</parameter> driver. Currently the Microsoft SQL (MSSQL), MySQL, Oracle and PostgreSQL databases are supported. The &abbrev; application can connect to a database, collect records from a table, and then create a message from each record. Every query executed by the SQL source can be customized.</para>
            <para>For details on messages from tables or relational database, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-sources-sql"/>.</para>
        </section>
        <section>
            <title><trademark>Reliable Log Transfer Protocol</trademark>
            </title>
            <para>The syslog-ng application can send and receive log messages in a reliable way over the TCP transport layer using the <trademark>Reliable Log Transfer Protocol</trademark> (<trademark>RLTP</trademark>). <trademark>RLTP</trademark> is a new transport protocol that prevents message loss during connection breaks. It detects the last received message on the receiving end and then starts resending messages from that point. Therefore, messages are not duplicated at the receiving end in case of a connection break. It also allows the negotiation of using TLS with a single source driver.</para>
            <para>For details on <trademark>Reliable Log Transfer Protocol</trademark>, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="chapter-rltp"/>.</para>
        </section>
    </section>
    <section xml:id="released-in-4f1">
        <title>Released in &product; 4 F1</title>
        <section>
            <title>New module architecture</title>
            <para>&abbrev; became modular to increase its flexibility and also to simplify the development of additional modules. Most of the functionality of &abbrev; has been moved to separate modules. That way it becomes also possible to finetune the resource requirements of &abbrev; for example, by loading only the modules that are actually used in the configuration, or simply omitting modules that are not used but require large amount of memory.</para>
            <para>For details on using modules, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="modules"/>.</para>
        </section>
        <section>
            <title>Multithreading, scaling, and performance improvements</title>
            <para>Starting with version <phrase condition="pe">4 F1</phrase><phrase condition="ose">3.3</phrase>, &abbrev; can be run in multithreaded mode to scale to multiple CPUs or cores for increased performance.</para>
            <para>Depending on the exact &abbrev; configuration, environment, and other parameters, &abbrev; is capable of processing:</para>
            <itemizedlist>
                <listitem>
                    <para>over 150000 messages per second when receiving messages from a single connection and storing them in text files;</para>
                </listitem>
                <listitem>
                    <para>over 150000 messages per second when receiving messages from a single connection and storing them in logstore files;</para>
                </listitem>
                <listitem>
                    <para>over 500000 messages per second when receiving messages from multiple connections and storing them in text files;</para>
                </listitem>
                <listitem>
                    <para>over 500000 messages per second when receiving messages from multiple connections and storing them in logstore files;</para>
                </listitem>
                <listitem>
                    <para>over 100000 messages per second when receiving messages from secure (TLS-encrypted) connections and storing them in text files.</para>
                </listitem>
            </itemizedlist>
            <note>
                <para>By default, &abbrev; runs in single-thread mode. Multithreading must be explicitly enabled in the &abbrev; configuration file using the <parameter>threaded(yes)</parameter> option.</para>
            </note>
            <para>For details on using multithreading, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="chapter-multithreading"/>.</para>
        </section>
        <section>
            <title>Sending SNMP traps</title>
            <para>The &abbrev; application can send SNMP traps using the Simple Network Management Protocol version 2c or version 3. Incoming log messages can be converted to SNMP traps, and the fields (such as the trap OID) of the SNMP messages can be customized using &abbrev; macros. Converting the syslog messages sent by Cisco devices to Cisco-specific SNMP traps defined by the CISCO-SYSLOG-MIB (<parameter>enterprises.cisco.ciscoMgmt.ciscoCiscoMIB</parameter>) is also supported (such traps are also referred to as <parameter>clogMessageGenerated</parameter> notifications). That way, the incoming log messages can be forwarded to devices used to process and analyze Cisco-specific SNMP traps.</para>
            <para>For details on using multithreading, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-snmp"/>. For details on the Cisco-specific SNMP trap format, see <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://tools.cisco.com/Support/SNMP/do/BrowseMIB.do?local=en&amp;step=2&amp;mibName=CISCO-SYSLOG-MIB">CISCO-SYSLOG-MIB</link> on the Cisco website.</para>
        </section>
        <section>
            <title>Managing complex configurations</title>
            <para>Version <phrase condition="pe">4 F1</phrase><phrase condition="ose">3.3</phrase> of &abbrev; offers several new features to simplify the maintenance of large configurations in heterogeneous environments.</para>
            <itemizedlist>
                <listitem>
                    <para>The &abbrev; application can automatically collect the system-specific log messages of the host on a number of platforms using the <parameter>system()</parameter> driver. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-source-system"/>.</para>
                </listitem>
                <listitem>
                    <para>In &abbrev; version <phrase condition="ose">3.2</phrase><phrase condition="pe">4 F1</phrase>, it is possible to define global variables in the configuration file. Global variables are actually <parameter>name-value</parameter> pairs; when syslog-ng processes the configuration file during startup, it automatically replaces <parameter>`name`</parameter> with <parameter>value</parameter>. The environmental variables of the host are automatically imported and can be used as global variables. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="config-global-variables"/>.</para>
                </listitem>
                <listitem>
                    <para>Parts (blocks) of a configuration file can be easily reused, you have to define the block (for example, a source) once, and you can reference it later. Any syslog-ng object can be a block, it is also possible to create blocks that contain multiple objects. Configuration blocks can receive arguments as well. Blocks are similar to C++ macros. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="config-blocks"/>.</para>
                </listitem>
            </itemizedlist>
        </section>
        <section>
            <title>Improved decision making logic</title>
            <para>Version <phrase condition="pe">4 F1</phrase><phrase condition="ose">3.3</phrase> of &abbrev; offers several new features that add new possibilities to processing messages and evaluating values only under certain conditions, improving the flexibility of &abbrev;.</para>
            <itemizedlist>
                <listitem>
                    <para>Macro values and templates can be compared as numerical and string values. String comparison is alphabetical: it determines if a string is alphabetically greater or equal to another string. You can also use boolean operators to combine comparison expressions. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="filters-comparing"/>.</para>
                </listitem>
                <listitem>
                    <para>Template functions allow you to modify the way macros or name-value pairs are expanded. Template functions can be used in template definitions, or when macros are used in the configuration of &abbrev;. For example, the <parameter>if</parameter> template function can include a different value in the log message based on its condition, while numerical template functions perform simple operations (like addition or multiplication) on integer numbers or macros containing integer numbers (for example, <parameter>$LEVEL_NUM</parameter> or <parameter>$YEAR</parameter>). For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-functions"/>.</para>
                </listitem>
                <listitem>
                    <para>Starting with <phrase condition="pe">4 F1</phrase><phrase condition="ose">3.2</phrase>, it is possible to apply a rewrite rule to a message only if certain conditions are met. The <parameter>condition()</parameter> option effectively embeds a filter expression into the rewrite rule: the message is modified only if the message passes the filter. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="conditional-rewrite"/>.</para>
                </listitem>
            </itemizedlist>
        </section>
        <section>
            <title>Message correlation, triggers, and other pattern database improvements</title>
            <itemizedlist>
                <listitem>
                    <para>Starting with version <phrase condition="pe">4 F1</phrase><phrase condition="ose">3.2</phrase>, the &abbrev; application is able to correlate log messages identified using pattern databases.</para>
                    <para>Log messages are supposed to describe events, but applications often separate information about a single event into different log messages. For example, the Postfix e-mail server logs the sender and recipient addresses into separate log messages, or in case of an unsuccessful login attempt, the OpenSSH server sends a log message about the authentication failure, and the reason of the failure in the next message.</para>
                    <para>The &abbrev; application can correlate the identified messages and use all the information of the correlating messages, for example, to collect all important information about the event into a single log message. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="patterndb-correlation"/>.</para>
                </listitem>
                <listitem>
                    <para>The &abbrev; application is able to generate (trigger) messages automatically if certain events occur, for example, a specific log message is received, or the correlation timeout of a message expires. Basically, you can define messages for every pattern database rule that are emitted when a message matching the rule is received. Triggering messages is often used together with message correlation, but can also be used separately. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="patterndb-triggers-actions"/>.</para>
                </listitem>
                <listitem>
                    <para>It is now possible to specify multiple program patterns for a ruleset. For details, see the description of the <parameter>patterns</parameter> tag in <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="reference-patterndb-schemes"/>.</para>
                </listitem>
                <listitem>
                    <para>The &lt;value&gt; element of name-value pairs can include template functions. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-functions"/>, for examples, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-if"/>.</para>
                </listitem>
            </itemizedlist>
        </section>
    </section>
    <section>
        <title>Other changes</title>
        <formalpara>
            <title>Released in &product; 5 LTS:</title>
            <para/>
        </formalpara>
        <itemizedlist>
            <listitem>
                <para><emphasis>New source option: use-syslog-ng-pid()</emphasis></para>
                <para>Override the PID value of the message with the PID of the running &abbrev; process.</para>
            </listitem>
            <listitem>
                <para><emphasis>New TLS option: cert_subject()</emphasis></para>
                <para>Use the specified certificate from the Windows Certificate Store. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tlsoptions"/>.</para>
            </listitem>
            <listitem>
                <para><emphasis>New global option: custom_domain()</emphasis></para>
                <para>Use this option to specify a custom domain name that will be appended after the short hostname to receive the FQDN. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="global-option-custom-domain"/>.</para>
            </listitem>
            <listitem>
                <para><emphasis>New option for the udp() destination: spoof_interface()</emphasis></para>
                <para>On Microsoft Windows, use this option to specify the name of the interface that is used to send the spoofed messages.</para>
            </listitem>
            <listitem>
                <para><emphasis>New disk-buffer option: qout_size()</emphasis></para>
                <para>When using disk-based buffering, the number of messages stored in the output buffer of the destination can be specified.</para>
            </listitem>
            <listitem>
                <para><emphasis>New syslog-ng-ctl options: reload and stop</emphasis></para>
                <para>Reload and stop a running &abbrev; process.</para>
            </listitem>
            <listitem>
                <para><emphasis>Changes in template escaping</emphasis></para>
                <para>Escaping special characters used in templates has been changed and improved. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-macros"/>.</para>
            </listitem>
        </itemizedlist>
        <formalpara>
            <title>Released in &product; 4 F2:</title>
            <para/>
        </formalpara>
        <itemizedlist>
            <listitem>
                <para><emphasis>New hard macro: Unique receipt ID</emphasis></para>
                <para>A unique ID for messages generated at reception time on the receiving host. It facilitates defining relationships between messages that are potentially distributed to different files on the same host, or different hosts.</para>
            </listitem>
            <listitem>
                <para><emphasis>Installation path in .RUN installer</emphasis></para>
                <para>The &abbrev; application can be installed to an alternative location. It can be useful if the user intends to install &abbrev; without registering it as a service, or if it cannot be installed to the default location because of policy compliance reasons.</para>
            </listitem>
            <listitem>
                <para>Starting with version <phrase condition="pe">4 F2</phrase>, the <parameter>lgstool cat</parameter> and <parameter>lgstool tail</parameter> <parameter>--filter</parameter> options are available.</para>
            </listitem>
            <listitem>
                <para>AIX 7.1 has been added to the list of supported platforms.</para>
            </listitem>
            <listitem>
                <para><emphasis>On-the-wire compression for TLS</emphasis></para>
                <para>Starting with version 4 F2 (4.2.2), on-the-wire compression can be enabled in TLS-encrypted communication to reduce the bandwidth usage of transporting log messages. For details, see the <parameter>allow-compress()</parameter> option in <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tlsoptions"/>.</para>
            </listitem>
        </itemizedlist>
        <formalpara>
            <title>Released in &product; 4 F1:</title>
            <para/>
        </formalpara>
        <itemizedlist>
            <listitem>
                <para>The <parameter>log_fifo_size()</parameter> option can be set for logstore destinations as well. The default value of <parameter>log_fifo_size()</parameter> has been increased to 10000.</para>
            </listitem>
            <listitem>
                <para>The default value of <parameter>log_iw_size()</parameter> has been increased to 1000.</para>
            </listitem>
            <listitem>
                <para>New options called <parameter>ca-dir-layout()</parameter> and <parameter>cipher-suite()</parameter> options are available to specify the hash types and encryption parameters used in TLS connections. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tlsoptions"/>.</para>
            </listitem>
        </itemizedlist>
    </section>
</article>
