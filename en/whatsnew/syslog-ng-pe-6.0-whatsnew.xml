<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../common/syslog-ng-entities.ent">
  %entities;
  ]
 >
<article xml:id="syslog-ng-pe-guide-whatsnew" xml:lang="en-EN" xmlns="http://docbook.org/ns/docbook" version="5.0">
    <info>
        <title>What is new in &product; &version;</title>
        <orgname>&vendor;</orgname>
        <keywordset>
            <keyword>syslog-ng, &product;, &abbrev;, logging, log collection, syslog-ng documentation, syslog-ng configuration, syslog-ng manual, system logging, eventlog collection, central log server, log management, &docgithash;</keyword>
        </keywordset>
        <subjectset>
            <subject>
                <subjectterm>&product; &version; features</subjectterm>
            </subject>
        </subjectset>
        <xi:include href="../xml-stylesheet/common/common.xml" xmlns:xi="http://www.w3.org/2001/XInclude" xpointer="common_copyright_bb"/>
        <pubdate>
<?dbtimestamp?>
        </pubdate>
        <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="../xml-stylesheet/common/common.xml" xpointer="common_logo_bb"/>
    </info>
    <section xml:id="preface">
        <title>Preface</title>
        <para>Welcome to &product; (&abbrev;) version &version; and thank you for choosing our product. This document describes the new features and most important changes since the latest release of &abbrev;. The main aim of this paper is to aid system administrators in planning the migration to the new version of &abbrev;. The following sections describe the news and highlights of &abbrev; &version;.</para>
        <para>This document covers the &version; feature release of the &product; product.</para>
        <para>The following release policy applies to &product;:</para>

        <xi:include href="../common/version-policy.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>

    </section>

    <section xml:id="new-in-syslog-ng-pe-6-lts">
        <title>Changes since &abbrev; 5 F6</title>
        <!--
    FIXME 6.0:
     * windows platformok es valtozasok
-->
        <simplesect>
            <title>Parsing <userinput>key=value</userinput> pairs</title>
            <para>The &abbrev; application can separate a message consisting of whitespace or comma-separated <userinput>key=value</userinput> pairs (for example, Postfix log messages) into name-value pairs. You can also specify other separator character instead of the equal sign, for example, colon (<userinput>:</userinput>) to parse MySQL log messages. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="key-value-parser"/>.</para>
        </simplesect>
        <simplesect>
            <title>Updated TLS ciphers</title>
            <para>The OpenSSL application used in &abbrev; has been updated to version 1.0.2, so you can use new, stronger ciphers to protect the communication between your &abbrev; clients and servers. For an updated list of supported ciphers, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="tls-option-cipher-suite"/>.</para>
        </simplesect>
        <simplesect>
            <title>Other changes</title>
            <itemizedlist>
                <listitem>
                    <para>Starting from version 6 LTS, the &abbrev; installer packages (earlier called <userinput>client</userinput> and <userinput>server</userinput> package) are renamed. From now on, the package with the <filename>compact</filename> suffix does not include SQL support. If you are installing &abbrev; in client or relay mode, or you do not use the <parameter>sql()</parameter> source or destination, use the <filename>compact</filename> binaries. That way no unnecessary components are installed to your system. The <userinput>server</userinput> suffix from the package containing every available &abbrev; module is removed.</para>
                </listitem>
            </itemizedlist>
        </simplesect>
        <simplesect>
            <title>Platform changes in &abbrev; 6 LTS</title>
            <formalpara>
                <title>New platforms in &abbrev; 6 LTS:</title>
                <para/>
            </formalpara>
            <itemizedlist>
                <listitem>
                    <para>Ubuntu 16.04 LTS (Xenial Xerus)</para>
                </listitem>
            </itemizedlist>
            <formalpara>
                <title>Platforms not supported in &abbrev; 6 LTS:</title>
                <para/>
            </formalpara>
            <itemizedlist>
                <listitem>
                    <para>AIX 6.1</para>
                </listitem>
                <listitem>
                    <para>FreeBSD 9</para>
                </listitem>
                <listitem>
                    <para>HP-UX 11i v2</para>
                </listitem>
            </itemizedlist>
            <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
        </simplesect>
    </section>

    <section xml:id="new-in-syslog-ng-pe-5-5f6-lts">
        <title>Changes between &abbrev; 5 LTS and 5 F6</title>
        <section>
            <title>New destinations</title>
            <simplesect>
                <title>Elasticsearch 2.x and Shield support</title>
                <para>Version 5 F6 of &abbrev; supports Elasticsearch version 2.0 and newer. Because of compatibility reasons, &abbrev; has a separate destination (<parameter>elasticsearch2()</parameter>) that you can use with Elasticsearch version 2.0 and newer.</para>
                <para><link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://www.elastic.co/products/shield">Elasticsearch Shield</link> is supported for both Elasticsearch 1.x and 2.x destinations, allowing you to authenticate your &abbrev; clients on the Elasticsearch server.</para>
                <para>For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-elasticsearch2"/>.</para>
            </simplesect>
            <simplesect xml:id="whatsnew-elasticsearch-destination">
                <title>Send messages directly to Elasticsearch</title>
                <para>Version <phrase condition="pe">5.4</phrase><phrase condition="ose">3.7</phrase> of &abbrev; can directly send log messages to <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://www.elastic.co/products/elasticsearch/">Elasticsearch</link>, allowing you to search and analyze your data in real time, and visualize it with <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://www.elastic.co/products/kibana/">Kibana</link>. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-elasticsearch"/>.</para>
            </simplesect>
            <simplesect xml:id="whatsnew-kafka-destination">
                <title>Publish messages to Apache Kafka</title>
                <para>The &abbrev; application allows you to publish your log data to your Apache Kafka message bus, where subscribers can access them, making it easy to integrate your log data into a big data solution. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-kafka"/>.</para>
            </simplesect>
                <simplesect>
                <title>Hadoop Distributed File System (HDFS) support</title>
                <para>Version <phrase condition="pe">5.3</phrase><phrase condition="ose">3.7</phrase> of &abbrev; can send plain-text log files to the <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="http://hadoop.apache.org/">Hadoop Distributed File System (HDFS)</link>, allowing you to store your log data on a distributed, scalable file system. This is especially useful if you have huge amount of log messages that would be difficult to store otherwise, or if you want to process your messages using Hadoop tools (for example, Apache Pig). For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-hdfs"/>.</para>
            </simplesect>
            <simplesect>
                <title>Storing messages in MongoDB database</title>
                <para>MongoDB is a schema-free, document-oriented database, ideal to collect log messages. Since it does not require a predetermined schema, it gives you much more flexibility than the SQL databases, making it it easy to store name-value pairs extracted from log messages. That way, you can conveniently store metadata received in a log message (for example, in the SDATA part of RFC5424-formatted log messages), or other data parsed from the body of the log messages (for example, usernames parsed from login/logout messages). For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-mongodb"/>.</para>
            </simplesect>
            <simplesect>
                <title>Sending e-mail alerts</title>
                <para>An important aspect of logging is alerting on important but rare events. A common way to do that is via e-mail, sent either to people or to services which process them further. The SMTP destination driver allows you to send e-mails based on incoming log messages to one or more addresses. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-smtp"/>.</para>
            </simplesect>
        </section>
        <section>
            <title>Processing incoming messages</title>
            <simplesect>
                <title>Parsing JSON messages</title>
                <para>JavaScript Object Notation (JSON) is a text-based open standard designed for human-readable data interchange. It is used primarily to transmit data between a server and web application, serving as an alternative to XML. The &abbrev; application can separate parts of JSON-encoded log messages to name-value pairs, allowing you to receive structured log messages from such applications, store them, and convert them to other format if needed. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="json-parser"/>.</para>
            </simplesect>
            <simplesect>
                <title>Reading messages from the systemd journal</title>
                <para>The systemd journal is a new type of system log storage. This is used, or will be used on most Linux distributions, such as RHEL (from RHEL7), Fedora, CentOS, and so on. The journal can store name-value pairs instead of the traditional system log entries. &abbrev; &version; can directly read log messages from the journal file of platforms using systemd. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-sources-journal"/>.</para>
            </simplesect>
        </section>
        <section>
            <title>Formatting messages</title>
            <simplesect>
                <title>Formatting messages as Common Event Format extensions</title>
                <para>&abbrev; version <phrase condition="pe">5 F6</phrase><phrase condition="ose">3.8</phrase> includes a new template function (<parameter>format-cef-extension</parameter>) to format name-value pairs as ArcSight Common Event Format extensions. Note that the template function only formats the selected name-value pairs, it does not provide any mapping. There is no special support for creating the prefix part of a Common Event Format message.</para>
                <para>For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-format-cef-extension"/></para>
            </simplesect>
            <simplesect>
                <title>Converting messages into JSON format</title>
                <para>The &abbrev; application can convert messages or selected value-pairs into JavaScript Object Notation (JSON) format. Including the template function in a message template allows you to store selected information about a log message (that is, its content, macros, or other metadata) in JSON format, or to forward JSON messages to external applications. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-format-json"/>.</para>
            </simplesect>
            <simplesect>
                <title>Selecting and using name-value pairs</title>
                <para>The &abbrev; application allows you to select and construct name-value pairs from any information already available about the log message, or extracted from the message itself. You can directly use this structured information, for example, in the following places:</para>
                <itemizedlist>
                    <listitem>
                        <para><parameter>mongodb()</parameter> destination (for details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="configuring-destinations-mongodb"/>)</para>
                    </listitem>
                    <listitem condition="pe">
                        <para><parameter>format-welf()</parameter> template function (for details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-format-welf"/>)</para>
                    </listitem>
                    <listitem>
                        <para>or in other destinations using the <parameter>format-json()</parameter> template function (for details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-format-json"/>).</para>
                    </listitem>
                </itemizedlist>
                <para>For details about value-pairs, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="concepts-value-pairs"/>.</para>
            </simplesect>
            <simplesect>
                <title>Rewriting multiple macros</title>
                <para>Using the <userinput>groupset</userinput> rewrite rule, you can rewrite multiple macros at the same time, making it easy to modify the values of fields parsed using patterndb or from JSON. You can specify the list of macros manually, or also as a glob pattern. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="rewrite-groupset"/>.</para>
            </simplesect>
            <simplesect>
                <title>Comparing macro values to a list</title>
                <para>The &abbrev; application can compare the value of a macro to a list of strings. Earlier, if a specific macro had several different values, filtering on the macro values required several filter statements. Now you can specify every expected value in a file, and use the contents of that file in a filter. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="rewrite-groupset"/>.</para>
            </simplesect>
            <simplesect>
                <title>Creating hashes from macro values</title>
                <para>With the <userinput>hash</userinput> template function, you can create message digests from parts of the log message. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="template-function-hash"/>.</para>
            </simplesect>
            <simplesect>
                <title>Adding a unique ID to log messages</title>
                <para>HOSTID is a 32-bit number generated by a cryptographically secure pseudorandom number generator. Its purpose is to identify the &abbrev; host, thus it is the same for every message of the host. It can be accessed via the $HOSTID macro (which cannot be rewritten).</para>
                <para>When the global option <userinput>use-uniqid(yes)</userinput> is set, &abbrev; generates this practically unique id for every received or locally generated message. You can add this ID to your messages using the $UNIQID macro. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="global-use-uniqid"/>.</para>
            </simplesect>
        </section>
        <section>
            <title>Managing &abbrev;</title>
            <simplesect>
                <title>Displaying license-related information</title>
                <para>The &abbrev; application uses a license in server mode to determine the maximum number of hosts that are allowed to connect. Use the <command>syslog-ng-ctl show-license-info</command> command to display license-related information the number of hosts currently logging to your server. This helps you to plan your capacity, to check your license usage, and to detect client misconfiguration that can result in a license miscount anomaly. Note that in client or relay mode, &abbrev; does not require a license. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="syslog-ng-ctl-show-license-info"/>.</para>
            </simplesect>
            <simplesect>
                <title>Managing &abbrev; from Puppet</title>
                <para>To simplify the management of large-scale &abbrev; deployments, you can now centrally manage your &abbrev; hosts from <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://puppetlabs.com">Puppet</link>. The &product; Puppet module allows you to perform the following tasks.</para>
                <itemizedlist>
                    <listitem>
                        <para>Install &abbrev; from a package repository.</para>
                    </listitem>
                    <listitem>
                        <para>Upgrade &abbrev; to a newer version.</para>
                    </listitem>
                    <listitem>
                        <para>Delete &abbrev; from a host.</para>
                    </listitem>
                    <listitem>
                        <para>Update the &abbrev; configuration file of your hosts from a central repository.</para>
                    </listitem>
                    <listitem>
                        <para>Create backup of your &abbrev; configuration files. You can redistribute these backups to your hosts if a rollback is needed.</para>
                    </listitem>
                </itemizedlist>
                <para>The Puppet module supports the following platforms: Red Hat Enterprise Linux (RHEL), Oracle Linux, CentOS, Ubuntu, and Debian. Other Linux platforms based on <userinput>.deb</userinput> and <userinput>.rpm</userinput> packages might also work, but are not tested. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="installing-syslog-ng-puppet"/>.</para>
            </simplesect>
            <simplesect>
                <title>New statistics framework</title>
                <para>So far, you could access statistics only in unstructured format, using the <command>syslog-ng-ctl stats</command> command. Now you can query information from a running &abbrev; instance using the new <command>syslog-ng-query</command> utility. This tool allows you to access selected statistics in a controlled way, making it easy to process or monitor the results. This is a first step in a new statistics framework that aims to improve the how &abbrev; instances can be monitored.</para>
                <para>Note that this new framework might decrease the performance of &abbrev; under very high load. If you experience any issues, contact the &vendor; Support Team and let us know the details of your use case, so we can correct the problem.</para>
            </simplesect>
            <simplesect>
                <title>Improved &selinux; support</title>
                <para>In addition to Red Hat Enterprise Linux 6.5, &abbrev; now supports &selinux; on Red Hat Enterprise Linux 5, as well as on 6.0-6.4. The CentOS platforms corresponding to the supported RHEL versions are supported as well. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="selinux-support"/>.</para>
            </simplesect>
            <simplesect>
                <title>Supported platforms</title>
                <para>For a complete list of supported platforms, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="supported-platforms"/>.</para>
            </simplesect>
        </section>
        <section>
            <title>Other changes</title>
            <itemizedlist>
                <listitem>
                    <para>You can now specify the location where &abbrev; stores the disk-buffer files using the <parameter>dir()</parameter> option of <parameter>disk-buffer()</parameter>. Note that the <parameter>dir()</parameter> option overrides the settings of the <parameter>--qdisk-dir</parameter> command-line option.</para>
                </listitem>
                <listitem>
                    <para>Value-pairs now have a new option to select every value-pair that has a name beginning with a specified prefix, but remove the prefix when formatting the message. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="options-value-pairs"/>.</para>
                </listitem>
                <listitem>
                    <para>The syslog-ng Agent on Windows application now searches for CA certificates also in the Intermediate Certification Authorities Store.</para>
                </listitem>
                <listitem>
                    <para>So far, the largest message &abbrev; could handle was 64kbyte, because internally &abbrev; represented the messages in a 16-bit nvtable. From now on, &abbrev; uses a 32-bit nvtable, allowing you to receive and manipulate messages much larger than 64kbyte.</para>
                </listitem>
                <listitem>
                    <para>The <parameter>sql()</parameter> source and destination driver on the HP-UX platform does not support the Oracle SQL database anymore.</para>
                </listitem>
                <listitem>
                    <para>On other platforms where Oracle SQL database is supported, the <parameter>sql()</parameter> source and destination driver supports version 12 of the Oracle SQL database.</para>
                </listitem>
                <listitem>
                    <para>CSV-parsers can use strings as delimiters. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="csv-parser-delimiter"/>.</para>
                </listitem>
                <listitem>
                    <para>Multithreading is enabled by default (<userinput>threaded(yes)</userinput>).</para>
                </listitem>
                <listitem>
                    <para>The <command>persist-tool</command> utility has a new <userinput>--rename-key</userinput> option to help solve troubleshooting the persist file.</para>
                </listitem>
                <listitem>
                    <para>The <command>syslog-ng-ctl</command> utility has a new <userinput>stats --reset</userinput> option that resets all statistics counters to zero.</para>
                </listitem>
                <listitem>
                    <para>A new utility called <command>syslog-debun</command> is available in &abbrev; &version;. This tool can be used to collect information about your &abbrev; environment into a debug bundle to simplify troubleshooting and increase the speed of solving support tickets.</para>
                </listitem>
                <listitem>
                    <para>When using the <parameter>program()</parameter> destination, the external application keeps on running when &abbrev; exits if the <parameter>keep-alive()</parameter> option is set.</para>
                </listitem>
                <listitem>
                    <para>So far, you could create custom configuration blocks that had a fixed number of arguments. You can now create custom configuration blocks that can receive variable number of arguments, making the configuration of &abbrev; even more flexible. For example, this can be useful when passing arguments to a template, or optional arguments to an underlying driver. For details, see <olink targetdoc="syslog-ng-pe-guide-admin" targetptr="config-blocks-arguments"/>.</para>
                </listitem>
            </itemizedlist>
        </section>
    </section>
</article>
