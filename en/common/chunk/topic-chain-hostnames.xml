<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
 [  <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]>
<topic xmlns="http://docbook.org/ns/docbook" version="5.0"><title>chain-hostnames()</title><indexterm><primary>chain-hostnames()</primary></indexterm><indexterm><primary>chain_hostnames()</primary></indexterm><informaltable frame="topbot" colsep="0" rowsep="0"><tgroup cols="2"><colspec colnum="1" colwidth="80pt"/><tbody><row><entry>Accepted values: <?dbhtml bgcolor="#D4D6EB" ?> </entry><entry><userinput>yes</userinput> | <userinput>no</userinput> </entry></row><row><entry>Default: <?dbhtml bgcolor="#D4D6EB" ?> </entry><entry><userinput>no</userinput> </entry></row></tbody></tgroup></informaltable><para><emphasis role="bold">Description:</emphasis> Enable or disable the chained hostname format. If a client sends the log message directly to the &abbrev; server, the <parameter>chain-hostnames()</parameter> option is enabled on the server, and the client sends a hostname in the message that is different from its DNS hostname (as resolved from DNS by the &abbrev; server), then the server can append the resolved hostname to the hostname in the message (separated with a <userinput>/</userinput> character) when the message is written to the destination.</para><para>For example, consider a client-server scenario with the following hostnames: <parameter>client-hostname-from-the-message</parameter>, <parameter>client-hostname-resolved-on-the-server</parameter>, <parameter>server-hostname</parameter>. The hostname of the log message written to the destination depends on the <parameter>keep-hostname()</parameter> and the <parameter>chain-hostnames()</parameter> options. How <parameter>keep-hostname()</parameter> and <parameter>chain-hostnames()</parameter> options are related is described in the following table.</para><informaltable><tgroup cols="4"><colspec colnum="1" colname="col1" colwidth="1*"/><colspec colnum="2" colname="col2" colwidth="0.5*"/><colspec colnum="3" colname="col3" colwidth="1.5*"/><colspec colnum="4" colname="col4" colwidth="1.5*"/><thead><row><entry namest="col1" nameend="col2" morerows="1"/><entry namest="col3" nameend="col4" align="center">keep-hostname() setting on the server</entry></row><row><entry align="center"> yes </entry><entry align="center"> no </entry></row></thead><tbody><row><entry morerows="1" rotate="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">chain-hostnames() setting on the server</emphasis> </entry><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">yes</emphasis> </entry><entry> client-hostname-from-the-message </entry><entry> client-hostname-from-the-message / client-hostname-resolved-on-the-server </entry></row><row><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">no</emphasis> </entry><entry> client-hostname-from-the-message </entry><entry> client-hostname-resolved-on-the-server </entry></row></tbody></tgroup></informaltable><para>If the log message is forwarded to the &abbrev; server via a &abbrev; relay, the hostname depends on the settings of the <parameter>keep-hostname()</parameter> and the <parameter>chain-hostnames()</parameter> options both on the &abbrev; relay and the &abbrev; server.</para><para>For example, consider a client-relay-server scenario with the following hostnames: <parameter>client-hostname-from-the-message</parameter>, <parameter>client-hostname-resolved-on-the-relay</parameter>, <parameter>client-hostname-resolved-on-the-server</parameter>, <parameter>relay-hostname-resolved-on-the-server</parameter>. How <parameter>keep-hostname()</parameter> and <parameter>chain-hostnames()</parameter> options are related is described in the following table.</para><informaltable><tgroup cols="8"><colspec colnum="1" colname="col1" colwidth="1*"/><colspec colnum="2" colname="col2" colwidth="0.5*"/><colspec colnum="3" colname="col3" colwidth="1*"/><colspec colnum="4" colname="col4" colwidth="0.5*"/><colspec colnum="5" colname="col5" colwidth="1.5*"/><colspec colnum="6" colname="col6" colwidth="1.5*"/><colspec colnum="7" colname="col7" colwidth="1.5*"/><colspec colnum="8" colname="col8" colwidth="1.5*"/><thead><row><entry namest="col1" nameend="col4" morerows="1"/><entry namest="col5" nameend="col8" align="center">chain-hostnames() setting on the server</entry></row><row><entry namest="col5" nameend="col6" align="center">yes</entry><entry namest="col7" nameend="col8" align="center">no</entry></row><row><entry namest="col1" nameend="col4" morerows="1"/><entry namest="col5" nameend="col6" align="center">keep-hostname() setting on the server</entry><entry namest="col7" nameend="col8" align="center">keep-hostname() setting on the server</entry></row><row><entry namest="col5" nameend="col5" align="center"> <?dbhtml bgcolor="#D4D6EB" ?>yes</entry><entry namest="col6" nameend="col6" align="center"> <?dbhtml bgcolor="#D4D6EB" ?>no</entry><entry namest="col7" nameend="col7" align="center"> <?dbhtml bgcolor="#D4D6EB" ?>yes</entry><entry namest="col8" nameend="col8" align="center"> <?dbhtml bgcolor="#D4D6EB" ?>no</entry></row></thead><tbody><row><entry morerows="3" rotate="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">chain- hostnames() setting on the relay</emphasis> </entry><entry morerows="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">yes</emphasis> </entry><entry morerows="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">keep- hostname() setting on the relay</emphasis> </entry><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">yes</emphasis> </entry><entry> client-hostname- from-the-message </entry><entry> client-hostname- from-the-message / relay-hostname- resolved-on-the- server </entry><entry> client-hostname- from-the-message </entry><entry morerows="3" valign="middle"> relay-hostname- resolved-on-the- server </entry></row><row><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">no</emphasis> </entry><entry> client-hostname- from-the-message / client-hostname- resolved-on-the- relay </entry><entry> client-hostname- from-the-message / client-hostname- resolved-on-the- relay / relay- hostname-resolved- on-the-server </entry><entry> client-hostname- from-the-message / client-hostname- resolved-on-the- relay </entry></row><row><entry morerows="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">no</emphasis> </entry><entry morerows="1" valign="middle"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">keep- hostname() setting on the relay</emphasis> </entry><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">yes</emphasis> </entry><entry> client-hostname- from-the-message </entry><entry> client-hostname- from-the-message / relay-hostname- resolved-on-the- server </entry><entry> client-hostname- from-the-message </entry></row><row><entry align="center"> <?dbhtml bgcolor="#D4D6EB" ?><emphasis role="bold">no</emphasis> </entry><entry> client-hostname- resolved-on-the- relay </entry><entry> client-hostname- resolved-on-the- relay / relay- hostname-resolved- on-the-server </entry><entry> client-hostname- resolved-on-the- relay </entry></row></tbody></tgroup></informaltable><xi:include href="../../common/chunk/pe-para-chain-hostnames.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/></topic>
