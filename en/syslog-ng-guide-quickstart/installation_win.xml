<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../common/syslog-ng-entities.ent">
  %entities;
  ]
 >
<section xml:id="installation" xmlns="http://docbook.org/ns/docbook">
    <title>Installation</title>
    <procedure xml:id="installing_server_windowsx">
        <title>Downloading the server installer</title>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To obtain the &product; installer from &mybalabit;, complete the following steps:</para>
        <formalpara>
            <title>Prerequisites:</title>
            <para/>
        </formalpara>
        <para>The installers are available via &mybalabit;. In addition to the installers, a <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://my.balabit.com/">valid license</link> is required to install the &abbrev; server. Contact your sales representative for access and license files.</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Navigate to the &downloads; and select &product;.</para>
        </step>
        <step>
            <para>Choose the latest available version (5.0.2 is used as an example)</para>
        </step>
        <step>
            <para>Download the 32-bit or 64-bit installer, depending on your server's architecture:</para>
            <itemizedlist>
                <listitem>
                    <para>For the 32-bit installer, download <filename>syslog-ng-premium-edition-5.0.2-win32.exe</filename></para>
                </listitem>
                <listitem>
                    <para>For the 64-bit installer, download <filename>syslog-ng-premium-edition-5.0.2-win64.exe</filename></para>
                </listitem>
            </itemizedlist>
            <para>The binaries include all required libraries and dependencies of syslog-ng. These components are installed in the <filename>C:\Program Files\syslog-ng</filename> directory by default.</para>
            <para>The installer can reuse existing configuration and license files. Following installation, sample configuration files are also available in the <filename>etc</filename> subfolder.</para>
        </step>
    </procedure>
    <procedure xml:id="installing_client_windows">
        <title>Downloading the client installer (Windows Agent)</title>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To obtain the &agent; installer from &mybalabit;, complete the following steps:</para>
        <formalpara>
            <title>Prerequisites:</title>
            <para/>
        </formalpara>
        <para>The installers are available via &mybalabit;. In addition to the installers, a <link xmlns:ns1="http://www.w3.org/1999/xlink" ns1:href="https://my.balabit.com/">valid license</link> is required to install the &abbrev; server. Contact your sales representative for access and license files.</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Navigate to the &downloads; and select &product;.</para>
        </step>
        <step>
            <para>Choose the latest available version (5.0.2 is used as an example).</para>
        </step>
        <step>
            <para>Download <filename>syslog-ng-agent-5.0.2-setup.exe</filename></para>
            <para>Regardless of the path name, the installer contains both the 32-bit and the 64-bit binaries.</para>
        </step>
        <step>
            <formalpara xml:id="installing_dotnet">
                <title>Installing the .NET framework</title>
                <para/>
            </formalpara>
            <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chunk/topic-dotnet.xml"/>
        </step>
    </procedure>
    <procedure xml:id="installing_server">
        <title>Installing &product; for Windows as server</title>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To install &product; for Windows as server, complete the following steps:</para>
        <formalpara>
            <title>Prerequisites:</title>
            <para/>
        </formalpara>
        <para>Running &abbrev; in server mode requires a license file. The license determines how many individual hosts can connect to the server. You can obtain the license from your sales representative.</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Copy the installer and <filename>license.txt</filename> file to the server</para>
        </step>
        <step>
            <para>Execute the installer</para>
        </step>
        <step>
            <para>Select <guimenu>Next</guimenu> on the Welcome screen, and accept the EULA</para>
        </step>
        <step>
            <para>Select <guimenu>Install syslog-ng Premium Edition</guimenu> and choose <guimenu>Next</guimenu> (the other option will simply unpack syslog-ng without registering it as a service)</para>
        </step>
        <step>
            <para>Keep the default installation path and choose <guimenu>Next</guimenu></para>
        </step>
        <step>
            <para>Navigate to the license file (<filename>license.txt</filename>) and choose <guimenu>Next</guimenu></para>
        </step>
        <step>
            <para>At this point, existing configurations could be loaded from backup. Skip this step by choosing <guimenu>Next</guimenu></para>
        </step>
        <step>
            <para>Click <guimenu>Install</guimenu> to start the installation. Wait for the process to finish, then choose <guimenu>Close</guimenu></para>
        </step>
        <step>
            <para>Configure the server using the sample configuration file:</para>
            <substeps>
                <step>
                    <para>Navigate to <filename>C:\Program Files\syslog-ng\etc</filename></para>
                </step>
                <step>
                    <para>Copy <filename>syslog-ng-eventlog-to-file-sample.conf</filename> to <filename>syslog-ng.conf</filename></para>
                </step>
                <step>
                    <para>The sample configuration file is configured to store logs in the <filename>C:\tmp</filename> temporary folder.</para>
                    <para>Create the <filename>C:\tmp</filename> temporary folder for storing logs.</para>
                </step>
            </substeps>
        </step>
        <step>
            <para>Start syslog-ng as an administrator:</para>
            <substeps>
                <step>
                    <para>In the Start menu, navigate to <guimenu>All Programs > syslog-ng Premium Edition</guimenu></para>
                </step>
                <step>
                    <para>Right-click <guimenu>Start syslog-ng</guimenu>, and choose <guimenu>Run as Administrator</guimenu></para>
                    <formalpara>
                        <title>Expected outcome</title>
                        <para/>
                    </formalpara>
                    <para>&abbrev; is started, and logs appear in <filename>C:\tmp\eventlog_to_file_example.txt</filename>.</para>
                </step>
            </substeps>
        </step>
    </procedure>
    <procedure>
        <title>Preparing for the client installation</title>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To verify the client installation, a new network source must be added to the &abbrev; configuration:</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Open the <filename>C:\Program Files\syslog-ng\etc\syslog-ng.conf</filename> configuration file for editing</para>
        </step>
        <step>
            <para>Add the following snippet to the end of the file:</para>
            <synopsis>source s_network {
	syslog();
};

destination d_nettofile {
	file('C:\tmp\tcp_to_file_example.txt' flags(no-multi-line));
};

log {
	source(s_network);
	destination(d_nettofile);
	flags(flow-control);
};</synopsis>
        </step>
        <step>
            <para>Save the configuration file</para>
        </step>
        <step>
            <para>Restart the syslog-ng service</para>
        </step>
    </procedure>
    <procedure xml:id="installing_client">
        <title>Installing the &agent; client</title>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>The following instructions describe the standalone installation, which is configured locally. For more advanced installation options (using domain group policies, installing by group policy), refer to <olink targetdoc="syslog-ng-windows-agent-guide-admin"/>.</para>
        <formalpara>
            <title>Prerequisites:</title>
            <para/>
        </formalpara>
        <para>No license file is required to run &abbrev; in client mode.</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Execute the downloaded binary.</para>
        </step>
        <step>
            <para>Accept the EULA.</para>
        </step>
        <step>
            <para>Select the destination folder for &agent;.</para>
        </step>
        <step>
            <para>Choose <guimenu>Stand alone mode</guimenu>.</para>
        </step>
        <step>
            <para>The installer generates a simple configuration. Enter the destination IP of the &abbrev; server:</para>
            <substeps>
                <step>
                    <para>Select <guimenu>Destinations</guimenu></para>
                </step>
                <step>
                    <para>Double-click <guimenu>Add new server</guimenu></para>
                </step>
                <step>
                    <para>Enter the server's IP address</para>
                </step>
                <step>
                    <para>Change the port number to <parameter>601</parameter></para>
                </step>
                <step>
                    <para>Click <guimenu>OK</guimenu></para>
                </step>
            </substeps>
        </step>
        <step>
            <para>Close the configuration window to finish installation.</para>
        </step>
        <step>
            <para><emphasis>Validating the installation</emphasis></para>
            <para>Test remote logging:</para>
            <substeps>
                <step>
                    <para>Log out and back in on the Windows client</para>
                </step>
                <step>
                    <para>Verify the server log.</para>
                    <formalpara>
                        <title>Expected outcome</title>
                        <para/>
                    </formalpara>
                    <para>On the &abbrev; server, the logout and login events are displayed in the <filename>C:\tmp\tcp_to_file_example.txt</filename> logfile.</para>
                </step>
            </substeps>
        </step>
    </procedure>
</section>
