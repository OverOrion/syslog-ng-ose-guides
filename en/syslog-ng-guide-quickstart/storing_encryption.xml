<!DOCTYPE article
  [<!ENTITY % entities SYSTEM "../shared/syslog-ng-entities.ent">
  %entities;
  ]
 >
<procedure xml:id="storing_encryption" xmlns="http://docbook.org/ns/docbook">
    <title>Storing messages in encrypted files</title>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chunk/step-encrypted-files.xml"/>
    <formalpara>
        <title>Steps:</title>
        <para/>
    </formalpara>
    <step>
        <para>Open the C:\Program Files\syslog-ng\etc\syslog-ng.conf configuration file for editing</para>
    </step>
    <step>
        <para>Locate the block starting with<computeroutput>destination d_nettofile</computeroutput></para>
    </step>
    <step>
        <para>Add the following line right below:</para>
        <synopsis>destination d_logstore {
	logstore('C:\tmp\messages.lgs' compress(9) );
};</synopsis>
    </step>
    <step>
        <para>Locate the line containing<computeroutput>destination(d_nettofile)</computeroutput></para>
    </step>
    <step>
        <para>Add the following line right below:</para>
        <synopsis>destination(d_logstore)</synopsis>
    </step>
    <step>
        <para>Restart syslog-ng for the configuration changes to take effect</para>
    </step>
    <step>
        <para><emphasis>Validating the changes</emphasis></para>
        <para>You can verify that logs are arriving to the logstore using the following command:</para>
        <para><command>"C:\Program Files\syslog-ng\bin\lgstool.exe‚Äù cat C:\tmp\messages.lgs</command></para>
    </step>
</procedure>
