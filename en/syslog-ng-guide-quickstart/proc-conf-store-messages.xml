<!DOCTYPE topic
[  <!ENTITY % entities SYSTEM "../shared/syslog-ng-entities.ent">
  %entities;]>
<procedure xml:id="proc-conf-store-messages" xmlns="http://docbook.org/ns/docbook">
    <title>Storing messages in encrypted files</title>
    <xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="chunk/step-encrypted-files.xml"/>
    <formalpara>
        <title>Steps:</title>
        <para/>
    </formalpara>
    <step>
        <para>Open the <filename>/opt/syslog-ng/etc/syslog-ng.conf</filename> configuration file in a text editor</para>
    </step>
    <step>
        <para>Locate the line starting with <command>destination d_messages</command></para>
    </step>
    <step>
        <para>Add the following line right below:</para>
        <synopsis>destination d_logstore {
    logstore("/var/log/messages.lgs" compress(9) );
};</synopsis>
    </step>
    <step>
        <para>Locate the line containing <command>destination(d_messages)</command></para>
    </step>
    <step>
        <para>Add the following line right below:</para>
        <synopsis>destination(d_logstore)</synopsis>
    </step>
    <step>
        <para>Restart syslog-ng for the configuration changes to take effect</para>
    </step>
    <step>
        <para><emphasis>Validating the changes</emphasis></para>
        <para>You can verify that logs are arriving to the logstore using the following command:</para>
        <para><command>/opt/syslog-ng/bin/logcat /var/log/messages.lgs</command></para>
    </step>
</procedure>
