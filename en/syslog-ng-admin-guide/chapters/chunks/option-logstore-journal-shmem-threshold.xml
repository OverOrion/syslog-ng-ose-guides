<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE topic
 [  <!ENTITY % entities SYSTEM "../../syslog-ng-entities.ent">
 %entities;]>
<topic xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title>logstore_journal_shmem_threshold()</title>
    <indexterm type="parameter">
        <primary>logstore_journal_shmem_threshold()</primary>
    </indexterm>
    <informaltable frame="topbot" colsep="0" rowsep="0">
        <tgroup cols="2">
            <colspec colnum="1" colwidth="40pt"/>
            <tbody>
                <row>
                    <entry>Type:
                        <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                    <entry>number</entry>
                </row>
                <row>
                    <entry>Default:
                        <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                    <entry>536870912</entry>
                </row>
            </tbody>
        </tgroup>
    </informaltable>
    <para><guilabel>Description:</guilabel> If the size of memory (in bytes) required by journal files increases above this value, &abbrev; maps only a single block of every logstore journal into the memory. Default value: <parameter>536870912</parameter> (512 MB).</para>
    <xi:include href="option-description-destination-logstore-journal-shmem-threshold.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
    <xi:include href="example-logstore-memory-threshold.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
    <example xml:id="example-logstore-memory">
        <title>Limiting the memory use of journal files</title>
        <para>The following example causes &abbrev; to map only a single journal block into the host's memory if the total memory range used by logstore journals would be higher than 32 MB.</para>
        <synopsis>options {
    logstore_journal_shmem_threshold(33554432);
};
destination d_messages { logstore("/var/log/messages_logstore.lgs"
                         journal_block_size(19660800)
                         journal_block_count(5)
                         );
};</synopsis>
    </example>
</topic>
