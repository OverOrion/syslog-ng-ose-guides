<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
 [
 <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]>
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title/>
    <section xml:id="table_source_tcp_options">
        <title>Options for tcp(), tcp6(), udp(), and udp6() sources</title>
        <simplesect xml:id="source_option_ip_tos">
            <title>ip_tos()</title>
            <indexterm type="parameter">
                <primary>ip_tos()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the Type-of-Service value of outgoing
                packets.</para>
        </simplesect>
        <simplesect xml:id="source_option_ip_ttl">
            <title>ip_ttl()</title>
            <indexterm type="parameter">
                <primary>ip_ttl()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the Time-To-Live value of outgoing
                packets.</para>
        </simplesect>
        <simplesect xml:id="source_option_so_broadcast">
            <title>so_broadcast()</title>
            <indexterm type="parameter">
                <primary>so_broadcast()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>yes or no</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>no</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> This option controls the
                    <parameter>SO_BROADCAST</parameter> socket option required to make syslog-ng
                send messages to a broadcast address. For details, see the
                    <command>socket(7)</command> manual page.</para>
        </simplesect>
        <simplesect xml:id="source_option_so_sndbuf">
            <title>so_sndbuf()</title>
            <indexterm type="parameter">
                <primary>so_sndbuf()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the size of the socket send buffer in
                bytes. For details, see the <command>socket(7)</command> manual page.</para>
        </simplesect>
    </section>

    <section xml:id="table_destination_tcp_options">
        <title>Options for tcp(), tcp6(), udp(), and udp6() destinations</title>
        <simplesect xml:id="destination_option_ip_tos">
            <title>ip_tos()</title>
            <indexterm type="parameter">
                <primary>ip_tos()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the Type-of-Service value of outgoing
                packets.</para>
        </simplesect>
        <simplesect xml:id="destination_option_ip_ttl">
            <title>ip_ttl()</title>
            <indexterm type="parameter">
                <primary>ip_ttl()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the Time-To-Live value of outgoing
                packets.</para>
        </simplesect>
        <simplesect xml:id="destination_option_localip">
            <title>localip()</title>
            <indexterm type="parameter">
                <primary>localip()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>string</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0.0.0.0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> The IP address to bind to before connecting to
                target.</para>
        </simplesect>
        <simplesect xml:id="destination_option_localport">
            <title>localport()</title>
            <indexterm type="parameter">
                <primary>localport()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> The port number to bind to. Messages are sent
                from this port.</para>
        </simplesect>
        <simplesect xml:id="destination_option_port">
            <title>port() or destport()</title>
            <indexterm type="parameter">
                <primary>port() or destport()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>514</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> The port number to connect to. Note that the
                default port numbers used by syslog-ng do not comply with the latest RFC which was
                published after the release of syslog-ng 3.0.2, therefore the default port numbers
                will change in the future releases.</para>
            <note>
                <para>The TCP port 514 is reserved for use with <command>rshell</command>, so select
                    a different port if syslog-ng and <command>rshell</command> is used at the same
                    time. </para>
            </note>
            <!-- syslog drivere most kulon van a referenceben -->
        </simplesect>
        <simplesect xml:id="destination_option_spoof_source">
            <title>spoof_source()</title>
            <indexterm type="parameter">
                <primary>spoof_source()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>yes or no</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>no</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Enables source address spoofing. This means that
                the host running syslog-ng generates UDP packets with the source IP address matching
                the original sender of the message. It is useful when you want to perform some kind
                of preprocessing via syslog-ng then forward messages to your central log management
                solution with the source address of the original sender. This option only works for
                UDP destinations though the original message can be received by TCP as well. This
                option is only available if syslog-ng was compiled using the
                    <parameter>--enable-spoof-source</parameter> configuration option.</para>
        </simplesect>
        <simplesect xml:id="destination_option_so_broadcast">
            <title>so_broadcast()</title>
            <indexterm type="parameter">
                <primary>so_broadcast()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>yes or no</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>no</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> This option controls the
                    <parameter>SO_BROADCAST</parameter> socket option required to make syslog-ng
                send messages to a broadcast address. For details, see the
                    <command>socket(7)</command> manual page.</para>
        </simplesect>
        <simplesect xml:id="destination_option_so_rcvbuf">
            <title>so_rcvbuf()</title>
            <indexterm type="parameter">
                <primary>so_rcvbuf()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies the size of the socket receive buffer
                in bytes. For details, see the <command>socket(7)</command> manual page.</para>
        </simplesect>
        <simplesect xml:id="destination_option_so_sndbuf">
            <title>so_sndbuf()</title>
            <indexterm type="parameter">
                <primary>so_sndbuf()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>number</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel>Specifies the size of the socket send buffer in
                bytes. For details, see the <command>socket(7)</command> manual page.</para>
        </simplesect>
        <simplesect xml:id="destination_option_tls">
            <title>tls()</title>
            <indexterm type="parameter">
                <primary>tls()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>tls options</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>n/a</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> This option sets various TLS specific options
                like key/certificate files and trusted CA locations. TLS can be used only with the
                    <parameter>tcp</parameter> transport protocols. For details, see <xref
                    linkend="tlsoptions"/>.</para>
        </simplesect>
    </section>
    <section xml:id="destination-file-logstore-common">
        <simplesect xml:id="destination-file-logstore-common-group">
            <title>group()</title>
            <indexterm type="parameter">
                <primary>group()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>string</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>Use the global settings</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Set the group of the created file to the one
                specified. To preserve the original properties of an existing file, use the option
                without specifying an attribute: <parameter>group()</parameter>.</para>
        </simplesect>
    </section>
    <section xml:id="destination-logstore-options-examples">
        <simplesect>
            <xi:include href="chunks/option-logstore-journal-shmem-threshold.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
        </simplesect>
        <example xml:id="example-logstore-journal">
            <title>Setting journal block number and size</title>
            <para>The following example sets the size of a journal block to 512KB and increases the
                number of blocks to 5.</para>
            <synopsis>destination d_logstore {
                     logstore("/var/log/messages-logstore.lgs"
                     encrypt_certificate
                      ("/opt/syslog-ng/etc/syslog-ng/keys/public-server-certificate.pem")
                     journal_block_size(524288) journal_block_count(5));
};</synopsis>
        </example>
    </section>
    <section xml:id="destination-tcp-syslog-ssl-failover">
        <title>Failover options and examples</title>
        <simplesect xml:id="destination-failover">
            <title>failover_servers()</title>
            <indexterm type="parameter">
                <primary>failover_servers()</primary>
            </indexterm>
            <indexterm>
                <primary>secondary servers</primary>
            </indexterm>
            <indexterm>
                <primary>failover servers</primary>
            </indexterm>
            <indexterm>
                <primary>fail-over servers</primary>
            </indexterm>
            <indexterm>
                <primary>tcp failover</primary>
            </indexterm>
            <indexterm>
                <primary>fail-over</primary>
            </indexterm>
            <indexterm>
                <primary>client-side failover</primary>
            </indexterm>
            <indexterm>
                <primary>FailoverSyslogServer</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>list of IP addresses and fully-qualified domain names</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>0</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Available only in &product; 3.2 and later.
                Specifies a secondary destination server where log messages are sent if the primary
                server becomes unaccessible. To list several failover servers, separate the address
                of the servers with comma. The time &abbrev; waits for the a server before switching
                to the next failover server is set in the <parameter>time_reopen()</parameter>
                option. For details about how client-side failover works, see <xref
                    linkend="concepts_failover"/>.</para>
            <warning>
                <para>The failover servers must be accessible on the same port as the primary
                    server.</para>
            </warning>
            <note>
                <para>This option is not available for the connection-less UDP protocol, because in
                    this case the client does not detect that the destination becomes
                    unaccessible.</para>
            </note>
        </simplesect>
    </section>
    <section xml:id="table_destination_commonoptions">
        <?dbfo keep-together="auto" ?>
        <title>Common options for destination drivers</title>
        <indexterm>
            <primary>destination drivers</primary>
            <secondary>common options</secondary>
        </indexterm>
        <simplesect xml:id="destination_commonoption_keep_alive">
            <title>keep-alive()</title>
            <indexterm type="parameter">
                <primary>keep-alive()</primary>
            </indexterm>
            <informaltable frame="topbot" colsep="0" rowsep="0">
                <tgroup cols="2">
                    <colspec colnum="1" colwidth="40pt"/>
                    <tbody>
                        <row>
                            <entry>Type:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>yes or no</entry>
                        </row>
                        <row>
                            <entry>Default:
                                <?dbhtml bgcolor="#D4D6EB" ?><?dbfo bgcolor="#D4D6EB" ?></entry>
                            <entry>yes</entry>
                        </row>
                    </tbody>
                </tgroup>
            </informaltable>
            <para><guilabel>Description:</guilabel> Specifies whether connections to destinations
                should be closed when syslog-ng is reloaded.
                Note that this applies to the client (destination) side of the syslog-ng
                connections, server-side (source) connections are always reopened after receiving a
                HUP signal unless the <parameter>keep-alive</parameter> option is enabled for the
                source.</para>
        </simplesect>
        <!--<row xml:id="destination_commonoption_sync_freq">
                    <entry>sync_freq()</entry>
                    <entry>number</entry>
                    <entry>Use global setting. </entry>
                    <entry>This setting is an obsolete alias of the
                        <parameter>flush_lines()</parameter> option. </entry>
                        </row>-->
    </section>

    <!-- Relaying note about keep_hostname-->
    <section>
        <title/>
        <note xml:id="note-relaying-hostname">
        <para>By default, the syslog-ng server will treat the relayed messages as if they were
            created by the relay host, not the host that originally sent them to the relay. In order
            to use the original hostname on the syslog-ng server, use the
                <parameter>keep_hostname(yes)</parameter> option both on the syslog-ng relay and the
            syslog-ng server. This option can be set individually for every source if needed.</para>
        </note>
    </section>

    <warning xml:id="destination-sql-mssql-columntype">
        <para>The following column types cannot be used in MSSQL destinations: <parameter>nchar</parameter>, <parameter>nvarchar</parameter>, <parameter>ntext</parameter>, and <parameter>xml</parameter>.</para>
    </warning>

    <!-- Note and warning about limiting the number of processors from 4F2-->

    <section>
        <title/>
        <note xml:id="note-limit-processors" condition="pe"><para>From 4 F2, &abbrev; will limit the number of processors/cores used by &abbrev;. It is limited in the license file, through the <parameter>Max-Processors</parameter> entry. The &abbrev; will use the value of this entry as the maximum number of the <parameter>--worker-threads</parameter> command line option.</para>
            <itemizedlist xml:id="note-limit-processors-list">
                <para>In the license file required to operate &product; in server mode, the <parameter>Max-Processors value</parameter> is listed as one of the following:</para>
                <listitem><para><parameter>-1</parameter>: maximum number of worker threads is unlimited</para></listitem>
                <listitem><para><parameter>0</parameter>: maximum number of worker threads is 2 (default value for LSH license)</para></listitem>
                <listitem><para><parameter>&lt;any value&gt;</parameter>: maximum number of worker threads is the set value</para></listitem>
            </itemizedlist>
        </note>
        <warning xml:id="warning-limit-processors"><para condition="pe">The <parameter>Max-Processors</parameter> entry is only a soft limit in relation to the number of used processors, because it will limit only the number of the worker-threads that affect the performance. However, &abbrev; can start other threads (for example mainthread) that can use other processors.</para></warning>
    </section>

</chapter>
