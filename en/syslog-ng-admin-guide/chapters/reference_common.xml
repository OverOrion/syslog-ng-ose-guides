<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter
 [
 <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]>
<chapter xmlns="http://docbook.org/ns/docbook" version="5.0">
    <title/>

    <section xml:id="destination-logstore-options-examples">
        <simplesect>
            <xi:include href="chunks/option-logstore-journal-shmem-threshold.xml" xmlns:xi="http://www.w3.org/2001/XInclude"/>
        </simplesect>
        <example xml:id="example-logstore-journal">
            <title>Setting journal block number and size</title>
            <para>The following example sets the size of a journal block to 512KB and increases the
                number of blocks to 5.</para>
            <synopsis>destination d_logstore {
                     logstore("/var/log/messages-logstore.lgs"
                     encrypt_certificate
                      ("/opt/syslog-ng/etc/syslog-ng/keys/public-server-certificate.pem")
                     journal_block_size(524288) journal_block_count(5));
};</synopsis>
        </example>
    </section>
    <section xml:id="table_destination_commonoptions">
        <?dbfo keep-together="auto" ?>
        <title>Common options for destination drivers</title>
        <indexterm>
            <primary>destination drivers</primary>
            <secondary>common options</secondary>
        </indexterm>
        <!--<row xml:id="destination_commonoption_sync_freq">
                    <entry>sync_freq()</entry>
                    <entry>number</entry>
                    <entry>Use global setting. </entry>
                    <entry>This setting is an obsolete alias of the
                        <parameter>flush_lines()</parameter> option. </entry>
                        </row>-->
    </section>

    <!-- Relaying note about keep_hostname-->
    <section>
        <title/>
        <note xml:id="note-relaying-hostname">
        <para>By default, the syslog-ng server will treat the relayed messages as if they were
            created by the relay host, not the host that originally sent them to the relay. In order
            to use the original hostname on the syslog-ng server, use the
                <parameter>keep_hostname(yes)</parameter> option both on the syslog-ng relay and the
            syslog-ng server. This option can be set individually for every source if needed.</para>
        </note>
    </section>



    <!-- Note and warning about limiting the number of processors from 4F2-->

    <section>
        <title/>
        <note xml:id="note-limit-processors" condition="pe"><para>From 4 F2, &abbrev; will limit the number of processors/cores used by &abbrev;. It is limited in the license file, through the <parameter>Max-Processors</parameter> entry. The &abbrev; will use the value of this entry as the maximum number of the <parameter>--worker-threads</parameter> command line option.</para>
            <itemizedlist xml:id="note-limit-processors-list">
                <para>In the license file required to operate &product; in server mode, the <parameter>Max-Processors value</parameter> is listed as one of the following:</para>
                <listitem><para><parameter>-1</parameter>: maximum number of worker threads is unlimited</para></listitem>
                <listitem><para><parameter>0</parameter>: maximum number of worker threads is 2 (default value for LSH license)</para></listitem>
                <listitem><para><parameter>&lt;any value&gt;</parameter>: maximum number of worker threads is the set value</para></listitem>
            </itemizedlist>
        </note>
        <warning xml:id="warning-limit-processors"><para condition="pe">The <parameter>Max-Processors</parameter> entry is only a soft limit in relation to the number of used processors, because it will limit only the number of the worker-threads that affect the performance. However, &abbrev; can start other threads (for example mainthread) that can use other processors.</para></warning>
    </section>

</chapter>
