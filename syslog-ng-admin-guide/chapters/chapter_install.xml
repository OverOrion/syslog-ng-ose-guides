<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter SYSTEM "../../xml-stylesheet/pdf/dtd/docbookx.dtd"
 [  
 <!ENTITY % entities SYSTEM "../syslog-ng-entities.ent">
 %entities;]> 
<chapter id="chapter_install">
    <title>Installing syslog-ng</title>
    <indexterm>
        <primary>installing syslog-ng</primary>
    </indexterm>
    <para>This chapter explains how to install syslog-ng on the supported platforms using the
        precompiled binary files.</para>
    <para>The &abbrev; application features a unified installer package with identical look on every
        supported platform (excluding Microsoft Windows and IBM System i &mdash; for details on
        installing syslog-ng on Microsoft Windows and IBM System i see <olink
            targetdoc="syslog-ng-windows-agent-guide-admin" targetptr="chapter_install"/> and <olink
            targetdoc="syslog-ng-ibm-agent-guide-admin"/>, respectively.</para>
    <para>The syslog-ng binaries include all required libraries and dependencies of syslog-ng. The
        components are installed into the <filename>/opt/syslog-ng</filename> directory. It can
        automatically re-use existing configuration and license files, and also generate a simple
        configuration automatically into the <filename>/opt/syslog-ng/etc/syslog-ng.conf</filename>
        file. </para>
    <note>
        <para>There are two versions of every binary release. The one with the
                <parameter>client</parameter> suffix does not include the libraries required to log
            into SQL databases. If you are installing syslog-ng in client or relay mode, or you do
            not use the <parameter>sql()</parameter> destination, use these binaries. That way no
            unnecessary components are installed to your system. </para>
    </note>
    <indexterm>
        <primary>syslog-ng binaries</primary>
        <secondary>location of</secondary>
    </indexterm>
    <indexterm>
        <primary>installation path</primary>
    </indexterm>
    <para>The syslog-ng application can be installed interactively following the on-screen
        instructions as described in <xref linkend="install_run"/>, and also without user
        interaction using the silent installation option &mdash; see <xref
            linkend="install_run_silent"/>.</para>
    <!-- FIXME leirni, melyik platformon mit csinal - regi syslog leallit, apparmor, stb. -->

    <section id="install_run">
        <title>Installing syslog-ng using the .run installer</title>
        <indexterm significance="preferred">
            <primary>installing syslog-ng</primary>
        </indexterm>
        <para>This section describes how to install the syslog-ng application interactively using
            the binary installer. The installer has a simple interface: use the TAB or the arrow
            keys of your keyboard to navigate between the options, and Enter to select an
            option.</para>
        <itemizedlist>
            <listitem>
                <para>To install syslog-ng on clients or relays, complete <xref
                        linkend="install_run_client"/>.</para>
            </listitem>
            <listitem>
                <para>To install syslog-ng on your central logserver, complete <xref
                        linkend="install_run_server"/>.</para>
            </listitem>
            <listitem>
                <para>To install syslog-ng without any user-interaction, complete <xref
                        linkend="install_run_silent"/>.</para>
            </listitem>
        </itemizedlist>
        <note>
            <para>The installer stops the running syslogd application if it is running, but its
                components are not removed. The <filename>/etc/init.d/sysklogd</filename> init
                script is automatically renamed to <filename>/etc/init.d/sysklogd.backup</filename>.
                Rename this file to its original name if you want to remove syslog-ng or restart the
                syslogd package.</para>
        </note>
        <note>
            <para>The <parameter>.run</parameter> installer copies temporary files under the <filename>/tmp</filename> directory, requiring about 15-70MB free space. If there is not enough free space under <filename>/tmp</filename>, before starting the installer, set a different directory using the <parameter>TMPDIR environment variable</parameter>. In Bourne and Korn-compatible shells, issue the following commands:</para>
            <synopsis># TMPDIR=/var/tmp
  # export TMPDIR</synopsis>
           <para>In C shell, issue the following command:</para>
           <synopsis># setenv TMPDIR /var/tmp</synopsis>
        </note>

        <section id="install_run_client">
            <title>Installing syslog-ng in client or relay mode</title>
            <para>Complete the following steps to install syslog-ng Premium Edition on clients or
                relays. For details on the different operation modes of syslog-ng, see <xref
                    linkend="concepts_modes_of_operation"/>.</para>
            <procedure>
                <title>Installing syslog-ng in client or relay mode</title>
                <indexterm>
                    <primary>installing syslog-ng</primary>
                    <secondary>on clients and relays</secondary>
                </indexterm>
                <step>
                    <para>Login to <ulink url="http://www.balabit.com/mybalabit">your MyBalabit
                            account</ulink> and download the syslog-ng installer package.</para>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_welcome']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_eula']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_platform']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
                <step>
                    <para><emphasis>Locating the license</emphasis>: Since you are installing
                        syslog-ng in client or relay mode, simply select <guibutton>OK</guibutton>.
                        For details on the different operation modes of syslog-ng, see <xref
                            linkend="concepts_modes_of_operation"/>.</para>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_upgrade']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_config']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
                <step>
                    <xi:include href="install_common.xml"
                        xpointer="xpointer(//step[@id = 'installer_path']/node() )"
                        xmlns:xi="http://www.w3.org/2001/XInclude"/>
                </step>
            </procedure>
            <note>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//note[@id = 'initscript_logrotate']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </note>
        </section>
        <procedure id="install_run_server">
            <title>Installing syslog-ng in server mode</title>
            <indexterm>
                <primary>installing syslog-ng</primary>
                <secondary>on logservers</secondary>
            </indexterm>
            <formalpara>
                <title>Steps:</title>
                <para/>
            </formalpara>
            <para>Complete the following steps to install syslog-ng on logservers. For details on
                the different operation modes of syslog-ng, see <xref
                    linkend="concepts_modes_of_operation"/>.</para>
            <formalpara>
                <title>Steps:</title>
                <para/>
            </formalpara>
            <step>
                <para>Login to <ulink url="http://www.balabit.com/mybalabit">your MyBalabit
                        account</ulink> and download the syslog-ng installer package and your
                    syslog-ng Premium Edition license. The license will be required to run syslog-ng
                    in server mode (see <xref linkend="concepts_server_mode"/>) and is needed when
                    you are installing syslog-ng on your central logserver.</para>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_welcome']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_eula']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_platform']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
            <step>
                <para><emphasis>Locating the license</emphasis>: Enter the path to your license file
                    and select <guibutton>OK</guibutton>. Typically this is required only for your
                    central logserver.</para>
                <para>If you are upgrading an existing configuration that already has a license
                    file, the installer automatically detects it.</para>
                <figure>
                    <title>Platform detection</title>
                    <mediaobject>
                        <imageobject role="html">
                            <imagedata format="PNG" align="center" fileref="installer_license.png"/>
                        </imageobject>
                        <imageobject role="fo">
                            <imagedata format="PNG" scale="50"
                                fileref="&imgroot;/installer_license.png"/>
                        </imageobject>
                    </mediaobject>
                </figure>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_upgrade']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_config']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
            <step>
                <xi:include href="install_common.xml"
                    xpointer="xpointer(//step[@id = 'installer_path']/node() )"
                    xmlns:xi="http://www.w3.org/2001/XInclude"/>
            </step>
        </procedure>
        <note>
            <xi:include href="install_common.xml"
                xpointer="xpointer(//note[@id = 'initscript_logrotate']/node() )"
                xmlns:xi="http://www.w3.org/2001/XInclude"/>
        </note>

        <section id="install_run_silent">
            <title>Installing syslog-ng without user-interaction</title>
            <indexterm>
                <primary>installing syslog-ng</primary>
                <secondary>in silent mode</secondary>
            </indexterm>
            <para>The syslog-ng application can be installed in silent mode without any
                user-interaction by specifying the required parameters from the command line.
                Answers to every question of the installer can be set in advance using command-line
                parameters.</para>
            <synopsis>./syslog-ng-premium-edition-&lt;version&gt;.run -- [options]</synopsis>
            <warning>
                <para>The <parameter>--</parameter> characters between the executable and the
                    parameters are mandatory, like in the following example:
                        <command>./syslog-ng-premium-edition-3.0.1b-solaris-10-sparc-client.run --
                        --accept-eula -l /var/tmp/license.txt </command></para>
            </warning>
            <para>To display the list of parameters, execute the
                    <command>./syslog-ng-premium-edition-&lt;version&gt;.run -- --h</command>
                command. Currently the following options are available:</para>
            <itemizedlist>
                <listitem>
                    <para><parameter>--accept-eula or -a</parameter>: Accept the EULA.</para>
                </listitem>
                <listitem>
                    <para><parameter>--license-file &lt;file&gt; or -l &lt;file&gt;</parameter>:
                        Path to the license file.</para>
                </listitem>
                <listitem>
                    <para><parameter>--upgrade | -u</parameter>: Perform automatic upgrade &mdash;
                        use the configuration file and license file from an existing
                        installation.</para>
                </listitem>
                <listitem>
                    <para><parameter>--remote &lt;destination host&gt;</parameter>: Send logs to the
                        specified remote server. Not available when performing an upgrade.</para>
                </listitem>
                <listitem>
                    <para><parameter>--network</parameter>: Accept messages from the network. Not
                        available when performing an upgrade.</para>
                </listitem>
                <listitem>
                    <para><parameter>--configuration &lt;file&gt;</parameter>: Use the specified
                        configuration file.</para>
                </listitem>
            </itemizedlist>
        </section>
    </section>


    <!-- FIXME LFS install 
        - installation: tar xfz syslog-ng-premium-edition_2.1.6b_i386.tgz -C /
        - docs: /opt/syslog-ng/doc/lfs-packaging
    -->
    <!-- FIXME APParmor resz, ahova kell, pl. SLES 10-en
        2. if you use Novel AppArmor:
        2.1. download following file and overwrite  the  one on /etc/apparmor.d with it:
        http://people.balabit.hu/folti/syslogng/sbin.syslog-ng <- EZ LEGYEN A CSOMAGOK RESZE! BUG 12752
        2.2. restart apparmor:
        /etc/init.d/boot.apparmor stop
        /etc/init.d/boot.apparmor start
    -->




    <procedure id="install_rpm">
        <title>Installing syslog-ng on RPM-based platforms (Red Hat, SUSE, AIX)</title>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>from RPM package</secondary>
        </indexterm>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>on Red Hat Enterprise Server</secondary>
        </indexterm>
        <indexterm>
            <primary>Red Hat Enterprise Server</primary>
            <secondary>installing syslog-ng</secondary>
        </indexterm>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>on CentOS</secondary>
        </indexterm>
        <indexterm>
            <primary>CentOS</primary>
            <secondary>installing syslog-ng</secondary>
        </indexterm>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>on AIX</secondary>
        </indexterm>
        <indexterm>
            <primary>AIX</primary>
            <secondary>installing syslog-ng</secondary>
        </indexterm>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>on SUSE Linux Enterprise Server</secondary>
        </indexterm>
        <indexterm>
            <primary>SUSE Linux Enterprise Server</primary>
            <secondary>installing syslog-ng</secondary>
        </indexterm>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To install syslog-ng on operating systems that use the Red Hat Package Manager (RPM),
            complete the following steps. Installing syslog-ng automatically replaces the original
            syslog service. The following supported operating systems use RPM: </para>
        <itemizedlist>
            <listitem>
                <para>AIX 5.2 and 5.3</para>
            </listitem>
            <listitem>
                <para>CentOS 4 and 5</para>
            </listitem>
            <listitem>
                <para>openSUSE Linux Enterprise Server 10.0 and 10.1</para>
            </listitem>
            <listitem>
                <para>Red Hat Enterprise Server 4 and 5</para>
            </listitem>
            <listitem>
                <para>SUSE Linux Enterprise Server 10 and 10 SP1</para>
            </listitem>
        </itemizedlist>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Login to <ulink url="http://www.balabit.com/mybalabit">your MyBalabit
                    account</ulink> and download the <ulink
                    url="http://www.balabit.com/network-security/syslog-ng/central-syslog-server/upgrades/"
                    >syslog-ng RPM package for your system</ulink>.</para>
        </step>
        <step>
            <itemizedlist>
                <listitem>
                    <para>If the host already uses syslog-ng for logging, execute the following
                        command as root. Otherwise, skip this step. </para>
                    <synopsis>rpm -U syslog-ng-premium-edition-&lt;version&gt;-&lt;OS&gt;-&lt;arch&gt;.rpm</synopsis>
                    <para>The syslog-ng Premium Edition application and all its dependencies will be
                        installed, and the configuration of the existing syslog-ng installation will
                        be used.</para>
                    <note>
                        <para>If you are upgrading from syslog-ng version 2.1, note that the
                            location of the configuration file has been moved to
                                <filename>/opt/syslog-ng/etc/syslog-ng.conf</filename></para>
                    </note>
                </listitem>
                <listitem>
                    <para>Execute the following command as root:</para>
                    <synopsis>rpm -i syslog-ng-premium-edition-&lt;version&gt;-&lt;OS&gt;-&lt;arch&gt;.rpm</synopsis>
                    <para>The syslog-ng Premium Edition application and all its dependencies will be
                        installed.</para>
                </listitem>
            </itemizedlist>
        </step>
        <step>
            <para>Answer the configuration questions of syslog-ng. These are described in detail in
                    <xref linkend="install_run"/>.</para>
        </step>
        <step>
            <warning>
                <para>When performing an upgrade, the package manager might automatically execute
                    the post-uninstall script of the upgraded package, stopping syslog-ng and
                    starting syslogd. If this happens, stop syslogd and start syslog-ng by issuing
                    the following commands:</para>
                <synopsis>/etc/init.d/syslogd stop
/etc/init.d/syslog-ng start</synopsis>
                <para>This behavior has been detected on CentOS 4 systems, but may occur on other
                    rpm-based platforms as well.</para>
            </warning>
        </step>
        <!--<step>
                <indexterm>
                    <primary>Novell AppArmor</primary>
                </indexterm>
                <para><emphasis>Optional step</emphasis>: If Novell AppArmor is used on the
                    computer, copy the <filename>/usr/share/doc/syslog-ng/sbin.syslog-ng</filename>
                    file into the <filename>/etc/apparmor.d/</filename> directory and restart
                    AppArmor.</para>
            </step>-->
        <!--<step>
                <para><emphasis>Optional step</emphasis>: When installing syslog-ng to the central
                    syslog-ng server, copy the <filename>license.txt</filename> license file to the
                        <filename>/opt/syslog-ng/etc/syslog-ng/</filename> directory of the server.</para>
            </step>-->
        <step>
            <para>
                <indexterm>
                    <primary>AIX</primary>
                    <secondary>redirecting errorlog to syslog-ng</secondary>
                </indexterm>
                <emphasis>Optional step for AIX systems</emphasis>: To redirect the messages of the
                AIX Error log into syslog, create a file (for example
                    <filename>/tmp/syslog-ng.add</filename>) with the following contents:</para>
            <synopsis>errnotify:
en_name = "syslog1"
en_persistenceflg = 1
en_method = "logger Msg from Error Log: `errpt -l $1 | grep -v 'ERROR_ID TIMESTAMP'`"</synopsis>
            <para>Then execute the following command as root: <command>odmadd
                    /tmp/syslog-ng.add</command>.</para>
        </step>
    </procedure>

    <procedure id="install_deb">
        <title>Installing syslog-ng on Debian-based platforms</title>
        <indexterm>
            <primary>installing syslog-ng</primary>
            <secondary>from DEB package</secondary>
        </indexterm>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>To install syslog-ng on operating systems that use the Debian Software Package (deb)
            format, complete the following steps. The following supported operating systems use this
            format: </para>
        <itemizedlist>
            <listitem>
                <para>Debian etch</para>
            </listitem>
        </itemizedlist>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Login to <ulink url="http://www.balabit.com/mybalabit">your MyBalabit
                    account</ulink> and download the <ulink
                    url="http://www.balabit.com/network-security/syslog-ng/central-syslog-server/upgrades/"
                    >syslog-ng DEB package for your system</ulink>.</para>
        </step>
        <!--<step>
                <para>Remove the existing system logging package from the host. Issue the following
                    command as root if the host is running syslog: <command>dpkg -r
                    sysklogd</command>, or <command>dpkg -r syslog-ng</command> if the host is
                    running the open source version of syslog-ng.</para>
            </step>-->
        <step>
            <para>Issue the following command as root: </para>
            <para>
                <command>dpkg -i
                    syslog-ng-premium-edition-&lt;version&gt;-&lt;OS&gt;-&lt;arch&gt;.deb</command>
            </para>
        </step>
        <step>
            <para>Answer the configuration questions of syslog-ng. These are described in detail in
                    <xref linkend="install_run"/>.</para>
        </step>

        <!--<step>
                <indexterm>
                    <primary>Novell AppArmor</primary>
                </indexterm>
                <para><emphasis>Optional step</emphasis>: If Novell AppArmor is used on the
                    computer, copy the <filename>/usr/share/doc/syslog-ng/sbin.syslog-ng</filename>
                    file into the <filename>/etc/apparmor.d/</filename> directory and restart
                    AppArmor.</para>
            </step>-->
        <!--<step>
                <para><emphasis>Optional step</emphasis>: When installing syslog-ng to the central
                    syslog-ng server, copy the <filename>license.txt</filename> license file to the
                        <filename>/opt/syslog-ng/etc/syslog-ng/</filename> directory of the server.</para>
            </step>-->
    </procedure>
    <section id="uninstalling_syslog-ng">
        <title>Uninstalling syslog-ng</title>
        <indexterm>
            <primary>uninstalling syslog-ng</primary>
        </indexterm>
        <indexterm>
            <primary>removing syslog-ng</primary>
        </indexterm>
        <indexterm>
            <primary>deleting syslog-ng</primary>
        </indexterm>
        <para>If you need to uninstall syslog-ng for some reason, you have the following
            options:</para>
        <itemizedlist>
            <listitem>
                <para><emphasis>If you have installed syslog-ng using the .run installer</emphasis>:
                    Execute the <command>uninstall.sh</command> script located at
                        <filename>/opt/syslog-ng/bin/uninstall.sh</filename>. The uninstall script
                    will automatically restore the syslog daemon used before installing syslog-ng.
                    To completely remove syslog-ng, including the configuration files, use the
                        <command>uninstall.sh --purge</command> command.</para>
            </listitem>
            <listitem>
                <para><emphasis>If you have installed syslog-ng from a .deb package</emphasis>:
                    Execute the <command>dpkg -r syslog-ng-premium-edition</command> command to
                    remove syslog-ng; or the <command>dpkg -P syslog-ng-premium-edition</command>
                    command to remove syslog-ng and the configuration files as well. Note that
                    removeing syslog-ng does not restore the syslog daemon used before
                    syslog-ng.</para>
            </listitem>
            <listitem>
                <para><emphasis>If you have installed syslog-ng from an .rpm package</emphasis>:
                    Execute the <command>rpm -e syslog-ng-premium-edition</command> command to
                    remove syslog-ng. Note that removing syslog-ng does not restore the syslog
                    daemon used before syslog-ng. </para>
            </listitem>
        </itemizedlist>
    </section>
    <procedure id="configure_mssql_server">
        <title>Configuring Microsoft SQL Server to accept logs from syslog-ng</title>
        <indexterm>
            <primary>destinations</primary>
            <secondary>Microsoft SQL Server configuration</secondary>
        </indexterm>
        <indexterm>
            <primary>destinations</primary>
            <secondary>MSSQL configuration</secondary>
        </indexterm>
        <indexterm>
            <primary>destinations</primary>
            <secondary>FreeTDS configuration</secondary>
        </indexterm>
        <indexterm>
            <primary>Microsoft SQL Server configuration</primary>
        </indexterm>
        <formalpara>
            <title>Purpose:</title>
            <para/>
        </formalpara>
        <para>Complete the following steps to configure your Microsoft SQL Server to enable remote
            logins and accept log messages from syslog-ng.</para>
        <formalpara>
            <title>Steps:</title>
            <para/>
        </formalpara>
        <step>
            <para>Start the SQL Server Management Studio application. Select <guimenu>Start >
                    Programs > Microsoft SQL Server 2005 > SQL Server Management
                Studio</guimenu>.</para>
        </step>
        <step>
            <para>Create a new database.</para>
            <substeps>
                <step>
                    <para>In the Object Explorer, right-click on the <guilabel>Databases</guilabel>
                        entry and select <guimenu>New Database</guimenu>.</para>
                    <figure float="0">
                        <title>Creating a new MSSQL database 1.</title>
                        <mediaobject>
                            <imageobject role="html">
                                <imagedata format="PNG" align="center"
                                    fileref="mssql-newdb-select.png"/>
                            </imageobject>
                            <imageobject role="fo">
                                <imagedata format="PNG" fileref="&imgroot;/mssql-newdb-select.png"
                                    contentwidth="&screenshotsize_small;"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </step>
                <step>
                    <para>Enter the name of the new database (for example
                            <parameter>syslogng</parameter>) into the <guilabel>Database
                            name</guilabel> field and click <guibutton>OK</guibutton>.</para>
                    <figure float="0">
                        <title>Creating a new MSSQL database 2.</title>
                        <mediaobject>
                            <imageobject role="html">
                                <imagedata format="PNG" align="center"
                                    fileref="mssql-newdb-create.png"/>
                            </imageobject>
                            <imageobject role="fo">
                                <imagedata format="PNG" fileref="&imgroot;/mssql-newdb-create.png"
                                    contentwidth="&screenshotsize;"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </step>
            </substeps>
        </step>
        <step>
            <para>Create a new database user and associate it with the new database. </para>
            <substeps>
                <step>
                    <para>In the Object Explorer, select <guilabel>Security</guilabel>, right-click
                        on the <guilabel>Logins</guilabel> entry, then select <guimenu>New
                            Login</guimenu>.</para>
                    <figure float="0">
                        <title>Creating a new MSSQL user 1.</title>
                        <mediaobject>
                            <imageobject role="html">
                                <imagedata format="PNG" align="center"
                                    fileref="mssql-newuser-select.png"/>
                            </imageobject>
                            <imageobject role="fo">
                                <imagedata format="PNG" fileref="&imgroot;/mssql-newuser-select.png"
                                    contentwidth="&screenshotsize_small;"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </step>
                <step>
                    <para>Enter a name (for example <parameter>syslog-ng</parameter>) for the user
                        into the <guilabel>Login name</guilabel> field.</para>
                    <figure float="0">
                        <title>Creating a new MSSQL user 2.</title>
                        <mediaobject>
                            <imageobject role="html">
                                <imagedata format="PNG" align="center"
                                    fileref="mssql-newuser-general.png"/>
                            </imageobject>
                            <imageobject role="fo">
                                <imagedata format="PNG"
                                    fileref="&imgroot;/mssql-newuser-general.png"
                                    contentwidth="&screenshotsize;"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </step>
                <step>
                    <para>Select the <guilabel>SQL Server Authentication</guilabel> option and enter
                        a password for the user.</para>
                </step>
                <step>
                    <para>In the <guilabel>Default database</guilabel> field, select the database
                        created in Step 2 (for example <parameter>syslogng</parameter>).</para>
                </step>
                <step>
                    <para>In the <guilabel>Default language</guilabel> field, select the language of
                        log messages that you want to store in the database, then click
                            <guibutton>OK</guibutton>.</para>
                    <warning>
                        <para>Incorrect language settings may result in the database converting the
                            messages to a different character-encoding format. That way the log
                            messages may become unreadable, causing information loss.</para>
                    </warning>
                </step>
                <step>
                    <para>In the Object Explorer, select <guilabel>Security > Logins</guilabel>,
                        then right-click on the new login created in the previous step, and select
                            <guimenu>Properties</guimenu>.</para>
                </step>
                <step>
                    <para>Select <guilabel>User Mapping</guilabel>. In the <guilabel>Users mapped to
                            this login</guilabel> option, check the line corresponding to the new
                        login (for example <parameter>syslogng</parameter>). In the
                            <guilabel>Database role membership</guilabel> field, check the
                            <guilabel>db_owner</guilabel> and <guilabel>public</guilabel>
                        options.</para>
                    <figure float="0">
                        <title>Associating database with the new user</title>
                        <mediaobject>
                            <imageobject role="html">
                                <imagedata format="PNG" align="center"
                                    fileref="mssql-newuser-setowner.png"/>
                            </imageobject>
                            <imageobject role="fo">
                                <imagedata format="PNG"
                                    fileref="&imgroot;/mssql-newuser-setowner.png"
                                    contentwidth="&screenshotsize;"/>
                            </imageobject>
                        </mediaobject>
                    </figure>
                </step>
            </substeps>
        </step>
        <step>
            <para>Enable remote logins for SQL users.</para>
            <para>In the Object Explorer right-click on your database server, and select
                    <guimenu>Properties > Security</guimenu>, and set the <guilabel>Server
                    Authentication</guilabel> option to <guilabel>SQL Server and Windows
                    Authentication mode</guilabel>. </para>
            <figure float="0">
                <title>Associating database with the new user</title>
                <mediaobject>
                    <imageobject role="html">
                        <imagedata format="PNG" align="center" fileref="mssql-newuser-login.png"/>
                    </imageobject>
                    <imageobject role="fo">
                        <imagedata format="PNG" fileref="&imgroot;/mssql-newuser-login.png"
                            contentwidth="&screenshotsize;"/>
                    </imageobject>
                </mediaobject>
            </figure>
        </step>
    </procedure>
</chapter>
